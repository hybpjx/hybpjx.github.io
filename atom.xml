<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>始識’s 博客</title>
  
  
  <link href="https://hybpjx.cn/atom.xml" rel="self"/>
  
  <link href="https://hybpjx.cn/"/>
  <updated>2026-01-18T03:01:11.211Z</updated>
  <id>https://hybpjx.cn/</id>
  
  <author>
    <name>hybpjx</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Celery+FastAPI+Redis+supervisord部署爬虫任务</title>
    <link href="https://hybpjx.cn/2026/01/16/Celery-FastAPI-Redis-supervisord%E9%83%A8%E7%BD%B2%E7%88%AC%E8%99%AB%E4%BB%BB%E5%8A%A1/"/>
    <id>https://hybpjx.cn/2026/01/16/Celery-FastAPI-Redis-supervisord%E9%83%A8%E7%BD%B2%E7%88%AC%E8%99%AB%E4%BB%BB%E5%8A%A1/</id>
    <published>2026-01-16T03:48:09.000Z</published>
    <updated>2026-01-18T03:01:11.211Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>目标：用最少的组件、最清晰的方式，把一个爬虫任务系统从本地跑起来，并能稳定部署。</p></blockquote><p>关键词：FastAPI &#x2F; Celery &#x2F; Redis &#x2F; supervisord</p><h1 id="常见任务需求"><a href="#常见任务需求" class="headerlink" title="常见任务需求"></a>常见任务需求</h1><p>在爬虫或异步任务场景中，常见需求是：</p><blockquote><p>Web 接口负责接收请求（FastAPI）<br>任务异步执行，不阻塞接口（Celery）<br>任务队列和结果存储（Redis）<br>一个命令启动所有进程（supervisord）<br>这套组合的优点只有一句话：<br>成熟、稳定、组件少、可横向扩展</p></blockquote><h1 id="整体架构"><a href="#整体架构" class="headerlink" title="整体架构"></a>整体架构</h1><hr><p>Client<br>  │<br>  ▼<br>FastAPI  ──►  Redis  ◄──  Celery Worker<br>                ▲<br>                │<br>           Task Result &#x2F; Queue</p><hr><ul><li>FastAPI：提供 HTTP API</li><li>Celery：执行爬虫任务</li><li>Redis：Broker + Backend</li><li>supervisord：进程管理</li></ul><h1 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h1><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs nix">sz_rc_crawer_pb<span class="hljs-symbol">/</span><br>├── main.py <span class="hljs-comment"># FastAPI 入口</span><br>├── tasks.py <span class="hljs-comment"># Celery 定义</span><br>├── config.py <span class="hljs-comment"># 统一配置加载</span><br>├── conf.yaml <span class="hljs-comment"># 单一配置文件（像 Go viper）</span><br>├── logger_config.py <span class="hljs-comment"># loguru 日志</span><br>├── supervisord.conf <span class="hljs-comment"># 进程管理</span><br>├── logs<span class="hljs-symbol">/</span> <span class="hljs-comment"># 日志目录</span><br></code></pre></td></tr></table></figure><h1 id="统一配置"><a href="#统一配置" class="headerlink" title="统一配置"></a>统一配置</h1><p>conf.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">local:</span><br>    <span class="hljs-attr">app_name:</span> <span class="hljs-string">crawler</span><br><br>    <span class="hljs-attr">log:</span><br>        <span class="hljs-attr">level:</span> <span class="hljs-string">DEBUG</span><br>        <span class="hljs-attr">dir:</span> <span class="hljs-string">logs</span><br><br>    <span class="hljs-attr">celery:</span><br>        <span class="hljs-attr">redis_url:</span> <span class="hljs-string">&quot;redis://localhost:6379/0&quot;</span><br>        <span class="hljs-attr">key_prefix:</span> <span class="hljs-string">&quot;&#123;crawler.local&#125;&quot;</span><br><br><br><span class="hljs-attr">qa:</span><br>    <span class="hljs-attr">app_name:</span> <span class="hljs-string">crawler</span><br><br>    <span class="hljs-attr">log:</span><br>        <span class="hljs-attr">level:</span> <span class="hljs-string">INFO</span><br>        <span class="hljs-attr">dir:</span> <span class="hljs-string">logs</span><br><br>    <span class="hljs-attr">celery:</span><br>        <span class="hljs-attr">redis_url:</span> <span class="hljs-string">&quot;redis://:password@redis-qa.xxx.com:6379/0&quot;</span><br>        <span class="hljs-attr">key_prefix:</span> <span class="hljs-string">&quot;&#123;crawler.qa&#125;&quot;</span><br></code></pre></td></tr></table></figure><p>通过一个环境变量控制：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> APP_ENV=<span class="hljs-built_in">local</span><br></code></pre></td></tr></table></figure><p>config.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> yaml<br><br><br>BASE_DIR = os.path.dirname(os.path.abspath(__file__))<br>ENV = os.getenv(<span class="hljs-string">&quot;APP_ENV&quot;</span>, <span class="hljs-string">&quot;local&quot;</span>)<br><br><br>CONF_PATH = os.path.join(BASE_DIR, <span class="hljs-string">&quot;conf.yaml&quot;</span>)<br><br><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(CONF_PATH, <span class="hljs-string">&quot;r&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> f:<br>raw = yaml.safe_load(f)<br><br><br>conf = raw[ENV]<br></code></pre></td></tr></table></figure><p>特点：</p><ol><li>只有一个配置文件</li><li>不引入一堆 Python 模块</li><li>行为和 viper 非常接近</li></ol><h1 id="日志系统"><a href="#日志系统" class="headerlink" title="日志系统"></a>日志系统</h1><p>logger_config.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> loguru <span class="hljs-keyword">import</span> logger<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">from</span> config <span class="hljs-keyword">import</span> conf<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">setup_logger</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span></span>):<br>    log_dir = conf[<span class="hljs-string">&quot;log&quot;</span>][<span class="hljs-string">&quot;dir&quot;</span>]<br>    os.makedirs(log_dir, exist_ok=<span class="hljs-literal">True</span>)<br>    logger.remove()<br>    logger.add(<br>    sys.stdout,<br>    level=conf[<span class="hljs-string">&quot;log&quot;</span>][<span class="hljs-string">&quot;level&quot;</span>],<br>    <span class="hljs-built_in">format</span>=<span class="hljs-string">&quot;&#123;time&#125; | &#123;level&#125; | &#123;name&#125;:&#123;function&#125;:&#123;line&#125; - &#123;message&#125;&quot;</span>,)<br>    logger.add(<br>    <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;log_dir&#125;</span>/<span class="hljs-subst">&#123;name&#125;</span>_&#123;&#123;time:YYYY-MM-DD&#125;&#125;.log&quot;</span>,<br>    rotation=<span class="hljs-string">&quot;00:00&quot;</span>,<br>    retention=<span class="hljs-string">&quot;30 days&quot;</span>,<br>    level=<span class="hljs-string">&quot;DEBUG&quot;</span>)<br>    <span class="hljs-keyword">return</span> logger<br></code></pre></td></tr></table></figure><h1 id="FastAPI"><a href="#FastAPI" class="headerlink" title="FastAPI"></a>FastAPI</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> FastAPI<br><span class="hljs-keyword">from</span> logger_config <span class="hljs-keyword">import</span> setup_logger<br><br><br>logger = setup_logger(<span class="hljs-string">&quot;api&quot;</span>)<br>app = FastAPI()<br><br><br><br><span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">&quot;/crawl&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">start_crawl</span>(<span class="hljs-params">keyword: <span class="hljs-built_in">str</span></span>):<br>    task = crawl.delay(keyword)<br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;task_id&quot;</span>: task.<span class="hljs-built_in">id</span>&#125;<br><br><span class="hljs-meta">@app.get(<span class="hljs-params"><span class="hljs-string">&quot;/task/&#123;task_id&#125;&quot;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_status</span>(<span class="hljs-params">task_id: <span class="hljs-built_in">str</span></span>):<br>    result = AsyncResult(task_id, app=celery_app)<br>    <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-string">&quot;state&quot;</span>: result.state,<br>        <span class="hljs-string">&quot;result&quot;</span>: result.result<br>    &#125;<br><br></code></pre></td></tr></table></figure><blockquote><p>curl <a href="http://127.0.0.1:8000/crawl">http://127.0.0.1:8000/crawl</a></p></blockquote><h1 id="Celery（爬虫任务执行）"><a href="#Celery（爬虫任务执行）" class="headerlink" title="Celery（爬虫任务执行）"></a>Celery（爬虫任务执行）</h1><p>tasks.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> celery <span class="hljs-keyword">import</span> Celery<br><span class="hljs-keyword">from</span> config <span class="hljs-keyword">import</span> conf<br><span class="hljs-keyword">from</span> logger_config <span class="hljs-keyword">import</span> setup_logger<br><br><br>logger = setup_logger(<span class="hljs-string">&quot;celery&quot;</span>)<br><br><br>celery_app = Celery(<br>conf[<span class="hljs-string">&quot;app_name&quot;</span>],<br>broker=conf[<span class="hljs-string">&quot;celery&quot;</span>][<span class="hljs-string">&quot;redis_url&quot;</span>],<br>backend=conf[<span class="hljs-string">&quot;celery&quot;</span>][<span class="hljs-string">&quot;redis_url&quot;</span>],<br>)<br><br><br><br><br>celery_app.conf.update(<br>broker_transport_options=&#123;<br><span class="hljs-string">&quot;global_keyprefix&quot;</span>: conf[<span class="hljs-string">&quot;celery&quot;</span>][<span class="hljs-string">&quot;key_prefix&quot;</span>],<br><span class="hljs-string">&quot;socket_timeout&quot;</span>: <span class="hljs-number">5</span>,<br>&#125;,<br>worker_disable_rate_limits=<span class="hljs-literal">True</span>,<br>)<br><br><span class="hljs-meta">@celery_app.task</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">crawl</span>(<span class="hljs-params">keyword</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>        time.sleep(<span class="hljs-number">1</span>)<br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&quot;keyword&quot;</span>: keyword, <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;done&quot;</span>&#125;<br><br><br><br>logger.info(<span class="hljs-string">&quot;Celery initialized&quot;</span>)<br></code></pre></td></tr></table></figure><h1 id="supervisord"><a href="#supervisord" class="headerlink" title="supervisord"></a>supervisord</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs conf">[supervisord]<br>nodaemon=true<br>environment=APP_ENV=&quot;local&quot;,PYTHONPATH=&quot;.&quot;<br>logfile=logs/supervisord.log<br>pidfile=logs/supervisord.pid<br><br><br>[program:uvicorn]<br>command=uvicorn main:app --host 127.0.0.1 --port 8000<br>directory=.<br>autostart=true<br>autorestart=true<br>stdout_logfile=logs/uvicorn.out.log<br>stderr_logfile=logs/uvicorn.err.log<br><br><br>[program:celery]<br>command=celery -A tasks worker -l info<br>directory=.<br>autostart=true<br>autorestart=true<br>stdout_logfile=logs/celery.out.log<br>stderr_logfile=logs/celery.err.log<br></code></pre></td></tr></table></figure><h1 id="启动方式"><a href="#启动方式" class="headerlink" title="启动方式"></a>启动方式</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">supervisord -c supervisord.conf<br><span class="hljs-comment"># 切环境：</span><br>APP_ENV=qa supervisord -c supervisord.conf<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;目标：用最少的组件、最清晰的方式，把一个爬虫任务系统从本地跑起来，并能稳定部署。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;关键词：FastAPI &amp;#x2F; Celery &amp;#x2F; Redis &amp;#x2F; supervisord&lt;/p&gt;
</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>unidbg学习笔记</title>
    <link href="https://hybpjx.cn/2026/01/15/unidbg%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>https://hybpjx.cn/2026/01/15/unidbg%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2026-01-15T02:12:02.000Z</published>
    <updated>2026-01-15T02:54:27.048Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>均来自龙哥星球</p></blockquote><h1 id="tenet-Trace"><a href="#tenet-Trace" class="headerlink" title="tenet Trace"></a>tenet Trace</h1><p>龙哥星球学习到的。<br>unidbg 使用如下：<br>随便找个目录</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.tenet;<br><br><span class="hljs-keyword">import</span> com.github.unidbg.Emulator;<br><span class="hljs-keyword">import</span> com.github.unidbg.Module;<br><span class="hljs-keyword">import</span> com.github.unidbg.arm.backend.*;<br><span class="hljs-keyword">import</span> com.github.unidbg.arm.context.RegisterContext;<br><span class="hljs-keyword">import</span> unicorn.Arm64Const;<br><br><span class="hljs-keyword">import</span> java.io.PrintStream;<br><span class="hljs-keyword">import</span> java.util.Collections;<br><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.Map;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TenetTrace</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Emulator&lt;?&gt; emulator;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Module <span class="hljs-keyword">module</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RegisterContext registerContext;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">PrintStream</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> System.err;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">mRead</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">mWrite</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Map&lt;String, Integer&gt; arm64Regs;<br><br><br>    <span class="hljs-keyword">static</span> &#123;<br>        Map&lt;String,Integer&gt; aMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        aMap.put(<span class="hljs-string">&quot;X0&quot;</span>, Arm64Const.UC_ARM64_REG_X0);<br>        aMap.put(<span class="hljs-string">&quot;X1&quot;</span>, Arm64Const.UC_ARM64_REG_X1);<br>        aMap.put(<span class="hljs-string">&quot;X2&quot;</span>, Arm64Const.UC_ARM64_REG_X2);<br>        aMap.put(<span class="hljs-string">&quot;X3&quot;</span>, Arm64Const.UC_ARM64_REG_X3);<br>        aMap.put(<span class="hljs-string">&quot;X4&quot;</span>, Arm64Const.UC_ARM64_REG_X4);<br>        aMap.put(<span class="hljs-string">&quot;X5&quot;</span>, Arm64Const.UC_ARM64_REG_X5);<br>        aMap.put(<span class="hljs-string">&quot;X6&quot;</span>, Arm64Const.UC_ARM64_REG_X6);<br>        aMap.put(<span class="hljs-string">&quot;X7&quot;</span>, Arm64Const.UC_ARM64_REG_X7);<br>        aMap.put(<span class="hljs-string">&quot;X8&quot;</span>, Arm64Const.UC_ARM64_REG_X8);<br>        aMap.put(<span class="hljs-string">&quot;X9&quot;</span>, Arm64Const.UC_ARM64_REG_X9);<br>        aMap.put(<span class="hljs-string">&quot;X10&quot;</span>, Arm64Const.UC_ARM64_REG_X10);<br>        aMap.put(<span class="hljs-string">&quot;X11&quot;</span>, Arm64Const.UC_ARM64_REG_X11);<br>        aMap.put(<span class="hljs-string">&quot;X12&quot;</span>, Arm64Const.UC_ARM64_REG_X12);<br>        aMap.put(<span class="hljs-string">&quot;X13&quot;</span>, Arm64Const.UC_ARM64_REG_X13);<br>        aMap.put(<span class="hljs-string">&quot;X14&quot;</span>, Arm64Const.UC_ARM64_REG_X14);<br>        aMap.put(<span class="hljs-string">&quot;X15&quot;</span>, Arm64Const.UC_ARM64_REG_X15);<br>        aMap.put(<span class="hljs-string">&quot;X16&quot;</span>, Arm64Const.UC_ARM64_REG_X16);<br>        aMap.put(<span class="hljs-string">&quot;X17&quot;</span>, Arm64Const.UC_ARM64_REG_X17);<br>        aMap.put(<span class="hljs-string">&quot;X18&quot;</span>, Arm64Const.UC_ARM64_REG_X18);<br>        aMap.put(<span class="hljs-string">&quot;X19&quot;</span>, Arm64Const.UC_ARM64_REG_X19);<br>        aMap.put(<span class="hljs-string">&quot;X20&quot;</span>, Arm64Const.UC_ARM64_REG_X20);<br>        aMap.put(<span class="hljs-string">&quot;X21&quot;</span>, Arm64Const.UC_ARM64_REG_X21);<br>        aMap.put(<span class="hljs-string">&quot;X22&quot;</span>, Arm64Const.UC_ARM64_REG_X22);<br>        aMap.put(<span class="hljs-string">&quot;X23&quot;</span>, Arm64Const.UC_ARM64_REG_X23);<br>        aMap.put(<span class="hljs-string">&quot;X24&quot;</span>, Arm64Const.UC_ARM64_REG_X24);<br>        aMap.put(<span class="hljs-string">&quot;X25&quot;</span>, Arm64Const.UC_ARM64_REG_X25);<br>        aMap.put(<span class="hljs-string">&quot;X26&quot;</span>, Arm64Const.UC_ARM64_REG_X26);<br>        aMap.put(<span class="hljs-string">&quot;X27&quot;</span>, Arm64Const.UC_ARM64_REG_X27);<br>        aMap.put(<span class="hljs-string">&quot;X28&quot;</span>, Arm64Const.UC_ARM64_REG_X28);<br>        aMap.put(<span class="hljs-string">&quot;X29&quot;</span>, Arm64Const.UC_ARM64_REG_X29);<br>        aMap.put(<span class="hljs-string">&quot;X30&quot;</span>, Arm64Const.UC_ARM64_REG_X30);<br>        aMap.put(<span class="hljs-string">&quot;SP&quot;</span>, Arm64Const.UC_ARM64_REG_SP);<br>        arm64Regs = Collections.unmodifiableMap(aMap);<br>    &#125;<br>    <span class="hljs-keyword">public</span> Map&lt;String, Long&gt; preRegsValue = <span class="hljs-literal">null</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">TenetTrace</span><span class="hljs-params">(Emulator&lt;?&gt; emulator, Module <span class="hljs-keyword">module</span>, PrintStream redirect)</span>&#123;<br>        <span class="hljs-built_in">this</span>.emulator = emulator;<br>        <span class="hljs-built_in">this</span>.<span class="hljs-keyword">module</span> = <span class="hljs-keyword">module</span>;<br>        <span class="hljs-built_in">this</span>.registerContext = emulator.getContext();<br>        <span class="hljs-keyword">if</span> (redirect != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-built_in">this</span>.out = redirect;<br>        &#125;<br>        start();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> Map&lt;String, Long&gt; <span class="hljs-title function_">getAllRegister</span><span class="hljs-params">()</span>&#123;<br>        Map&lt;String, Long&gt; regs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span> (Map.Entry&lt;String, Integer&gt; entry : arm64Regs.entrySet()) &#123;<br>            regs.put(entry.getKey(), registerContext.getLongByReg(entry.getValue()));<br>        &#125;<br>        <span class="hljs-keyword">return</span> regs;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> Map&lt;String, Long&gt; <span class="hljs-title function_">getDiff</span><span class="hljs-params">(Map&lt;String, Long&gt; nowRegs, Map&lt;String, Long&gt; preRegs)</span>&#123;<br>        <span class="hljs-keyword">if</span>(preRegs == <span class="hljs-literal">null</span>)&#123;<br>            <span class="hljs-keyword">return</span> nowRegs;<br>        &#125;<br>        Map&lt;String, Long&gt; diffRegs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span> (Map.Entry&lt;String, Integer&gt; entry : arm64Regs.entrySet()) &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">regName</span> <span class="hljs-operator">=</span> entry.getKey();<br>            <span class="hljs-type">long</span> <span class="hljs-variable">now</span> <span class="hljs-operator">=</span> nowRegs.get(regName);<br>            <span class="hljs-type">long</span> <span class="hljs-variable">pre</span> <span class="hljs-operator">=</span> preRegs.get(regName);<br>            <span class="hljs-keyword">if</span>(now != pre)&#123;<br>                diffRegs.put(regName, now);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> diffRegs;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">showRegs</span><span class="hljs-params">(Map&lt;String, Long&gt; regs)</span>&#123;<br>        <span class="hljs-keyword">for</span> (Map.Entry&lt;String, Long&gt; entry : regs.entrySet()) &#123;<br>            out.printf(<span class="hljs-string">&quot;%s=%#X,&quot;</span>, entry.getKey(), entry.getValue());<br>        &#125;<br>        out.printf(<span class="hljs-string">&quot;PC=%#X&quot;</span>, registerContext.getPCPointer().peer);<br>    &#125;<br><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">start</span><span class="hljs-params">()</span>&#123;<br>        emulator.getBackend().hook_add_new(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CodeHook</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hook</span><span class="hljs-params">(Backend backend, <span class="hljs-type">long</span> address, <span class="hljs-type">int</span> size, Object user)</span> &#123;<br>                <span class="hljs-keyword">if</span>(preRegsValue!=<span class="hljs-literal">null</span>)&#123;<br>                    out.println(<span class="hljs-string">&quot;&quot;</span>);<br>                &#125;<br>                Map&lt;String, Long&gt; regs = getAllRegister();<br>                Map&lt;String, Long&gt; diffRegs = getDiff(regs, preRegsValue);<br>                showRegs(diffRegs);<br>                preRegsValue = regs;<br>                out.print(mRead);<br>                out.print(mWrite);<br>                mRead = <span class="hljs-string">&quot;&quot;</span>;<br>                mWrite= <span class="hljs-string">&quot;&quot;</span>;<br>            &#125;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onAttach</span><span class="hljs-params">(UnHook unHook)</span> &#123;<br><br>            &#125;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">detach</span><span class="hljs-params">()</span> &#123;<br><br>            &#125;<br>        &#125;, <span class="hljs-keyword">module</span>.base, <span class="hljs-keyword">module</span>.base+<span class="hljs-keyword">module</span>.size, <span class="hljs-literal">null</span>);<br><br><br>        emulator.getBackend().hook_add_new(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ReadHook</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hook</span><span class="hljs-params">(Backend backend, <span class="hljs-type">long</span> address, <span class="hljs-type">int</span> size, Object user)</span> &#123;<br>                <span class="hljs-type">byte</span>[] reads = emulator.getBackend().mem_read(address, size);<br>                <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> String.format(<span class="hljs-string">&quot;,mr=%#X:%s&quot;</span>, address, bytesToHex(reads));<br>                mRead += content;<br>            &#125;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onAttach</span><span class="hljs-params">(UnHook unHook)</span> &#123;<br><br>            &#125;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">detach</span><span class="hljs-params">()</span> &#123;<br><br>            &#125;<br>        &#125;, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-literal">null</span>);<br><br>        emulator.getBackend().hook_add_new(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WriteHook</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hook</span><span class="hljs-params">(Backend backend, <span class="hljs-type">long</span> address, <span class="hljs-type">int</span> size, <span class="hljs-type">long</span> value, Object user)</span> &#123;<br>                <span class="hljs-type">byte</span>[] writes = emulator.getBackend().mem_read(address, size);<br>                <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> String.format(<span class="hljs-string">&quot;,mw=%#X:%s&quot;</span>, address, bytesToHex(writes));<br>                mWrite += content;<br>            &#125;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onAttach</span><span class="hljs-params">(UnHook unHook)</span> &#123;<br><br>            &#125;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">detach</span><span class="hljs-params">()</span> &#123;<br><br>            &#125;<br>        &#125;, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-literal">null</span>);<br><br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">char</span>[] HEX_ARRAY = <span class="hljs-string">&quot;0123456789ABCDEF&quot;</span>.toCharArray();<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">bytesToHex</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] bytes)</span> &#123;<br>        <span class="hljs-type">char</span>[] hexChars = <span class="hljs-keyword">new</span> <span class="hljs-title class_">char</span>[bytes.length * <span class="hljs-number">2</span>];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; bytes.length; j++) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> bytes[j] &amp; <span class="hljs-number">0xFF</span>;<br>            hexChars[j * <span class="hljs-number">2</span>] = HEX_ARRAY[v &gt;&gt;&gt; <span class="hljs-number">4</span>];<br>            hexChars[j * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>] = HEX_ARRAY[v &amp; <span class="hljs-number">0x0F</span>];<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(hexChars);<br>    &#125;<br><br><br>&#125;<br><br></code></pre></td></tr></table></figure><p>使用</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// save path</span><br><span class="hljs-type">String</span> <span class="hljs-variable">traceFile</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;D:\\traces\\aikucun\\traceOasis.log&quot;</span>;<br><span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-type">PrintStream</span> <span class="hljs-variable">traceStream</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrintStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(traceFile), <span class="hljs-literal">true</span>);<br>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">TenetTrace</span>(emulator, <span class="hljs-keyword">module</span>, traceStream);<br>&#125; <span class="hljs-keyword">catch</span> (FileNotFoundException e) &#123;<br>    e.printStackTrace();<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="android-os-SystemProperties-get-Ljava-lang-String-Ljava-lang-String"><a href="#android-os-SystemProperties-get-Ljava-lang-String-Ljava-lang-String" class="headerlink" title="android&#x2F;os&#x2F;SystemProperties-&gt;get(Ljava&#x2F;lang&#x2F;String;)Ljava&#x2F;lang&#x2F;String;"></a>android&#x2F;os&#x2F;SystemProperties-&gt;get(Ljava&#x2F;lang&#x2F;String;)Ljava&#x2F;lang&#x2F;String;</h1><p>adb shell getprop 属性名 即可，比如 adb shell getprop ro.build.id</p><h1 id="Coffee的Unidbg笔记"><a href="#Coffee的Unidbg笔记" class="headerlink" title="Coffee的Unidbg笔记"></a>Coffee的Unidbg笔记</h1><h2 id="Context-如何构造"><a href="#Context-如何构造" class="headerlink" title="Context 如何构造"></a>Context 如何构造</h2><h3 id="方式一：直接-new-Context"><a href="#方式一：直接-new-Context" class="headerlink" title="方式一：直接 new Context"></a>方式一：直接 new Context</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">DvmObject&lt;?&gt; context = vm.resolveClass(<span class="hljs-string">&quot;android/content/Context&quot;</span>).newObject(<span class="hljs-literal">null</span>);<br></code></pre></td></tr></table></figure><h3 id="方式二：完整继承链构造（推荐）"><a href="#方式二：完整继承链构造（推荐）" class="headerlink" title="方式二：完整继承链构造（推荐）"></a>方式二：完整继承链构造（推荐）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">DvmClass</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> vm.resolveClass(<span class="hljs-string">&quot;android/content/Context&quot;</span>);<br><span class="hljs-type">DvmClass</span> <span class="hljs-variable">ContextWrapper</span> <span class="hljs-operator">=</span> vm.resolveClass(<span class="hljs-string">&quot;android/content/ContextWrapper&quot;</span>, context);<br><span class="hljs-type">DvmClass</span> <span class="hljs-variable">Application</span> <span class="hljs-operator">=</span> vm.resolveClass(<span class="hljs-string">&quot;android/app/Application&quot;</span>, ContextWrapper);<br><span class="hljs-keyword">return</span> Application.newObject(signature);<br></code></pre></td></tr></table></figure><h3 id="补-ActivityThread-getApplication-环境"><a href="#补-ActivityThread-getApplication-环境" class="headerlink" title="补 ActivityThread.getApplication 环境"></a>补 ActivityThread.getApplication 环境</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> DvmObject&lt;?&gt; callObjectMethodV(BaseVM vm, DvmObject&lt;?&gt; dvmObject, String signature, VaList vaList) &#123;<br>    <span class="hljs-keyword">switch</span> (signature) &#123;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;android/app/ActivityThread-&gt;getApplication()Landroid/app/Application;&quot;</span>: &#123;<br>            <span class="hljs-type">DvmClass</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> vm.resolveClass(<span class="hljs-string">&quot;android/content/Context&quot;</span>);<br>            <span class="hljs-type">DvmClass</span> <span class="hljs-variable">Application</span> <span class="hljs-operator">=</span> vm.resolveClass(<span class="hljs-string">&quot;android/app/Application&quot;</span>, context);<br>            <span class="hljs-keyword">return</span> Application.newObject(signature);<br>        &#125;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;android/content/Context-&gt;getContentResolver()Landroid/content/ContentResolver;&quot;</span>: &#123;<br>            <span class="hljs-keyword">return</span> vm.resolveClass(<span class="hljs-string">&quot;android/content/ContentResolver&quot;</span>).newObject(signature);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.callObjectMethodV(vm, dvmObject, signature, vaList);<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="字符串-字节数组-对象数组-实例对象参数传递"><a href="#字符串-字节数组-对象数组-实例对象参数传递" class="headerlink" title="字符串 &#x2F; 字节数组 &#x2F; 对象数组 &#x2F; 实例对象参数传递"></a>字符串 &#x2F; 字节数组 &#x2F; 对象数组 &#x2F; 实例对象参数传递</h2><blockquote><p><strong>注意</strong><br>JNI 里除了 8 种基本类型，其余对象都必须 <code>vm.addLocalObject()</code></p></blockquote><h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">list.add(vm.addLocalObject(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringObject</span>(vm, <span class="hljs-string">&quot;12345&quot;</span>)));<br>list.add(vm.addLocalObject(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringObject</span>(vm, <span class="hljs-string">&quot;r0ysue&quot;</span>)));<br></code></pre></td></tr></table></figure><h3 id="字节数组"><a href="#字节数组" class="headerlink" title="字节数组"></a>字节数组</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">ByteArray</span> <span class="hljs-variable">plainText</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArray</span>(vm, <span class="hljs-string">&quot;r0ysue&quot;</span>.getBytes(StandardCharsets.UTF_8));<br>list.add(vm.addLocalObject(plainText));<br></code></pre></td></tr></table></figure><h3 id="对象数组构造"><a href="#对象数组构造" class="headerlink" title="对象数组构造"></a>对象数组构造</h3><p>Native 方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">native</span> Object[] main(<span class="hljs-type">int</span> i, Object[] objarr);<br></code></pre></td></tr></table></figure><p>Java 侧：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">StringObject</span> <span class="hljs-variable">input2_1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringObject</span>(vm, <span class="hljs-string">&quot;9b69f861-e054-4bc4-9daf-d36ae205ed3e&quot;</span>);<br><span class="hljs-type">ByteArray</span> <span class="hljs-variable">input2_2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArray</span>(<br>        vm,<br>        <span class="hljs-string">&quot;GET /aggroup/homepage/display __r0ysue&quot;</span>.getBytes(StandardCharsets.UTF_8)<br>);<br><span class="hljs-type">DvmInteger</span> <span class="hljs-variable">input2_3</span> <span class="hljs-operator">=</span> DvmInteger.valueOf(vm, <span class="hljs-number">2</span>);<br><br>vm.addLocalObject(input2_1);<br>vm.addLocalObject(input2_2);<br>vm.addLocalObject(input2_3);<br><br>list.add(vm.addLocalObject(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayObject</span>(input2_1, input2_2, input2_3)));<br></code></pre></td></tr></table></figure><h3 id="实例对象参数不要偷懒传-0"><a href="#实例对象参数不要偷懒传-0" class="headerlink" title="实例对象参数不要偷懒传 0"></a>实例对象参数不要偷懒传 0</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">DvmClass</span> <span class="hljs-variable">cNative</span> <span class="hljs-operator">=</span> vm.resolveClass(<span class="hljs-string">&quot;com/roysue/test623/MainActivity&quot;</span>);<br>DvmObject&lt;?&gt; cnative = cNative.newObject(<span class="hljs-literal">null</span>);<br><br>list.add(vm.getJNIEnv());<br>list.add(cnative.hashCode());<br></code></pre></td></tr></table></figure><hr><h2 id="Thumb-模式调用注意事项"><a href="#Thumb-模式调用注意事项" class="headerlink" title="Thumb 模式调用注意事项"></a>Thumb 模式调用注意事项</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Number</span> <span class="hljs-variable">number</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">module</span>.callFunction(emulator, <span class="hljs-number">0x1E7C</span> + <span class="hljs-number">1</span>, list.toArray())[<span class="hljs-number">0</span>];<br></code></pre></td></tr></table></figure><blockquote><p>仅 <strong>调用 &#x2F; Hook</strong> 需要 <code>+1</code><br>Patch、下断点 <strong>不需要</strong></p></blockquote><hr><h2 id="Patch-方法"><a href="#Patch-方法" class="headerlink" title="Patch 方法"></a>Patch 方法</h2><h3 id="直接写-Opcode"><a href="#直接写-Opcode" class="headerlink" title="直接写 Opcode"></a>直接写 Opcode</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">int</span> <span class="hljs-variable">patchCode</span> <span class="hljs-operator">=</span> <span class="hljs-number">0x4FF00100</span>; <span class="hljs-comment">// mov r0,1</span><br>emulator.getMemory().pointer(<span class="hljs-keyword">module</span>.base + <span class="hljs-number">0x1E86</span>).setInt(<span class="hljs-number">0</span>, patchCode);<br></code></pre></td></tr></table></figure><h3 id="Keystone-汇编-Patch（推荐）"><a href="#Keystone-汇编-Patch（推荐）" class="headerlink" title="Keystone 汇编 Patch（推荐）"></a>Keystone 汇编 Patch（推荐）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Pointer</span> <span class="hljs-variable">pointer</span> <span class="hljs-operator">=</span> UnidbgPointer.pointer(emulator, <span class="hljs-keyword">module</span>.base + <span class="hljs-number">0x1E86</span>);<br><span class="hljs-type">byte</span>[] code = pointer.getByteArray(<span class="hljs-number">0</span>, <span class="hljs-number">4</span>);<br><br><span class="hljs-keyword">try</span> (<span class="hljs-type">Keystone</span> <span class="hljs-variable">keystone</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Keystone</span>(KeystoneArchitecture.Arm, KeystoneMode.ArmThumb)) &#123;<br>    <span class="hljs-type">KeystoneEncoded</span> <span class="hljs-variable">encoded</span> <span class="hljs-operator">=</span> keystone.assemble(<span class="hljs-string">&quot;mov r0,1&quot;</span>);<br>    pointer.write(<span class="hljs-number">0</span>, encoded.getMachineCode(), <span class="hljs-number">0</span>, <span class="hljs-number">4</span>);<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="Unidbg-Hook-示例"><a href="#Unidbg-Hook-示例" class="headerlink" title="Unidbg Hook 示例"></a>Unidbg Hook 示例</h2><h3 id="HookZz-wrap"><a href="#HookZz-wrap" class="headerlink" title="HookZz wrap"></a>HookZz wrap</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java">hookZz.wrap(<span class="hljs-keyword">module</span>.base + <span class="hljs-number">0x1BD0</span> + <span class="hljs-number">1</span>,<br>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">WrapCallback</span>&lt;HookZzArm32RegisterContext&gt;() &#123;<br><br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">preCall</span><span class="hljs-params">(...)</span> &#123;<br>            <span class="hljs-type">Pointer</span> <span class="hljs-variable">input</span> <span class="hljs-operator">=</span> ctx.getPointerArg(<span class="hljs-number">0</span>);<br>            System.out.println(input.getString(<span class="hljs-number">0</span>));<br>        &#125;<br><br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">postCall</span><span class="hljs-params">(...)</span> &#123;<br>            <span class="hljs-type">Pointer</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> ctx.getPointerArg(<span class="hljs-number">0</span>);<br>            System.out.println(result.getString(<span class="hljs-number">0</span>));<br>        &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><h3 id="Inline-Hook（instrument）"><a href="#Inline-Hook（instrument）" class="headerlink" title="Inline Hook（instrument）"></a>Inline Hook（instrument）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">hookZz.instrument(<span class="hljs-keyword">module</span>.base + <span class="hljs-number">0x315B0</span> + <span class="hljs-number">1</span>,<br>    (emulator, ctx, info) -&gt; &#123;<br>        System.out.println(<span class="hljs-string">&quot;R2=&quot;</span> + ctx.getR2Long());<br>&#125;);<br></code></pre></td></tr></table></figure><h3 id="Unicorn-CodeHook"><a href="#Unicorn-CodeHook" class="headerlink" title="Unicorn CodeHook"></a>Unicorn CodeHook</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java">emulator.getBackend().hook_add_new(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CodeHook</span>() &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hook</span><span class="hljs-params">(Backend backend, <span class="hljs-type">long</span> address, <span class="hljs-type">int</span> size, Object user)</span> &#123;<br>        <span class="hljs-keyword">if</span> (address == <span class="hljs-keyword">module</span>.base + <span class="hljs-number">0x9D24</span>) &#123;<br>            <span class="hljs-type">RegisterContext</span> <span class="hljs-variable">ctx</span> <span class="hljs-operator">=</span> emulator.getContext();<br>            System.out.println(ctx.getPointerArg(<span class="hljs-number">0</span>).getString(<span class="hljs-number">0</span>));<br>        &#125;<br>    &#125;<br>&#125;, <span class="hljs-keyword">module</span>.base + <span class="hljs-number">0x9D24</span>, <span class="hljs-keyword">module</span>.base + <span class="hljs-number">0x9D28</span>, <span class="hljs-literal">null</span>);<br></code></pre></td></tr></table></figure><hr><h2 id="so-加载与-init"><a href="#so-加载与-init" class="headerlink" title="so 加载与 init"></a>so 加载与 init</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">DalvikModule</span> <span class="hljs-variable">dm</span> <span class="hljs-operator">=</span> vm.loadLibrary(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;libnet_crypto.so&quot;</span>), <span class="hljs-literal">true</span>);<br></code></pre></td></tr></table></figure><blockquote><p><code>false</code> 会导致字符串未解密（init &#x2F; JNI_OnLoad 未执行）</p></blockquote><hr><h2 id="常见补环境示例"><a href="#常见补环境示例" class="headerlink" title="常见补环境示例"></a>常见补环境示例</h2><h3 id="getAppContext"><a href="#getAppContext" class="headerlink" title="getAppContext"></a>getAppContext</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">case</span> <span class="hljs-string">&quot;com/izuiyou/common/base/BaseApplication-&gt;getAppContext()Landroid/content/Context;&quot;</span>:<br>    <span class="hljs-keyword">return</span> vm.resolveClass(<span class="hljs-string">&quot;android/content/Context&quot;</span>).newObject(<span class="hljs-literal">null</span>);<br></code></pre></td></tr></table></figure><h3 id="Debug-检测"><a href="#Debug-检测" class="headerlink" title="Debug 检测"></a>Debug 检测</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">case</span> <span class="hljs-string">&quot;android/os/Debug-&gt;isDebuggerConnected()Z&quot;</span>:<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br></code></pre></td></tr></table></figure><h3 id="PID"><a href="#PID" class="headerlink" title="PID"></a>PID</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">case</span> <span class="hljs-string">&quot;android/os/Process-&gt;myPid()I&quot;</span>:<br>    <span class="hljs-keyword">return</span> emulator.getPid();<br></code></pre></td></tr></table></figure><h3 id="Map-get-isEmpty"><a href="#Map-get-isEmpty" class="headerlink" title="Map.get &#x2F; isEmpty"></a>Map.get &#x2F; isEmpty</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">TreeMap&lt;String, String&gt; map = (TreeMap&lt;String, String&gt;) dvmObject.getValue();<br><span class="hljs-keyword">return</span> map.get(key);<br></code></pre></td></tr></table></figure><h3 id="Throwable-初始化"><a href="#Throwable-初始化" class="headerlink" title="Throwable 初始化"></a>Throwable 初始化</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">case</span> <span class="hljs-string">&quot;java/lang/Throwable-&gt;&lt;init&gt;()V&quot;</span>:<br>    <span class="hljs-keyword">return</span> vm.resolveClass(<span class="hljs-string">&quot;java/lang/Throwable&quot;</span>).newObject(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Throwable</span>());<br></code></pre></td></tr></table></figure><hr><h2 id="内存-Hexdump（类似-Frida）"><a href="#内存-Hexdump（类似-Frida）" class="headerlink" title="内存 Hexdump（类似 Frida）"></a>内存 Hexdump（类似 Frida）</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">Inspector.inspect(ctx.getR0Pointer().getByteArray(<span class="hljs-number">0</span>, <span class="hljs-number">0x10</span>), <span class="hljs-string">&quot;Arg1&quot;</span>);<br>ctx.push(ctx.getR2Pointer());<br></code></pre></td></tr></table></figure><hr><h2 id="主动调用-Native-函数"><a href="#主动调用-Native-函数" class="headerlink" title="主动调用 Native 函数"></a>主动调用 Native 函数</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">MemoryBlock</span> <span class="hljs-variable">block</span> <span class="hljs-operator">=</span> emulator.getMemory().malloc(<span class="hljs-number">16</span>, <span class="hljs-literal">false</span>);<br><span class="hljs-type">UnidbgPointer</span> <span class="hljs-variable">ptr</span> <span class="hljs-operator">=</span> block.getPointer();<br>ptr.write(<span class="hljs-string">&quot;r0ysue&quot;</span>.getBytes());<br><br><span class="hljs-keyword">module</span>.callFunction(emulator, <span class="hljs-number">0x65540</span> + <span class="hljs-number">1</span>, ptr, <span class="hljs-number">6</span>, outPtr);<br></code></pre></td></tr></table></figure><hr><h2 id="断点与-Trace"><a href="#断点与-Trace" class="headerlink" title="断点与 Trace"></a>断点与 Trace</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">emulator.attach().addBreakPoint(<span class="hljs-keyword">module</span>.base + <span class="hljs-number">0x3161E</span>);<br>emulator.traceCode(<span class="hljs-keyword">module</span>.base, <span class="hljs-keyword">module</span>.base + <span class="hljs-keyword">module</span>.size);<br></code></pre></td></tr></table></figure><hr><h2 id="开启全部日志"><a href="#开启全部日志" class="headerlink" title="开启全部日志"></a>开启全部日志</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">Logger.getLogger(<span class="hljs-string">&quot;com.github.unidbg.AbstractEmulator&quot;</span>).setLevel(Level.DEBUG);<br></code></pre></td></tr></table></figure><hr><h2 id="注册-libAndroid-so"><a href="#注册-libAndroid-so" class="headerlink" title="注册 libAndroid.so"></a>注册 libAndroid.so</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">new</span> <span class="hljs-title class_">AndroidModule</span>(emulator, vm).register(memory);<br></code></pre></td></tr></table></figure><blockquote><p>必须在 <code>vm.loadLibrary</code> <strong>之前</strong></p></blockquote><hr><h2 id="Console-Debugger-常用命令"><a href="#Console-Debugger-常用命令" class="headerlink" title="Console Debugger 常用命令"></a>Console Debugger 常用命令</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">c / n / si / bt<br>trace / b(address) / p(asm) / m(address)<br></code></pre></td></tr></table></figure><hr><h2 id="JNI-Version-错误说明"><a href="#JNI-Version-错误说明" class="headerlink" title="JNI Version 错误说明"></a>JNI Version 错误说明</h2><blockquote><p>通常是 JNI_OnLoad 未完全执行<br>修完其他问题后再看</p></blockquote><hr><h2 id="固定-PID（可选）"><a href="#固定-PID（可选）" class="headerlink" title="固定 PID（可选）"></a>固定 PID（可选）</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-built_in">this</span>.pid = <span class="hljs-number">23638</span>;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;均来自龙哥星球&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;tenet-Trace&quot;&gt;&lt;a href=&quot;#tenet-Trace&quot; class=&quot;headerlink&quot; title=&quot;tenet Trace&quot;&gt;&lt;/a&gt;tenet Trace</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>unidbg随机数因子</title>
    <link href="https://hybpjx.cn/2026/01/14/unidbg%E9%9A%8F%E6%9C%BA%E6%95%B0%E5%9B%A0%E5%AD%90/"/>
    <id>https://hybpjx.cn/2026/01/14/unidbg%E9%9A%8F%E6%9C%BA%E6%95%B0%E5%9B%A0%E5%AD%90/</id>
    <published>2026-01-14T07:13:36.000Z</published>
    <updated>2026-01-22T02:26:57.254Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ARM64SyscallHandler"><a href="#ARM64SyscallHandler" class="headerlink" title="ARM64SyscallHandler"></a>ARM64SyscallHandler</h1><p>原始</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">CLOCK_REALTIME</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">CLOCK_MONOTONIC</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">CLOCK_THREAD_CPUTIME_ID</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">CLOCK_MONOTONIC_RAW</span> <span class="hljs-operator">=</span> <span class="hljs-number">4</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">CLOCK_MONOTONIC_COARSE</span> <span class="hljs-operator">=</span> <span class="hljs-number">6</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">CLOCK_BOOTTIME</span> <span class="hljs-operator">=</span> <span class="hljs-number">7</span>;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">nanoTime</span> <span class="hljs-operator">=</span> System.nanoTime();<br><br><span class="hljs-keyword">protected</span> <span class="hljs-type">int</span> <span class="hljs-title function_">clock_gettime</span><span class="hljs-params">(Emulator&lt;?&gt; emulator)</span> &#123;<br>    <span class="hljs-type">RegisterContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> emulator.getContext();<br>    <span class="hljs-type">int</span> <span class="hljs-variable">clk_id</span> <span class="hljs-operator">=</span> context.getIntArg(<span class="hljs-number">0</span>) &amp; <span class="hljs-number">0x7</span>;<br>    <span class="hljs-type">Pointer</span> <span class="hljs-variable">tp</span> <span class="hljs-operator">=</span> context.getPointerArg(<span class="hljs-number">1</span>);<br>    <span class="hljs-type">long</span> <span class="hljs-variable">offset</span> <span class="hljs-operator">=</span> clk_id == CLOCK_REALTIME ? currentTimeMillis() * <span class="hljs-number">1000000L</span> : System.nanoTime() - nanoTime;<br>    <span class="hljs-type">long</span> <span class="hljs-variable">tv_sec</span> <span class="hljs-operator">=</span> offset / <span class="hljs-number">1000000000L</span>;<br>    <span class="hljs-type">long</span> <span class="hljs-variable">tv_nsec</span> <span class="hljs-operator">=</span> offset % <span class="hljs-number">1000000000L</span>;<br>    <span class="hljs-keyword">if</span> (log.isDebugEnabled()) &#123;<br>        log.debug(<span class="hljs-string">&quot;clock_gettime clk_id=&#123;&#125;, tp=&#123;&#125;, offset=&#123;&#125;, tv_sec=&#123;&#125;, tv_nsec=&#123;&#125;&quot;</span>, clk_id, tp, offset, tv_sec, tv_nsec);<br>    &#125;<br>    <span class="hljs-keyword">switch</span> (clk_id) &#123;<br>        <span class="hljs-keyword">case</span> CLOCK_REALTIME:<br>        <span class="hljs-keyword">case</span> CLOCK_MONOTONIC:<br>        <span class="hljs-keyword">case</span> CLOCK_THREAD_CPUTIME_ID:<br>        <span class="hljs-keyword">case</span> CLOCK_MONOTONIC_RAW:<br>        <span class="hljs-keyword">case</span> CLOCK_MONOTONIC_COARSE:<br>        <span class="hljs-keyword">case</span> CLOCK_BOOTTIME:<br>            tp.setLong(<span class="hljs-number">0</span>, tv_sec);<br>            tp.setLong(<span class="hljs-number">8</span>, tv_nsec);<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (log.isDebugEnabled()) &#123;<br>        emulator.attach().debug();<br>        &#125;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnsupportedOperationException</span>(<span class="hljs-string">&quot;clk_id=&quot;</span> + clk_id);<br>    &#125;<br><br></code></pre></td></tr></table></figure><p>更改后</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs java"> <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">CLOCK_REALTIME</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">CLOCK_MONOTONIC</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">CLOCK_THREAD_CPUTIME_ID</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">CLOCK_MONOTONIC_RAW</span> <span class="hljs-operator">=</span> <span class="hljs-number">4</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">CLOCK_MONOTONIC_COARSE</span> <span class="hljs-operator">=</span> <span class="hljs-number">6</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">CLOCK_BOOTTIME</span> <span class="hljs-operator">=</span> <span class="hljs-number">7</span>;<br><br><span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">CLOCK_TIMES_0</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">CLOCK_TIMES_1</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">nanoTime</span> <span class="hljs-operator">=</span> System.nanoTime();<br><br>List&lt;Long&gt; list0 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Long&gt;() &#123;&#123;<br>    add(<span class="hljs-number">1765768512725878000L</span>);<br>    add(<span class="hljs-number">1765768512823353000L</span>);<br>    add(<span class="hljs-number">1765768512916020000L</span>);<br>    add(<span class="hljs-number">1765768513012195000L</span>);<br>    add(<span class="hljs-number">1765768513108126000L</span>);<br>&#125;&#125;;<br>List&lt;Long&gt; list1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Long&gt;() &#123;&#123;<br>    add(<span class="hljs-number">18136934846099106L</span>);<br>    add(<span class="hljs-number">18136934848744287L</span>);<br>    add(<span class="hljs-number">18136934849180744L</span>);<br>    add(<span class="hljs-number">18136934850204595L</span>);<br>    add(<span class="hljs-number">18136934850400232L</span>);<br>    add(<span class="hljs-number">18136934850362437L</span>);<br>    add(<span class="hljs-number">18136934850687493L</span>);<br>&#125;&#125;;<br><br><span class="hljs-keyword">protected</span> <span class="hljs-type">int</span> <span class="hljs-title function_">clock_gettime</span><span class="hljs-params">(Emulator&lt;?&gt; emulator)</span> &#123;<br>    <span class="hljs-type">RegisterContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> emulator.getContext();<br>    <span class="hljs-type">int</span> <span class="hljs-variable">clk_id</span> <span class="hljs-operator">=</span> context.getIntArg(<span class="hljs-number">0</span>) &amp; <span class="hljs-number">0x7</span>;<br>    <span class="hljs-type">Pointer</span> <span class="hljs-variable">tp</span> <span class="hljs-operator">=</span> context.getPointerArg(<span class="hljs-number">1</span>);<br>    <span class="hljs-type">long</span> <span class="hljs-variable">offset0</span> <span class="hljs-operator">=</span> clk_id == CLOCK_REALTIME ? currentTimeMillis() * <span class="hljs-number">1000000L</span> : System.nanoTime() - nanoTime;<br>    <span class="hljs-keyword">if</span> (clk_id == <span class="hljs-number">0</span>) &#123;<br>        CLOCK_TIMES_0 += <span class="hljs-number">1</span>;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (clk_id == <span class="hljs-number">1</span>) &#123;<br>        CLOCK_TIMES_1 += <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-type">long</span> offset;<br>    <span class="hljs-keyword">if</span> (CLOCK_TIMES_0 &lt;= <span class="hljs-number">5</span> &amp;&amp; clk_id == <span class="hljs-number">0</span>) &#123;<br>        offset = list0.get(CLOCK_TIMES_0 - <span class="hljs-number">1</span>);<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (CLOCK_TIMES_1 &lt;= <span class="hljs-number">10</span> &amp;&amp; clk_id == <span class="hljs-number">1</span>) &#123;<br>        offset = list1.get(CLOCK_TIMES_1 - <span class="hljs-number">1</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        offset = offset0;<br>    &#125;<br><br>    System.out.println(<span class="hljs-string">&quot;\n==========&gt; offset0= &quot;</span> + offset0 + <span class="hljs-string">&quot;==============\n&quot;</span>);<br><br>    <span class="hljs-type">long</span> <span class="hljs-variable">tv_sec</span> <span class="hljs-operator">=</span> offset / <span class="hljs-number">1000000000L</span>;<br>    <span class="hljs-type">long</span> <span class="hljs-variable">tv_nsec</span> <span class="hljs-operator">=</span> offset % <span class="hljs-number">1000000000L</span>;<br>    <span class="hljs-keyword">if</span> (log.isDebugEnabled()) &#123;<br>        log.debug(<span class="hljs-string">&quot;clock_gettime clk_id=&#123;&#125;, tp=&#123;&#125;, offset=&#123;&#125;, tv_sec=&#123;&#125;, tv_nsec=&#123;&#125;&quot;</span>, clk_id, tp, offset, tv_sec, tv_nsec);<br>    &#125;<br>    <span class="hljs-keyword">switch</span> (clk_id) &#123;<br>        <span class="hljs-keyword">case</span> CLOCK_REALTIME:<br>        <span class="hljs-keyword">case</span> CLOCK_MONOTONIC:<br>        <span class="hljs-keyword">case</span> CLOCK_THREAD_CPUTIME_ID:<br>        <span class="hljs-keyword">case</span> CLOCK_MONOTONIC_RAW:<br>        <span class="hljs-keyword">case</span> CLOCK_MONOTONIC_COARSE:<br>        <span class="hljs-keyword">case</span> CLOCK_BOOTTIME:<br>            tp.setLong(<span class="hljs-number">0</span>, tv_sec);<br>            tp.setLong(<span class="hljs-number">8</span>, tv_nsec);<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (log.isDebugEnabled()) &#123;<br>        emulator.attach().debug();<br>    &#125;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnsupportedOperationException</span>(<span class="hljs-string">&quot;clk_id=&quot;</span> + clk_id);<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="UnixSyscallHandler"><a href="#UnixSyscallHandler" class="headerlink" title="UnixSyscallHandler"></a>UnixSyscallHandler</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> <span class="hljs-type">long</span> <span class="hljs-title function_">currentTimeMillis</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-comment">//     return System.currentTimeMillis();</span><br>    System.out.println(<span class="hljs-string">&quot;固定时间戳:&quot;</span> + <span class="hljs-number">1700000000000L</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1700000000000L</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="RandomFileIO"><a href="#RandomFileIO" class="headerlink" title="RandomFileIO"></a>RandomFileIO</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.github.unidbg.linux.file;<br><br><span class="hljs-keyword">import</span> com.github.unidbg.Emulator;<br><span class="hljs-keyword">import</span> com.github.unidbg.arm.backend.Backend;<br><span class="hljs-keyword">import</span> com.github.unidbg.file.linux.IOConstants;<br><span class="hljs-keyword">import</span> com.sun.jna.Pointer;<br><br><span class="hljs-keyword">import</span> java.util.Arrays;<br><span class="hljs-keyword">import</span> java.util.concurrent.ThreadLocalRandom;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RandomFileIO</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">DriverFileIO</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RandomFileIO</span><span class="hljs-params">(Emulator&lt;?&gt; emulator, String path)</span> &#123;<br>        <span class="hljs-built_in">super</span>(emulator, IOConstants.O_RDONLY, path);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">toHex</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] bytes)</span> &#123;<br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">hexString</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">byte</span> b : bytes) &#123;<br>            hexString.append(String.format(<span class="hljs-string">&quot;%02x &quot;</span>, b));<br>        &#125;<br>        <span class="hljs-keyword">return</span> hexString.toString().trim();<br><br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">read</span><span class="hljs-params">(Backend backend, Pointer buffer, <span class="hljs-type">int</span> count)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">total</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">byte</span>[] buf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[Math.min(<span class="hljs-number">0x1000</span>, count)];<br>        randBytes(buf);<br>        System.out.println(<span class="hljs-string">&quot;固定随机数:&quot;</span> + toHex(buf));<br>        <span class="hljs-type">Pointer</span> <span class="hljs-variable">pointer</span> <span class="hljs-operator">=</span> buffer;<br>        <span class="hljs-keyword">while</span> (total &lt; count) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">read</span> <span class="hljs-operator">=</span> Math.min(buf.length, count - total);<br>            pointer.write(<span class="hljs-number">0</span>, buf, <span class="hljs-number">0</span>, read);<br>            total += read;<br>            pointer = pointer.share(read);<br>        &#125;<br>        <span class="hljs-keyword">return</span> total;<br><br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">byte</span>[] FIXED_RANDOM_BYTES = &#123;<br>            (<span class="hljs-type">byte</span>) <span class="hljs-number">0x12</span>, (<span class="hljs-type">byte</span>) <span class="hljs-number">0x34</span>, (<span class="hljs-type">byte</span>) <span class="hljs-number">0x56</span>, (<span class="hljs-type">byte</span>) <span class="hljs-number">0x78</span>,<br>            (<span class="hljs-type">byte</span>) <span class="hljs-number">0x9A</span>, (<span class="hljs-type">byte</span>) <span class="hljs-number">0xBC</span>, (<span class="hljs-type">byte</span>) <span class="hljs-number">0xDE</span>, (<span class="hljs-type">byte</span>) <span class="hljs-number">0xF0</span><br>    &#125;;<br><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">randBytes</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] bytes)</span> &#123;<br>        <span class="hljs-keyword">if</span> (bytes == <span class="hljs-literal">null</span> || bytes.length == <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; bytes.length; i++) &#123;<br>            bytes[i] = FIXED_RANDOM_BYTES[i % FIXED_RANDOM_BYTES.length];<br>        &#125;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ARM64SyscallHandler&quot;&gt;&lt;a href=&quot;#ARM64SyscallHandler&quot; class=&quot;headerlink&quot; title=&quot;ARM64SyscallHandler&quot;&gt;&lt;/a&gt;ARM64SyscallHandler&lt;/h1&gt;&lt;p&gt;原始</summary>
      
    
    
    
    
    <category term="unidbg" scheme="https://hybpjx.cn/tags/unidbg/"/>
    
  </entry>
  
  <entry>
    <title>MCP、dify、扣子、魔塔到底是什么？</title>
    <link href="https://hybpjx.cn/2025/12/25/%E4%BD%95%E4%B8%BA%E6%89%A3%E5%AD%90%E3%80%81dify%E3%80%81mcp/"/>
    <id>https://hybpjx.cn/2025/12/25/%E4%BD%95%E4%B8%BA%E6%89%A3%E5%AD%90%E3%80%81dify%E3%80%81mcp/</id>
    <published>2025-12-25T07:34:57.000Z</published>
    <updated>2026-01-13T04:30:02.741Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MCP-是什么？"><a href="#MCP-是什么？" class="headerlink" title="MCP 是什么？"></a><strong>MCP</strong> 是什么？</h2><h3 id="先一句话解释（最重要）"><a href="#先一句话解释（最重要）" class="headerlink" title="先一句话解释（最重要）"></a>先一句话解释（最重要）</h3><blockquote><p><strong>MCP &#x3D; 让 AI“会用你们公司系统 &#x2F; 数据 &#x2F; 接口”的一种标准方式</strong></p></blockquote><p>就像给 AI <strong>装插件、接外脑、连工具</strong>。</p><hr><h3 id="用一个生活比喻"><a href="#用一个生活比喻" class="headerlink" title="用一个生活比喻"></a>用一个生活比喻</h3><p>你可以把 AI（比如 ChatGPT）想成一个<strong>很聪明但被关在房间里的人</strong>：</p><ul><li>它会聊天、会写东西</li><li>❌ 但<strong>不知道你们公司的数据库</strong></li><li>❌ 不能直接查你们的系统</li><li>❌ 不能调用你们的接口</li></ul><p>👉 <strong>MCP 就是给它一部“公司内部电话 + 工具说明书”</strong></p><hr><h3 id="MCP-到底在干嘛（稍微技术一点）"><a href="#MCP-到底在干嘛（稍微技术一点）" class="headerlink" title="MCP 到底在干嘛（稍微技术一点）"></a>MCP 到底在干嘛（稍微技术一点）</h3><p><strong>MCP（Model Context Protocol）</strong> 是一种协议，用来：</p><ul><li><p>告诉 AI：</p><ul><li>👉 有哪些工具</li><li>👉 每个工具怎么用</li><li>👉 什么时候该用哪个工具</li></ul></li><li><p>AI 决定后</p><ul><li>👉 自动调用接口</li><li>👉 拿到结果</li><li>👉 再用自然语言回复人</li></ul></li></ul><p><strong>核心目标</strong>：</p><blockquote><p>❌ 不只是“聊天的 AI”<br>✅ 而是“能干活的 AI”</p></blockquote><hr><h3 id="“项目MCP”通常是什么意思？"><a href="#“项目MCP”通常是什么意思？" class="headerlink" title="“项目MCP”通常是什么意思？"></a>“项目MCP”通常是什么意思？</h3><p>结合真实工作场景，<strong>99% 不是让你发明协议</strong>，而是：</p><blockquote><p>👉 <strong>把你们的系统 &#x2F; 接口 &#x2F; 数据，接给 AI 用</strong></p></blockquote><p>常见任务包括：</p><ul><li><p>把某个接口包装成 MCP tool</p></li><li><p>让 AI 能：</p><ul><li>查数据</li><li>查订单</li><li>查用户信息</li><li>调内部 API</li></ul></li><li><p>写配置 &#x2F; 写描述，让 AI 知道：</p><ul><li>这个接口是干嘛的</li><li>参数怎么填</li><li>返回结果怎么看</li></ul></li></ul><p>📌 <strong>简单说：让 AI 会用你们的接口</strong></p><hr><h2 id="什么是-Dify？"><a href="#什么是-Dify？" class="headerlink" title="什么是 Dify？"></a>什么是 Dify？</h2><h3 id="一句话解释"><a href="#一句话解释" class="headerlink" title="一句话解释"></a>一句话解释</h3><blockquote><p><strong>Dify &#x3D; 一个“做 AI 应用的平台”，不用从零写代码</strong></p></blockquote><hr><h3 id="生活比喻"><a href="#生活比喻" class="headerlink" title="生活比喻"></a>生活比喻</h3><ul><li>MCP：插头 &#x2F; 插座标准</li><li>Dify：<strong>AI 应用“搭积木平台”</strong></li></ul><p>你可以在 Dify 里：</p><ul><li><p>接大模型（GPT、Claude、通义、百川等）</p></li><li><p>配提示词</p></li><li><p>接数据库 &#x2F; API</p></li><li><p>做：</p><ul><li>AI 客服</li><li>AI 助手</li><li>内部 AI 工具</li></ul></li></ul><hr><h3 id="Dify-和-MCP-的关系"><a href="#Dify-和-MCP-的关系" class="headerlink" title="Dify 和 MCP 的关系"></a>Dify 和 MCP 的关系</h3><p>✔ <strong>Dify 支持 MCP</strong></p><p>也就是说：</p><ul><li>MCP：<strong>能力标准</strong></li><li>Dify：<strong>落地平台</strong></li></ul><p>👉 很多公司是：<br><strong>用 Dify + MCP，把内部系统接给 AI</strong></p><hr><h2 id="什么是「扣子（Coze-扣子）」？"><a href="#什么是「扣子（Coze-扣子）」？" class="headerlink" title="什么是「扣子（Coze &#x2F; 扣子）」？"></a>什么是「扣子（Coze &#x2F; 扣子）」？</h2><h3 id="一句话解释-1"><a href="#一句话解释-1" class="headerlink" title="一句话解释"></a>一句话解释</h3><blockquote><p><strong>扣子 &#x3D; 字节跳动出的 AI 应用平台（偏产品&#x2F;业务）</strong></p></blockquote><hr><h3 id="Dify-的区别（超重要）"><a href="#Dify-的区别（超重要）" class="headerlink" title="Dify 的区别（超重要）"></a>Dify 的区别（超重要）</h3><table><thead><tr><th>对比</th><th>扣子</th><th>Dify</th></tr></thead><tbody><tr><td>公司</td><td>字节跳动</td><td>开源社区</td></tr><tr><td>上手</td><td>非常简单</td><td>稍微技术一点</td></tr><tr><td>定位</td><td>产品 &#x2F; 运营 &#x2F; 业务</td><td>技术 &#x2F; 企业</td></tr><tr><td>可控性</td><td>一般</td><td>很高</td></tr><tr><td>私有部署</td><td>❌</td><td>✅</td></tr></tbody></table><p>👉 <strong>扣子更像“AI 低代码工具”</strong><br>👉 <strong>Dify 更像“企业级 AI 平台”</strong></p><hr><h3 id="扣子适合谁？"><a href="#扣子适合谁？" class="headerlink" title="扣子适合谁？"></a>扣子适合谁？</h3><ul><li>产品经理</li><li>运营</li><li>不太写代码的人</li><li>快速做 Demo &#x2F; 机器人</li></ul><hr><h2 id="什么是-ModelScope（魔搭）？"><a href="#什么是-ModelScope（魔搭）？" class="headerlink" title="什么是 ModelScope（魔搭）？"></a>什么是 ModelScope（魔搭）？</h2><h3 id="一句话解释-2"><a href="#一句话解释-2" class="headerlink" title="一句话解释"></a>一句话解释</h3><blockquote><p><strong>ModelScope &#x3D; 阿里出的“AI 模型商店 + 工具箱”</strong></p></blockquote><hr><h3 id="它是干嘛的？"><a href="#它是干嘛的？" class="headerlink" title="它是干嘛的？"></a>它是干嘛的？</h3><p>你可以把它理解成：</p><blockquote><p><strong>AI 版的 GitHub + 应用市场</strong></p></blockquote><p>里面有：</p><ul><li><p>各种模型：</p><ul><li>NLP</li><li>语音</li><li>图像</li></ul></li><li><p>示例代码</p></li><li><p>数据集</p></li><li><p>推理服务</p></li></ul><hr><h3 id="ModelScope-和前面的关系"><a href="#ModelScope-和前面的关系" class="headerlink" title="ModelScope 和前面的关系"></a>ModelScope 和前面的关系</h3><ul><li>❌ 它不是做 AI 应用的</li><li>✅ 它是<strong>模型和技术资源平台</strong></li></ul><p>常见用途：</p><ul><li>技术选型</li><li>找国产模型</li><li>离线 &#x2F; 私有部署</li></ul><hr><h2 id="把这几个东西放一起，你就懂了"><a href="#把这几个东西放一起，你就懂了" class="headerlink" title="把这几个东西放一起，你就懂了"></a>把这几个东西放一起，你就懂了</h2><h3 id="一张“人话版”全景图"><a href="#一张“人话版”全景图" class="headerlink" title="一张“人话版”全景图"></a>一张“人话版”全景图</h3><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs nix">[ ModelScope ]<br>   ↑ 提供模型<br><br>[ 大模型（GPT <span class="hljs-symbol">/</span> 通义 <span class="hljs-symbol">/</span> 百川） ]<br>   ↑ 能力<br><br>[ MCP ]<br>   ↑ 让模型能用工具 <span class="hljs-symbol">/</span> 接口<br><br>[ Dify <span class="hljs-symbol">/</span> 扣子 ]<br>   ↑ 把能力做成应用<br><br>[ 你们公司的系统 <span class="hljs-symbol">/</span> 数据 <span class="hljs-symbol">/</span> API ]<br></code></pre></td></tr></table></figure><hr><h2 id="一句话总结"><a href="#一句话总结" class="headerlink" title="一句话总结"></a>一句话总结</h2><ul><li><strong>MCP</strong>：让 AI 会用工具</li><li><strong>Dify</strong>：做 AI 应用的平台</li><li><strong>扣子</strong>：更偏业务的 AI 搭建工具</li><li><strong>ModelScope</strong>：模型和技术资源库</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;MCP-是什么？&quot;&gt;&lt;a href=&quot;#MCP-是什么？&quot; class=&quot;headerlink&quot; title=&quot;MCP 是什么？&quot;&gt;&lt;/a&gt;&lt;strong&gt;MCP&lt;/strong&gt; 是什么？&lt;/h2&gt;&lt;h3 id=&quot;先一句话解释（最重要）&quot;&gt;&lt;a href=&quot;#先</summary>
      
    
    
    
    <category term="杂记" scheme="https://hybpjx.cn/categories/%E6%9D%82%E8%AE%B0/"/>
    
    
  </entry>
  
  <entry>
    <title>jtype+unidbg</title>
    <link href="https://hybpjx.cn/2025/12/11/jtype-unidbg/"/>
    <id>https://hybpjx.cn/2025/12/11/jtype-unidbg/</id>
    <published>2025-12-11T03:34:57.000Z</published>
    <updated>2026-01-13T04:24:07.331Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Jtype-unidbg打包调用"><a href="#Jtype-unidbg打包调用" class="headerlink" title="Jtype &amp;&amp; unidbg打包调用"></a>Jtype &amp;&amp; unidbg打包调用</h1><p>点击文件 ——&gt; 项目结构</p><p><img src="https://s2.loli.net/2025/08/14/peKEB8Y2AsLDgxP.png"></p><p>共件 ——&gt; 添加</p><p><img src="https://s2.loli.net/2025/08/14/QxFp8CvVsRrfUgJ.png"></p><p>然后选择带有依赖的模块</p><p><img src="https://s2.loli.net/2025/08/14/1QLolnMOCh8EK5c.png"></p><p>类似于下文点击</p><p><img src="https://s2.loli.net/2025/08/14/BFOEogXbsVJiezt.png"></p><p>修改包名</p><p><img src="https://s2.loli.net/2025/08/14/uMmvzZQ2l7NrKGB.png"></p><p>然后点击构建工件</p><p><img src="https://s2.loli.net/2025/08/14/PntmgDdyLpeZlqz.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Jtype-unidbg打包调用&quot;&gt;&lt;a href=&quot;#Jtype-unidbg打包调用&quot; class=&quot;headerlink&quot; title=&quot;Jtype &amp;amp;&amp;amp; unidbg打包调用&quot;&gt;&lt;/a&gt;Jtype &amp;amp;&amp;amp; unidbg打包调用</summary>
      
    
    
    
    <category term="安卓逆向基础" scheme="https://hybpjx.cn/categories/%E5%AE%89%E5%8D%93%E9%80%86%E5%90%91%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="unidbg" scheme="https://hybpjx.cn/tags/unidbg/"/>
    
  </entry>
  
  <entry>
    <title>pip与requirements.txt</title>
    <link href="https://hybpjx.cn/2025/11/21/pip%E4%B8%8Erequirements-txt/"/>
    <id>https://hybpjx.cn/2025/11/21/pip%E4%B8%8Erequirements-txt/</id>
    <published>2025-11-21T07:08:45.000Z</published>
    <updated>2025-11-21T07:17:36.929Z</updated>
    
    <content type="html"><![CDATA[<h1 id="导出全部已安装包"><a href="#导出全部已安装包" class="headerlink" title="导出全部已安装包"></a>导出全部已安装包</h1><p>使用pip freeze命令可快速导出当前Python环境中所有已安装的包及其版本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip freeze &gt; requirements.txt<br></code></pre></td></tr></table></figure><h1 id="导出格式化的requirements-txt"><a href="#导出格式化的requirements-txt" class="headerlink" title="导出格式化的requirements.txt"></a>导出格式化的requirements.txt</h1><p>为了使requirements.txt文件更易于阅读，可以使用以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip freeze | grep -v <span class="hljs-string">&#x27;^-e&#x27;</span> &gt; requirements.txt<br></code></pre></td></tr></table></figure><h1 id="导出非本地开发包"><a href="#导出非本地开发包" class="headerlink" title="导出非本地开发包"></a>导出非本地开发包</h1><p>通过grep过滤掉非标准包（如本地开发包）：</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">pip <span class="hljs-keyword">freeze</span> | grep -v &quot; @ &quot; &gt; requirements.txt<br><br>pip list <span class="hljs-comment">--format=freeze | grep -v &#x27;pkg-resources==0.0.0&#x27; &gt; requirements.txt</span><br><br><br></code></pre></td></tr></table></figure><p>这条命令会过滤掉任何以’-e’开头的行（通常是本地开发路径），只保留实际的包和版本信息。</p><h1 id="安装全部包"><a href="#安装全部包" class="headerlink" title="安装全部包"></a>安装全部包</h1><p>使用pip install命令可快速安装requirements.txt文件中列出的所有包及其版本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install -r requirements.txt<br></code></pre></td></tr></table></figure><h1 id="更新单个包"><a href="#更新单个包" class="headerlink" title="更新单个包"></a>更新单个包</h1><p>如果要更新单个包，可以使用以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install --upgrade &lt;package_name&gt;<br></code></pre></td></tr></table></figure><p>例如，要更新Django到最新版本，可以运行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install --upgrade Django<br></code></pre></td></tr></table></figure><h1 id="导出特定包的版本"><a href="#导出特定包的版本" class="headerlink" title="导出特定包的版本"></a>导出特定包的版本</h1><p>如果你只想导出某个特定的包及其版本，可以先安装该包，然后使用pip freeze命令。例如，先安装Flask，再执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip install Flask<br>pip freeze | grep flask &gt; requirements.txt<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;导出全部已安装包&quot;&gt;&lt;a href=&quot;#导出全部已安装包&quot; class=&quot;headerlink&quot; title=&quot;导出全部已安装包&quot;&gt;&lt;/a&gt;导出全部已安装包&lt;/h1&gt;&lt;p&gt;使用pip freeze命令可快速导出当前Python环境中所有已安装的包及其版本：&lt;/p&gt;</summary>
      
    
    
    
    <category term="快速安装" scheme="https://hybpjx.cn/categories/%E5%BF%AB%E9%80%9F%E5%AE%89%E8%A3%85/"/>
    
    
    <category term="python" scheme="https://hybpjx.cn/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>Golang高并发</title>
    <link href="https://hybpjx.cn/2025/11/05/Golang%E9%AB%98%E5%B9%B6%E5%8F%91/"/>
    <id>https://hybpjx.cn/2025/11/05/Golang%E9%AB%98%E5%B9%B6%E5%8F%91/</id>
    <published>2025-11-05T09:03:51.000Z</published>
    <updated>2026-01-13T04:23:40.049Z</updated>
    
    <content type="html"><![CDATA[<h1 id="并发基础"><a href="#并发基础" class="headerlink" title="并发基础"></a>并发基础</h1><p>你电脑只有 1 颗 CPU，也能同时开 20 个浏览器页面，对吧？<br>其实不是同时做，而是：</p><p>CPU 速度非常快<br>它切换任务 → 我们看起来像同时做</p><p>Go 的并发，也是同一个思想：<br>创建很多“小任务”，轮流执行，看起来像是一起执行的。</p><h2 id="Go-func是什么？"><a href="#Go-func是什么？" class="headerlink" title="Go func是什么？"></a>Go func是什么？</h2><p>某个函数执行</p><blockquote><p>result :&#x3D; doTask(url)<br>👉 会阻塞：一条没做完，下一条不能做</p></blockquote><p>Go 的核心 加上 </p><blockquote><p>go doTask(url)</p></blockquote><p><strong>这叫 启动一个协程（goroutine）</strong><br><strong>它会后台运行，不等它执行完</strong><br><strong>主程序继续往下走</strong></p><h2 id="最基础的版本"><a href="#最基础的版本" class="headerlink" title="最基础的版本"></a>最基础的版本</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br> <span class="hljs-string">&quot;fmt&quot;</span><br> <span class="hljs-string">&quot;net/http&quot;</span><br> <span class="hljs-string">&quot;sync&quot;</span><br> <span class="hljs-string">&quot;time&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><br> client := &amp;http.Client&#123;Timeout: <span class="hljs-number">2</span> * time.Second&#125;<br><br> urls := []<span class="hljs-type">string</span>&#123;<br>  <span class="hljs-string">&quot;https://www.baidu.com&quot;</span>,<br>  <span class="hljs-string">&quot;https://www.qq.com&quot;</span>,<br>  <span class="hljs-string">&quot;https://www.bilibili.com&quot;</span>,<br> &#125;<br><br> <span class="hljs-keyword">var</span> wg sync.WaitGroup<br> wg.Add(<span class="hljs-built_in">len</span>(urls))<br><br> start := time.Now()<br><br> <span class="hljs-keyword">for</span> _, u := <span class="hljs-keyword">range</span> urls &#123;<br>  <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(link <span class="hljs-type">string</span>)</span></span> &#123;<br>   <span class="hljs-keyword">defer</span> wg.Done()<br><br>   resp, err := client.Get(link)<br>   <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>    fmt.Println(<span class="hljs-string">&quot;请求失败:&quot;</span>, link)<br>    <span class="hljs-keyword">return</span><br>   &#125;<br>   resp.Body.Close()<br>   fmt.Println(<span class="hljs-string">&quot;完成:&quot;</span>, link)<br>  &#125;(u)<br> &#125;<br> wg.Wait()<br><br> fmt.Printf(<span class="hljs-string">&quot;全部完成！耗时：%v\n&quot;</span>, time.Since(start))<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="并发控制？"><a href="#并发控制？" class="headerlink" title="并发控制？"></a>并发控制？</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br> <span class="hljs-string">&quot;fmt&quot;</span><br> <span class="hljs-string">&quot;net/http&quot;</span><br> <span class="hljs-string">&quot;sync&quot;</span><br> <span class="hljs-string">&quot;time&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><br> urls := []<span class="hljs-type">string</span>&#123;&#125;<br> <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++ &#123;<br>  urls = <span class="hljs-built_in">append</span>(urls, <span class="hljs-string">&quot;https://www.baidu.com&quot;</span>)<br> &#125;<br><br> client := &amp;http.Client&#123;Timeout: <span class="hljs-number">2</span> * time.Second&#125;<br><br> <span class="hljs-comment">// 限制并发为 20</span><br> limit := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>&#123;&#125;, <span class="hljs-number">20</span>)<br><br> <span class="hljs-keyword">var</span> wg sync.WaitGroup<br> begin := time.Now()<br><br> <span class="hljs-keyword">for</span> _, u := <span class="hljs-keyword">range</span> urls &#123;<br>  wg.Add(<span class="hljs-number">1</span>)<br><br>  limit &lt;- <span class="hljs-keyword">struct</span>&#123;&#125;&#123;&#125; <span class="hljs-comment">// 占一个坑（如果满了就阻塞）</span><br><br>  <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(link <span class="hljs-type">string</span>)</span></span> &#123;<br>   <span class="hljs-keyword">defer</span> wg.Done()<br>   <span class="hljs-keyword">defer</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123; &lt;-limit &#125;() <span class="hljs-comment">// 用完释放一个坑</span><br>   resp, err := client.Get(link)<br>   <span class="hljs-keyword">if</span> err == <span class="hljs-literal">nil</span> &#123;<br>    resp.Body.Close()<br>   &#125;<br><br>   fmt.Println(<span class="hljs-string">&quot;完成:&quot;</span>, link)<br>  &#125;(u)<br> &#125;<br><br> wg.Wait()<br> fmt.Println(<span class="hljs-string">&quot;全部完成，用时:&quot;</span>, time.Since(begin))<br>&#125;<br><br></code></pre></td></tr></table></figure><h1 id="高并发核心"><a href="#高并发核心" class="headerlink" title="高并发核心"></a>高并发核心</h1><p>认识这个库</p><blockquote><p>github.com&#x2F;panjf2000&#x2F;ants&#x2F;v2</p></blockquote><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs haxe"><span class="hljs-keyword">var</span> pool, <span class="hljs-literal">_</span> = ants.NewPool(<span class="hljs-number">10</span>)<br></code></pre></td></tr></table></figure><h2 id="什么意思"><a href="#什么意思" class="headerlink" title="什么意思"></a>什么意思</h2><p>创建了 <strong>10个</strong>协程池，可以同时执行10个任务。</p><h2 id="为什么不用go-func-的形式"><a href="#为什么不用go-func-的形式" class="headerlink" title="为什么不用go func() 的形式"></a>为什么不用go func() 的形式</h2><table><thead><tr><th>方式</th><th>问题</th><th>适用于谁</th></tr></thead><tbody><tr><td>直接 <code>go func()</code></td><td>协程数量无上限 → 内存爆炸 → 拥塞</td><td>小量任务</td></tr><tr><td>make(chan) + go routine 自己控制</td><td>代码量大，容易踩坑</td><td>熟练工程师</td></tr><tr><td><strong>ants.Pool</strong> ✅</td><td>自动回收调度、限制并发、复用 goroutine</td><td>最佳方案</td></tr></tbody></table><h2 id="简易使用"><a href="#简易使用" class="headerlink" title="简易使用"></a>简易使用</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br> <span class="hljs-string">&quot;fmt&quot;</span><br> <span class="hljs-string">&quot;time&quot;</span><br><br> <span class="hljs-string">&quot;github.com/panjf2000/ants/v2&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><br> <span class="hljs-comment">// 最大并发数：20</span><br> pool, _ := ants.NewPool(<span class="hljs-number">20</span>)<br> <span class="hljs-keyword">defer</span> pool.Release()<br><br> start := time.Now()<br><br> <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++ &#123;<br>  num := i<br>  pool.Submit(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;<br>   time.Sleep(<span class="hljs-number">100</span> * time.Millisecond) <span class="hljs-comment">// 模拟任务</span><br>   fmt.Println(<span class="hljs-string">&quot;完成任务:&quot;</span>, num)<br>  &#125;)<br> &#125;<br><br> <span class="hljs-comment">// 等所有任务做完</span><br> pool.Release() <span class="hljs-comment">// 关闭池子并等待任务完成</span><br><br> fmt.Println(<span class="hljs-string">&quot;耗时:&quot;</span>, time.Since(start))<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="进阶"><a href="#进阶" class="headerlink" title="进阶"></a>进阶</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br> <span class="hljs-string">&quot;fmt&quot;</span><br> <span class="hljs-string">&quot;net/http&quot;</span><br> <span class="hljs-string">&quot;time&quot;</span><br><br> <span class="hljs-string">&quot;github.com/panjf2000/ants/v2&quot;</span><br>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><br> urls := []<span class="hljs-type">string</span>&#123;&#125;<br> <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++ &#123;<br>  urls = <span class="hljs-built_in">append</span>(urls, <span class="hljs-string">&quot;https://www.baidu.com&quot;</span>)<br> &#125;<br><br> client := &amp;http.Client&#123;Timeout: <span class="hljs-number">2</span> * time.Second&#125;<br><br> pool, _ := ants.NewPool(<span class="hljs-number">20</span>)<br> <span class="hljs-keyword">defer</span> pool.Release()<br><br> begin := time.Now()<br><br> <span class="hljs-keyword">for</span> _, u := <span class="hljs-keyword">range</span> urls &#123;<br>  link := u<br>  pool.Submit(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;<br>   resp, err := client.Get(link)<br>   <span class="hljs-keyword">if</span> err == <span class="hljs-literal">nil</span> &#123;<br>    resp.Body.Close()<br>   &#125;<br>   fmt.Println(<span class="hljs-string">&quot;✅ 完成:&quot;</span>, link)<br>  &#125;)<br> &#125;<br><br> pool.Release() <span class="hljs-comment">// 等任务全部结束</span><br> fmt.Println(<span class="hljs-string">&quot;总耗时:&quot;</span>, time.Since(begin))<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="如何return"><a href="#如何return" class="headerlink" title="如何return"></a>如何return</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs go"><br><span class="hljs-keyword">package</span> main<br><br><span class="hljs-keyword">import</span> (<br> <span class="hljs-string">&quot;fmt&quot;</span><br> <span class="hljs-string">&quot;net/http&quot;</span><br> <span class="hljs-string">&quot;sync&quot;</span><br> <span class="hljs-string">&quot;time&quot;</span><br><br> <span class="hljs-string">&quot;github.com/panjf2000/ants/v2&quot;</span><br>)<br><br><span class="hljs-keyword">type</span> Result <span class="hljs-keyword">struct</span> &#123;<br> Url  <span class="hljs-type">string</span><br> Ok   <span class="hljs-type">bool</span><br> Cost time.Duration<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><br> urls := []<span class="hljs-type">string</span>&#123;<br>  <span class="hljs-string">&quot;https://www.baidu.com&quot;</span>,<br>  <span class="hljs-string">&quot;https://www.google.com&quot;</span>,<br>  <span class="hljs-string">&quot;https://www.bilibili.com&quot;</span>,<br>  <span class="hljs-string">&quot;https://www.qq.com&quot;</span>,<br> &#125;<br><br> client := &amp;http.Client&#123;Timeout: <span class="hljs-number">2</span> * time.Second&#125;<br><br> results := <span class="hljs-built_in">make</span>([]Result, <span class="hljs-built_in">len</span>(urls))<br> <span class="hljs-keyword">var</span> wg sync.WaitGroup<br> wg.Add(<span class="hljs-built_in">len</span>(urls))<br><br> pool, _ := ants.NewPool(<span class="hljs-number">20</span>)<br> <span class="hljs-keyword">defer</span> pool.Release()<br><br> <span class="hljs-keyword">for</span> i, u := <span class="hljs-keyword">range</span> urls &#123;<br><br>  idx := i<br>  urlCopy := u<br><br>  pool.Submit(<span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> &#123;<br>   <span class="hljs-keyword">defer</span> wg.Done()<br><br>   t := time.Now()<br>   resp, err := client.Get(urlCopy)<br>   ok := <span class="hljs-literal">false</span><br>   <span class="hljs-keyword">if</span> err == <span class="hljs-literal">nil</span> &#123;<br>    resp.Body.Close()<br>    ok = <span class="hljs-literal">true</span><br>   &#125;<br><br>   results[idx] = Result&#123;<br>    Url:  urlCopy,<br>    Ok:   ok,<br>    Cost: time.Since(t),<br>   &#125;<br>  &#125;)<br> &#125;<br><br> wg.Wait() <span class="hljs-comment">// 等全部完成</span><br><br> fmt.Println(<span class="hljs-string">&quot;执行结果↓&quot;</span>)<br><br> <span class="hljs-keyword">for</span> _, r := <span class="hljs-keyword">range</span> results &#123;<br>  fmt.Println(r)<br> &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;并发基础&quot;&gt;&lt;a href=&quot;#并发基础&quot; class=&quot;headerlink&quot; title=&quot;并发基础&quot;&gt;&lt;/a&gt;并发基础&lt;/h1&gt;&lt;p&gt;你电脑只有 1 颗 CPU，也能同时开 20 个浏览器页面，对吧？&lt;br&gt;其实不是同时做，而是：&lt;/p&gt;
&lt;p&gt;CPU 速度</summary>
      
    
    
    
    
    <category term="Golang" scheme="https://hybpjx.cn/tags/Golang/"/>
    
  </entry>
  
  <entry>
    <title>xapk转apk</title>
    <link href="https://hybpjx.cn/2025/11/04/xapk%E8%BD%ACapk/"/>
    <id>https://hybpjx.cn/2025/11/04/xapk%E8%BD%ACapk/</id>
    <published>2025-11-04T02:41:01.000Z</published>
    <updated>2026-01-13T04:24:07.331Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> zipfile<br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> shutil<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">import</span> subprocess<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">unzip_file</span>(<span class="hljs-params">src, dst</span>):<br>    <span class="hljs-keyword">with</span> zipfile.ZipFile(src, <span class="hljs-string">&#x27;r&#x27;</span>) <span class="hljs-keyword">as</span> z:<br>        z.extractall(dst)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">find_files</span>(<span class="hljs-params">base, ext</span>):<br>    result = []<br>    <span class="hljs-keyword">for</span> root, _, files <span class="hljs-keyword">in</span> os.walk(base):<br>        <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> files:<br>            <span class="hljs-keyword">if</span> f.endswith(ext):<br>                result.append(os.path.join(root, f))<br>    <span class="hljs-keyword">return</span> result<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">copy_files</span>(<span class="hljs-params">files, dst</span>):<br>    os.makedirs(dst, exist_ok=<span class="hljs-literal">True</span>)<br>    <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> files:<br>        shutil.copy(f, dst)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">copy_obb</span>(<span class="hljs-params">base, dst</span>):<br>    <span class="hljs-keyword">for</span> root, dirs, _ <span class="hljs-keyword">in</span> os.walk(base):<br>        <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> dirs:<br>            <span class="hljs-keyword">if</span> d == <span class="hljs-string">&#x27;obb&#x27;</span>:<br>                shutil.copytree(os.path.join(root, d), os.path.join(dst, d), dirs_exist_ok=<span class="hljs-literal">True</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">adb_install_multiple</span>(<span class="hljs-params">apk_dir</span>):<br>    apk_list = <span class="hljs-built_in">sorted</span>(find_files(apk_dir, <span class="hljs-string">&#x27;.apk&#x27;</span>))<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> apk_list:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;no apk files to install&#x27;</span>)<br>        <span class="hljs-keyword">return</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;installing via adb...&#x27;</span>)<br>    cmd = [<span class="hljs-string">&#x27;adb&#x27;</span>, <span class="hljs-string">&#x27;install-multiple&#x27;</span>] + apk_list<br>    <span class="hljs-keyword">try</span>:<br>        subprocess.run(cmd, check=<span class="hljs-literal">True</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;install success&#x27;</span>)<br>    <span class="hljs-keyword">except</span> subprocess.CalledProcessError:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;install failed&#x27;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">convert_xapk</span>(<span class="hljs-params">xapk_path, output_dir=<span class="hljs-literal">None</span>, auto_install=<span class="hljs-literal">False</span></span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(xapk_path):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;file not found&#x27;</span>)<br>        <span class="hljs-keyword">return</span><br>    <span class="hljs-keyword">if</span> output_dir <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>        output_dir = os.path.splitext(xapk_path)[<span class="hljs-number">0</span>]<br>    os.makedirs(output_dir, exist_ok=<span class="hljs-literal">True</span>)<br><br>    unzip_file(xapk_path, output_dir)<br>    apk_dir = os.path.join(output_dir, <span class="hljs-string">&#x27;apk&#x27;</span>)<br>    obb_dir = os.path.join(output_dir, <span class="hljs-string">&#x27;obb&#x27;</span>)<br><br>    apk_files = find_files(output_dir, <span class="hljs-string">&#x27;.apk&#x27;</span>)<br>    <span class="hljs-keyword">if</span> apk_files:<br>        copy_files(apk_files, apk_dir)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;apk extracted&#x27;</span>)<br><br>    copy_obb(output_dir, obb_dir)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;obb extracted&#x27;</span>)<br><br>    <span class="hljs-keyword">if</span> auto_install:<br>        adb_install_multiple(apk_dir)<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;done:&#x27;</span>, output_dir)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(sys.argv) &lt; <span class="hljs-number">2</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;usage: python xapk_to_apk.py app.xapk [output_dir] [--install]&#x27;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        xapk = sys.argv[<span class="hljs-number">1</span>]<br>        out = sys.argv[<span class="hljs-number">2</span>] <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(sys.argv) &gt; <span class="hljs-number">2</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> sys.argv[<span class="hljs-number">2</span>].startswith(<span class="hljs-string">&#x27;--&#x27;</span>) <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span><br>        install_flag = <span class="hljs-string">&#x27;--install&#x27;</span> <span class="hljs-keyword">in</span> sys.argv<br>        convert_xapk(xapk, out, install_flag)<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span clas</summary>
      
    
    
    
    <category term="杂记" scheme="https://hybpjx.cn/categories/%E6%9D%82%E8%AE%B0/"/>
    
    
  </entry>
  
  <entry>
    <title>某度点选VMP逆向分析</title>
    <link href="https://hybpjx.cn/2025/10/28/%E6%9F%90%E5%BA%A6%E7%82%B9%E9%80%89VMP%E9%80%86%E5%90%91%E5%88%86%E6%9E%90/"/>
    <id>https://hybpjx.cn/2025/10/28/%E6%9F%90%E5%BA%A6%E7%82%B9%E9%80%89VMP%E9%80%86%E5%90%91%E5%88%86%E6%9E%90/</id>
    <published>2025-10-28T08:47:47.000Z</published>
    <updated>2026-01-13T04:29:16.479Z</updated>
    
    <content type="html"><![CDATA[<h1 id="底图解密"><a href="#底图解密" class="headerlink" title="底图解密"></a>底图解密</h1><p>由于底图是乱序的。所以要先找到还原位置。</p><p>这里直接看插装日志</p><p>具体如何实现看一眼日志就知道了</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">this</span>.<span class="hljs-property">q</span>.<span class="hljs-title function_">A</span>(<span class="hljs-string">&quot;arguments&quot;</span>, n || []); ; )<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2025/10/24/JPNL23snAEOa7gy.png"></p><h1 id="C-函数解密"><a href="#C-函数解密" class="headerlink" title="C 函数解密"></a>C 函数解密</h1><p>如下图</p><p><img src="https://s2.loli.net/2025/10/24/DY7Qr5HZPCTv2oM.png"></p><p><img src="https://s2.loli.net/2025/10/29/LKlhSJFIonYvZrj.png"></p><p>断点定位</p><p><img src="https://s2.loli.net/2025/10/24/pQbC9se65lwMTXk.png"></p><p>继续</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs javascript">t.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">get</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>) &#123;<br>                <span class="hljs-keyword">var</span> e = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">g</span>(t);<br>                <span class="hljs-keyword">return</span> e || (e = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">p</span>(t),<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">m</span>(t, e),<br>                e)<br>            &#125;<br>,<br>t.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">set</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">t, e</span>) &#123;<br>    <span class="hljs-keyword">var</span> n = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">get</span>(t);<br>    <span class="hljs-keyword">if</span> (!n)<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReferenceError</span>(<span class="hljs-string">&quot;&quot;</span>.<span class="hljs-title function_">concat</span>(t, <span class="hljs-string">&quot; is not defined&quot;</span>));<br>    n.<span class="hljs-title function_">set</span>(e)<br>&#125;<br><br><br>================================<br>t.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">set</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>) &#123;<br>                <span class="hljs-keyword">if</span> (<span class="hljs-number">2</span> === <span class="hljs-variable language_">this</span>.<span class="hljs-property">kind</span>)<br>                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">&quot;Assignment to constant variable&quot;</span>);<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = t<br>            &#125;<br>,<br>t.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">get</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span><br>&#125;<br></code></pre></td></tr></table></figure><p>找到C的</p><p><img src="https://s2.loli.net/2025/10/27/i157w3UrjAKnVJR.png"></p><p>简单看下流程</p><p><img src="https://s2.loli.net/2025/10/27/rGNFsV2dW1oDLYE.png"></p><p><img src="https://s2.loli.net/2025/10/27/pNcmDlwj85YH7qy.png"></p><p>经过验证。可知 IV是固定。</p><p>key为动态值。</p><p><img src="https://s2.loli.net/2025/10/27/BzvKDiXnltajLs7.png"></p><p>如图所值。 key 是分割而来 40位</p><p>分析得知为sha1。</p><p>&#x3D;&#x3D;&#x3D;&gt;</p><p>值由来如下图</p><p><img src="https://s2.loli.net/2025/10/27/sxY87cnISPz9bju.png"></p><p>然后经过一层 AES.</p><p>key为动态值，IV写死。</p><p>得到最终的 C值。</p><p>AES加密前的值为</p><p>&#x3D;&#x3D;&#x3D;&gt; </p><p>如下图所示</p><p><img src="https://s2.loli.net/2025/10/27/YaImgKE9Glwtsj1.png"></p><p>值为一个一个跳出。</p><p>可以看到 </p><p>有个特殊值。 MNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+&#x2F;ABCDEFGHIJKL。应该是修改了base64的码表</p><p><img src="https://s2.loli.net/2025/10/27/uD3UHer8XpBicCt.png"></p><p>经过分析。可知每次码表都不一样。</p><p>规则如下</p><p>这里我们先来了解下 何为base64，AI简单概括几句话</p><p>1、<strong>分组基础：</strong> Base64 将输入数据按每 <strong>3 个字节</strong>（共 24 位二进制）进行一组处理。</p><p>2、<strong>重新划分：</strong> 将这 24 位二进制流重新划分为 <strong>4 组</strong>，每组 <strong>6 位</strong>。</p><p>3、<strong>查表映射：</strong> 每组 6 位（数值范围 $0-63$）作为索引，去查 Base64 专用的 <strong>64 字符表</strong>，得到一个可见字符。</p><p>4、<strong>数据比例：</strong> 最终，每 3 个输入字节对应 4 个输出字符，因此编码后的数据体积增大 $1&#x2F;3$。</p><p>5、<strong>末尾填充：</strong> 如果输入数据不足 3 个字节，则在二进制末尾补零，并在 Base64 字符串末尾使用一个或两个 <strong><code>=</code></strong> 符号进行占位填充。</p><p><img src="https://s2.loli.net/2025/10/27/H7MVefWO8U4Gynw.png"></p><p>具体不多说了。</p><p>最后看结果。</p><p><img src="https://s2.loli.net/2025/10/28/dfBmFOLEwqM1ane.png"></p><p>页面也不校验，成功率也低。可以当个练练手的项目</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;底图解密&quot;&gt;&lt;a href=&quot;#底图解密&quot; class=&quot;headerlink&quot; title=&quot;底图解密&quot;&gt;&lt;/a&gt;底图解密&lt;/h1&gt;&lt;p&gt;由于底图是乱序的。所以要先找到还原位置。&lt;/p&gt;
&lt;p&gt;这里直接看插装日志&lt;/p&gt;
&lt;p&gt;具体如何实现看一眼日志就知道了&lt;/</summary>
      
    
    
    
    <category term="JS逆向" scheme="https://hybpjx.cn/categories/JS%E9%80%86%E5%90%91/"/>
    
    
  </entry>
  
  <entry>
    <title>gocron_Docker安装</title>
    <link href="https://hybpjx.cn/2025/10/23/gocron-Docker%E5%AE%89%E8%A3%85/"/>
    <id>https://hybpjx.cn/2025/10/23/gocron-Docker%E5%AE%89%E8%A3%85/</id>
    <published>2025-10-23T02:18:37.000Z</published>
    <updated>2026-01-13T04:29:47.296Z</updated>
    
    <content type="html"><![CDATA[<h1 id="安装Docker"><a href="#安装Docker" class="headerlink" title="安装Docker"></a>安装Docker</h1><p>这里我用的是Mac</p><p>使用 Colima + Docker CLI</p><blockquote><p>安装</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">brew install colima docker docker-compose<br></code></pre></td></tr></table></figure><blockquote><p>启动<br>分配 6 核 CPU 和 12 GB 内存</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">colima start --cpu 6 --memory 12<br></code></pre></td></tr></table></figure><p>如遇到问题 可修改配置 比如修改镜像等等</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">colima start --edit<br></code></pre></td></tr></table></figure><p>完整配置如下</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-comment"># ============================================================================================ #</span><br><span class="hljs-comment"># To abort, delete the contents of this file including the comments and save as an empty file</span><br><span class="hljs-comment"># ============================================================================================ #</span><br><br><span class="hljs-comment"># Number of CPUs to be allocated to the virtual machine.</span><br><span class="hljs-comment"># Default: 2</span><br><span class="hljs-params">cpu:</span> <span class="hljs-number">2</span><br><br><span class="hljs-comment"># Size of the disk in GiB to be allocated to the virtual machine for container data.</span><br><span class="hljs-comment"># <span class="hljs-doctag">NOTE:</span> value can only be increased after virtual machine has been created.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Default: 100</span><br><span class="hljs-params">disk:</span> <span class="hljs-number">100</span><br><br><span class="hljs-comment"># Size of the memory in GiB to be allocated to the virtual machine.</span><br><span class="hljs-comment"># Default: 2</span><br><span class="hljs-params">memory:</span> <span class="hljs-number">2</span><br><br><span class="hljs-comment"># Architecture of the virtual machine (x86_64, aarch64, host)</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># <span class="hljs-doctag">NOTE:</span> value cannot be changed after virtual machine is created.</span><br><span class="hljs-comment"># Default: host</span><br><span class="hljs-params">arch:</span> aarch64<br><br><span class="hljs-comment"># Container runtime to be used (docker, containerd).</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># <span class="hljs-doctag">NOTE:</span> value cannot be changed after virtual machine is created.</span><br><span class="hljs-comment"># Default: docker</span><br><span class="hljs-params">runtime:</span> docker<br><br><span class="hljs-comment"># Set custom hostname for the virtual machine.</span><br><span class="hljs-comment"># Default: colima</span><br><span class="hljs-comment">#          colima-profile_name for other profiles</span><br><span class="hljs-params">hostname:</span> colima<br><br><span class="hljs-comment"># Kubernetes configuration for the virtual machine.</span><br><span class="hljs-params">kubernetes:</span><br>  <span class="hljs-comment"># Enable kubernetes.</span><br>  <span class="hljs-comment"># Default: false</span><br>  <span class="hljs-params">enabled:</span> <span class="hljs-literal">false</span><br> <span class="hljs-comment"># Kubernetes version to use.</span><br>  <span class="hljs-comment"># This needs to exactly match a k3s version https://github.com/k3s-io/k3s/releases</span><br>  <span class="hljs-comment"># Default: latest stable release</span><br>  <span class="hljs-params">version:</span> v1.<span class="hljs-number">33.4</span><span class="hljs-operator">+</span>k3s1<br><br>  <span class="hljs-comment"># Additional args to pass to k3s https://docs.k3s.io/cli/server</span><br>  <span class="hljs-comment"># Default: traefik is disabled</span><br>  <span class="hljs-params">k3sArgs:</span><br>    <span class="hljs-operator">-</span> <span class="hljs-operator">-</span>-disable<span class="hljs-operator">=</span>traefik<br><br>  <span class="hljs-comment"># Kubernetes port to listen on</span><br>  <span class="hljs-comment"># A common port is 6443, though left unbound to ensure no port conflicts</span><br>  <span class="hljs-comment"># Default: pick random unbound port</span><br>  <span class="hljs-params">port:</span> <span class="hljs-number">0</span><br><br><span class="hljs-comment"># Auto-activate on the Host for client access.</span><br><span class="hljs-comment"># Setting to true does the following on startup</span><br><span class="hljs-comment">#  - sets as active Docker context (for Docker runtime).</span><br><span class="hljs-comment">#  - sets as active Kubernetes context (if Kubernetes is enabled).</span><br><span class="hljs-comment">#  - sets as active Incus remote (for Incus runtime).</span><br><span class="hljs-comment"># Default: true</span><br><span class="hljs-params">autoActivate:</span> <span class="hljs-literal">true</span><br><span class="hljs-comment"># Network configurations for the virtual machine.</span><br><span class="hljs-params">network:</span><br>  <span class="hljs-comment"># Assign reachable IP address to the virtual machine.</span><br>  <span class="hljs-comment"># <span class="hljs-doctag">NOTE:</span> this is currently macOS only and ignored on Linux.</span><br>  <span class="hljs-comment"># Default: false</span><br>  <span class="hljs-params">address:</span> <span class="hljs-literal">false</span><br><br>  <span class="hljs-comment"># Network mode for the virtual machine (shared, bridged).</span><br>  <span class="hljs-comment"># <span class="hljs-doctag">NOTE:</span> this is currently macOS only and ignored on Linux.</span><br>  <span class="hljs-comment"># Default: shared</span><br>  <span class="hljs-params">mode:</span> shared<br><br>  <span class="hljs-comment"># Network interface to use for bridged mode.</span><br>  <span class="hljs-comment"># This is only used when mode is set to bridged.</span><br>  <span class="hljs-comment"># <span class="hljs-doctag">NOTE:</span> this is currently macOS only and ignored on Linux.</span><br>  <span class="hljs-comment"># Default: en0</span><br>  <span class="hljs-params">interface:</span> en0<br><br>  <span class="hljs-comment"># Use the assigned IP address as the preferred route for the VM.</span><br>  <span class="hljs-comment"># Note: this only has an effect when `address` is set to true.</span><br>  <span class="hljs-comment"># Default: false</span><br>  <span class="hljs-params">preferredRoute:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-comment"># Custom DNS resolvers for the virtual machine.</span><br>  <span class="hljs-comment">#</span><br>  <span class="hljs-comment"># EXAMPLE</span><br>  <span class="hljs-comment"># dns: [8.8.8.8, 1.1.1.1]</span><br>  <span class="hljs-comment">#</span><br>  <span class="hljs-comment"># Default: []</span><br>  <span class="hljs-params">dns:</span><br>    <span class="hljs-operator">-</span> <span class="hljs-number">8.8</span>.<span class="hljs-number">8.8</span><br>    <span class="hljs-operator">-</span> <span class="hljs-number">1.1</span>.<span class="hljs-number">1.1</span><br><br>  <span class="hljs-comment"># DNS hostnames to resolve to custom targets using the internal resolver.</span><br>  <span class="hljs-comment"># This setting has no effect if a custom DNS resolver list is supplied above.</span><br>  <span class="hljs-comment"># It does not configure the /etc/hosts files of any machine or container.</span><br>  <span class="hljs-comment"># The value can be an IP address or another host.</span><br>  <span class="hljs-comment">#</span><br>  <span class="hljs-comment"># EXAMPLE</span><br>  <span class="hljs-comment"># dnsHosts:</span><br>  <span class="hljs-comment">#   example.com: 1.2.3.4</span><br>  <span class="hljs-params">dnsHosts:</span> &#123;&#125;<br><br>  <span class="hljs-comment"># Replicate host IP addresses in the VM. This enables port forwarding to specific</span><br>  <span class="hljs-comment"># host IP addresses.</span><br>  <span class="hljs-comment">#   e.g. `docker run --port 10.0.1.2:8080:8080 alpine` would only forward to the</span><br>  <span class="hljs-comment">#   specified IP address.</span><br>  <span class="hljs-comment">#</span><br>  <span class="hljs-comment"># Default: false</span><br>  <span class="hljs-params">hostAddresses:</span> <span class="hljs-literal">false</span><br><br><span class="hljs-comment"># ===================================================================== #</span><br><span class="hljs-comment"># ADVANCED CONFIGURATION</span><br><span class="hljs-comment"># ===================================================================== #</span><br><br><span class="hljs-comment"># Forward the host&#x27;s SSH agent to the virtual machine.</span><br><span class="hljs-comment"># Default: false</span><br><span class="hljs-params">forwardAgent:</span> <span class="hljs-literal">false</span><br><br><span class="hljs-comment"># Docker daemon configuration that maps directly to daemon.json.</span><br><span class="hljs-comment"># https://docs.docker.com/engine/reference/commandline/dockerd/#daemon-configuration-file.</span><br><span class="hljs-comment"># <span class="hljs-doctag">NOTE:</span> some settings may affect Colima&#x27;s ability to start docker. e.g. `hosts`.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># EXAMPLE - disable buildkit</span><br><span class="hljs-comment"># docker:</span><br><span class="hljs-comment">#   features:</span><br><span class="hljs-comment">#     buildkit: false</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># EXAMPLE - add insecure registries</span><br><span class="hljs-comment"># docker:</span><br><span class="hljs-comment">#   insecure-registries:</span><br><span class="hljs-comment">#     - myregistry.com:5000</span><br><span class="hljs-comment">#     - host.docker.internal:5000</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Colima default behaviour: buildkit enabled</span><br><span class="hljs-comment"># Default: &#123;&#125;</span><br><span class="hljs-params">docker:</span><br>  <span class="hljs-params">registry-mirrors:</span><br>    <span class="hljs-operator">-</span> https:<span class="hljs-symbol">//docker.mirrors.ustc.edu.cn</span><br><br><span class="hljs-comment"># Virtual Machine type (qemu, vz)</span><br><span class="hljs-comment"># <span class="hljs-doctag">NOTE:</span> this is macOS 13 only. For Linux and macOS &lt;13.0, qemu is always used.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># vz is macOS virtualization framework and requires macOS 13</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># <span class="hljs-doctag">NOTE:</span> value cannot be changed after virtual machine is created.</span><br><span class="hljs-comment"># Default: qemu</span><br><span class="hljs-params">vmType:</span> vz<br><br><span class="hljs-comment"># Port forwarder for the virtual machine (ssh, grpc).</span><br><span class="hljs-comment"># ssh is more stable but supports only TCP.</span><br><span class="hljs-comment"># grpc supports both TCP and UDP, but is experimental.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Default: ssh</span><br><span class="hljs-params">portForwarder:</span> ssh<br><br><span class="hljs-comment"># Utilise rosetta for amd64 emulation (requires m1 mac and vmType `vz`)</span><br><span class="hljs-comment"># Default: false</span><br><span class="hljs-params">rosetta:</span> <span class="hljs-literal">false</span><br><br><span class="hljs-comment"># Enable foreign architecture emulation via binfmt (e.g. amd64 on arm64, arm64 on amd64)</span><br><span class="hljs-comment"># Default: true</span><br><span class="hljs-params">binfmt:</span> <span class="hljs-literal">true</span><br><br><span class="hljs-comment"># Enable nested virtualization for the virtual machine (requires m3 mac and vmType `vz`)</span><br><span class="hljs-comment"># Default: false</span><br><span class="hljs-params">nestedVirtualization:</span> <span class="hljs-literal">false</span><br><br><span class="hljs-comment"># Volume mount driver for the virtual machine (virtiofs, 9p, sshfs).</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># virtiofs is limited to macOS and vmType `vz`. It is the fastest of the options.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># 9p is the recommended and the most stable option for vmType `qemu`.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># sshfs is faster than 9p but the least reliable of the options (when there are lots</span><br><span class="hljs-comment"># of concurrent reads or writes).</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># <span class="hljs-doctag">NOTE:</span> value cannot be changed after virtual machine is created.</span><br><span class="hljs-comment"># Default: virtiofs (for vz), sshfs (for qemu)</span><br><span class="hljs-params">mountType:</span> virtiofs<br><br><span class="hljs-comment"># Propagate inotify file events to the VM.</span><br><span class="hljs-comment"># <span class="hljs-doctag">NOTE:</span> this is experimental.</span><br><span class="hljs-params">mountInotify:</span> <span class="hljs-literal">true</span><br><br><span class="hljs-comment"># The CPU type for the virtual machine (requires vmType `qemu`).</span><br><span class="hljs-comment"># Options available for host emulation can be checked with: `qemu-system-$(arch) -cpu help`.</span><br><span class="hljs-comment"># Instructions are also supported by appending to the cpu type e.g. &quot;qemu64,+ssse3&quot;.</span><br><br><span class="hljs-comment"># Default: host</span><br><span class="hljs-params">cpuType:</span> <span class="hljs-string">&quot;&quot;</span><br><br><span class="hljs-comment"># Custom provision scripts for the virtual machine.</span><br><span class="hljs-comment"># Provisioning scripts are executed on startup and therefore needs to be idempotent.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># EXAMPLE - script executed as root</span><br><span class="hljs-comment"># provision:</span><br><span class="hljs-comment">#   - mode: system</span><br><span class="hljs-comment">#     script: apt-get install htop vim</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># EXAMPLE - script executed as user</span><br><span class="hljs-comment"># provision:</span><br><span class="hljs-comment">#   - mode: user</span><br><span class="hljs-comment">#     script: |</span><br><span class="hljs-comment">#       [ -f ~/.provision ] &amp;&amp; exit 0;</span><br><span class="hljs-comment">#       echo provisioning as $USER...</span><br><span class="hljs-comment">#       touch ~/.provision</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Default: []</span><br><span class="hljs-params">provision:</span> []<br><br><span class="hljs-comment"># Modify ~/.ssh/config automatically to include a SSH config for the virtual machine.</span><br><span class="hljs-comment"># SSH config will still be generated in $COLIMA_HOME/ssh_config regardless.</span><br><span class="hljs-comment"># Default: true</span><br><span class="hljs-params">sshConfig:</span> <span class="hljs-literal">true</span><br><br><span class="hljs-comment"># The port number for the SSH server for the virtual machine.</span><br><span class="hljs-comment"># When set to 0, a random available port is used.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Default: 0</span><br><span class="hljs-params">sshPort:</span> <span class="hljs-number">0</span><br><br><span class="hljs-comment"># Configure volume mounts for the virtual machine.</span><br><span class="hljs-comment"># Colima mounts user&#x27;s home directory by default to provide a familiar</span><br><span class="hljs-comment"># user experience.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># EXAMPLE</span><br><span class="hljs-comment"># mounts:</span><br><span class="hljs-comment">#   - location: ~/secrets</span><br><span class="hljs-comment">#     writable: false</span><br><span class="hljs-comment">#   - location: ~/projects</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Colima default behaviour: $HOME is mounted as writable.</span><br><span class="hljs-comment"># Default: []</span><br><span class="hljs-params">mounts:</span> []<br><br><span class="hljs-comment"># Specify a custom disk image for the virtual machine.</span><br><span class="hljs-comment"># When not specified, Colima downloads an appropriate disk image from Github at</span><br><span class="hljs-comment"># https://github.com/abiosoft/colima-core/releases.</span><br><span class="hljs-comment"># The file path to a custom disk image can be specified to override the behaviour.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Default: &quot;&quot;</span><br><span class="hljs-params">diskImage:</span> <span class="hljs-string">&quot;&quot;</span><br><br><span class="hljs-comment"># Size of the disk in GiB for the root filesystem of the virtual machine.</span><br><span class="hljs-comment"># This value is ignored if no runtime is in use. i.e. `none` runtime.</span><br><span class="hljs-comment"># Default: 20</span><br><span class="hljs-params">rootDisk:</span> <span class="hljs-number">20</span><br><br><span class="hljs-comment"># Environment variables for the virtual machine.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># EXAMPLE</span><br><span class="hljs-comment"># env:</span><br><span class="hljs-comment">#   KEY: value</span><br><span class="hljs-comment">#   ANOTHER_KEY: another value</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Default: &#123;&#125;</span><br><span class="hljs-params">env:</span><br>  <span class="hljs-params">HTTP_PROXY:</span> <span class="hljs-string">&quot;&quot;</span><br>  <span class="hljs-params">HTTPS_PROXY:</span> <span class="hljs-string">&quot;&quot;</span><br>  <span class="hljs-params">NO_PROXY:</span> <span class="hljs-string">&quot;&quot;</span><br></code></pre></td></tr></table></figure><h1 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h1><p>jobs就是你需要修改的文件。你可以自己去编译Go的代码。</p><p>Go编译linux代码如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">CGO_ENABLED=0 GOOS=darwin GOARCH=amd64 go build -o myapp_mac main.go <br></code></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">delete_runs_after_days:</span> <span class="hljs-number">7</span><br><span class="hljs-attr">healthcheck:</span><br>    <span class="hljs-attr">type:</span> <span class="hljs-string">POST</span><br><span class="hljs-attr">jobs:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">&#x27;xxxx&#x27;</span><br>    <span class="hljs-attr">cron:</span> <span class="hljs-string">&#x27;0 5 * * *&#x27;</span><br>    <span class="hljs-attr">commands:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">./crawl/xxx</span><br><span class="hljs-attr">log_level:</span> <span class="hljs-string">info</span><br><span class="hljs-attr">server:</span><br>    <span class="hljs-attr">address:</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><br>    <span class="hljs-attr">port:</span> <span class="hljs-number">8156</span><br><span class="hljs-attr">terminal:</span><br>    <span class="hljs-attr">allow_all_commands:</span> <span class="hljs-literal">true</span><br><span class="hljs-attr">time_zone:</span> <span class="hljs-string">Asia/Shanghai</span><br><br></code></pre></td></tr></table></figure><h1 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h1><p>需要新建一个配置文件 以及 配置文件中提到的crawl文件夹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker stop gocron<br>docker <span class="hljs-built_in">rm</span> gocron<br>docker run -d \<br>  --name gocron \<br>  -p 8156:8156 \<br>  -v ./config/:/app/config/ \<br>  -v ./crawl/tc:/app/crawl/tc \<br>  ghcr.io/flohoss/gocron:latest<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;安装Docker&quot;&gt;&lt;a href=&quot;#安装Docker&quot; class=&quot;headerlink&quot; title=&quot;安装Docker&quot;&gt;&lt;/a&gt;安装Docker&lt;/h1&gt;&lt;p&gt;这里我用的是Mac&lt;/p&gt;
&lt;p&gt;使用 Colima + Docker CLI&lt;/p&gt;
&lt;b</summary>
      
    
    
    
    <category term="快速安装" scheme="https://hybpjx.cn/categories/%E5%BF%AB%E9%80%9F%E5%AE%89%E8%A3%85/"/>
    
    
  </entry>
  
  <entry>
    <title>hexo主题高亮不生效问题解决</title>
    <link href="https://hybpjx.cn/2025/10/16/hexo%E4%B8%BB%E9%A2%98%E9%AB%98%E4%BA%AE%E4%B8%8D%E7%94%9F%E6%95%88%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
    <id>https://hybpjx.cn/2025/10/16/hexo%E4%B8%BB%E9%A2%98%E9%AB%98%E4%BA%AE%E4%B8%8D%E7%94%9F%E6%95%88%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</id>
    <published>2025-10-16T01:43:00.000Z</published>
    <updated>2025-10-16T01:48:13.486Z</updated>
    
    <content type="html"><![CDATA[<h1 id="查看是否安装了highlight-js"><a href="#查看是否安装了highlight-js" class="headerlink" title="查看是否安装了highlight.js"></a>查看是否安装了highlight.js</h1><p>查看 _config.yml（是根目录那个，不是主题的）</p><p>正确为</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">highlight:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>如果依然不生效<br>themes&#x2F;cactus&#x2F;layout&#x2F;_partials&#x2F;head.ejs 或对应模板里，确保引入：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;link rel=<span class="hljs-string">&quot;stylesheet&quot;</span> href=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/highlight.js/styles/github.min.css&quot;</span>&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/highlight.js/lib/highlight.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span>hljs.highlightAll();<span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h1 id="使用PrismJS"><a href="#使用PrismJS" class="headerlink" title="使用PrismJS"></a>使用PrismJS</h1><p>修改配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">syntax_highlighter:</span> <span class="hljs-string">prismjs</span><br><span class="hljs-attr">highlight:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">false</span><br><span class="hljs-attr">prismjs:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">preprocess:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">line_number:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>themes&#x2F;cactus&#x2F;layout&#x2F;_partial&#x2F;head.ejs</p><p>（有的版本是 themes&#x2F;cactus&#x2F;layout&#x2F;_partials&#x2F;head.ejs）</p><p>在 </head> 之前添加以下代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- PrismJS Syntax Highlighting --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css&quot;</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>然后执行</p><blockquote><p>hexo clean &amp;&amp; hexo g</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;查看是否安装了highlight-js&quot;&gt;&lt;a href=&quot;#查看是否安装了highlight-js&quot; class=&quot;headerlink&quot; title=&quot;查看是否安装了highlight.js&quot;&gt;&lt;/a&gt;查看是否安装了highlight.js&lt;/h1&gt;&lt;p&gt;查看</summary>
      
    
    
    
    <category term="杂记" scheme="https://hybpjx.cn/categories/%E6%9D%82%E8%AE%B0/"/>
    
    
  </entry>
  
  <entry>
    <title>JS逆向常用脚本</title>
    <link href="https://hybpjx.cn/2025/10/13/JS%E9%80%86%E5%90%91%E5%B8%B8%E7%94%A8%E8%84%9A%E6%9C%AC/"/>
    <id>https://hybpjx.cn/2025/10/13/JS%E9%80%86%E5%90%91%E5%B8%B8%E7%94%A8%E8%84%9A%E6%9C%AC/</id>
    <published>2025-10-13T08:13:49.000Z</published>
    <updated>2026-01-13T04:05:00.756Z</updated>
    
    <content type="html"><![CDATA[<h1 id="反调试脚本——无限Debugger绕过"><a href="#反调试脚本——无限Debugger绕过" class="headerlink" title="反调试脚本——无限Debugger绕过"></a>反调试脚本——无限Debugger绕过</h1><p>代表网站：马蜂窝</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">temp_constructor</span>= <span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span>;<br><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-variable language_">arguments</span> &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>]===<span class="hljs-string">&quot;string&quot;</span>)&#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>]===<span class="hljs-string">&quot;debugger&quot;</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span><br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">temp_constructor</span>.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">arguments</span>);<br>&#125;;<br></code></pre></td></tr></table></figure><h1 id="某大佬写的终极绕过"><a href="#某大佬写的终极绕过" class="headerlink" title="某大佬写的终极绕过"></a>某大佬写的终极绕过</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><code class="hljs javascript">(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-comment">// 立即执行函数，创建独立作用域</span><br> <span class="hljs-string">&#x27;use strict&#x27;</span>; <span class="hljs-comment">// 启用严格模式，防止一些不规范的代码写法</span><br> <span class="hljs-comment">// 调试配置对象</span><br> <span class="hljs-comment">//按0开启日志，默认关闭</span><br> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DEBUG</span> = &#123;<br>  <span class="hljs-attr">enable</span>: <span class="hljs-number">1</span>,<br>  <span class="hljs-comment">// 控制是否输出日志信息的开关</span><br>  <span class="hljs-attr">deb</span>: <span class="hljs-number">1</span> <span class="hljs-comment">// 控制是否在关键位置设置断点的开关</span><br> &#125;;<br><br> <span class="hljs-comment">//作者：Dexter</span><br> <span class="hljs-comment">//公众号：我不是蜘蛛</span><br> <span class="hljs-comment">// 定义日志输出函数，根据 DEBUG.enable 决定是否输出日志</span><br> <span class="hljs-keyword">const</span> log = <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) &#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-variable constant_">DEBUG</span>.<span class="hljs-property">enable</span> == <span class="hljs-number">0</span>) &#123;<br>   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(...args);<br>  &#125;<br> &#125;;<br><br> <span class="hljs-comment">// 保存原始的 setInterval 函数</span><br> <span class="hljs-keyword">var</span> originalSetInterval = <span class="hljs-variable language_">window</span>.<span class="hljs-property">setInterval</span>;<br><br> <span class="hljs-comment">// 用新的函数替换原始的 setInterval</span><br> <span class="hljs-variable language_">window</span>.<span class="hljs-property">setInterval</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">callback, delay</span>) &#123;<br>  <span class="hljs-comment">// 获取除了 callback 和 delay 的其他额外参数</span><br>  <span class="hljs-keyword">var</span> args = <span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">slice</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">arguments</span>, <span class="hljs-number">2</span>);<br><br>  <span class="hljs-comment">// 如果 callback 是字符串，则删除其中的 debugger 语句</span><br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> callback === <span class="hljs-string">&#x27;string&#x27;</span>) &#123;<br>   callback = callback.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/debugger;/g</span>, <span class="hljs-string">&#x27;&#x27;</span>);<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> callback === <span class="hljs-string">&#x27;function&#x27;</span>) &#123;<br>   <span class="hljs-comment">// 如果 callback 是函数，替换包含 debugger 的回调</span><br>   <span class="hljs-keyword">var</span> originalCallback = callback;<br>   callback = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// 获取原始回调函数的源码</span><br>    <span class="hljs-keyword">var</span> callbackSource = originalCallback.<span class="hljs-title function_">toString</span>();<br><br>    <span class="hljs-comment">// 如果源码包含 debugger，将其删除并创建新的函数</span><br>    <span class="hljs-keyword">if</span> (callbackSource.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&#x27;debugger&#x27;</span>) !== -<span class="hljs-number">1</span>) &#123;<br>     callbackSource = callbackSource.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/debugger;/g</span>, <span class="hljs-string">&#x27;&#x27;</span>);<br>     originalCallback = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Function</span>(<span class="hljs-string">&#x27;return &#x27;</span> + callbackSource)();<br>    &#125;<br><br>    <span class="hljs-comment">// 调用修改后的回调函数，并传入参数</span><br>    originalCallback.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">arguments</span>);<br>   &#125;;<br>  &#125;<br><br>  <span class="hljs-comment">// 调用原始的 setInterval 函数，并传入修改后的 callback、delay 和其他参数</span><br>  <span class="hljs-keyword">return</span> originalSetInterval.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">window</span>, [callback, delay].<span class="hljs-title function_">concat</span>(args));<br> &#125;<br> <span class="hljs-comment">//============ toString 相关防护 ============</span><br> <span class="hljs-keyword">var</span> temp_eval = <span class="hljs-built_in">eval</span>; <span class="hljs-comment">// 保存原始的 eval 函数</span><br> <span class="hljs-keyword">var</span> temp_toString = <span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>; <span class="hljs-comment">// 保存原始的 toString 方法</span><br> <span class="hljs-comment">// 改进toString方法的处理</span><br> <span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span> === <span class="hljs-built_in">eval</span>) &#123;<br>   <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;function eval() &#123; [native code] &#125;&#x27;</span>;<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span> === <span class="hljs-title class_">Function</span>) &#123;<br>   <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;function Function() &#123; [native code] &#125;&#x27;</span>;<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span> === <span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>) &#123;<br>   <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;function toString() &#123; [native code] &#125;&#x27;</span>;<br>  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span> === <span class="hljs-variable language_">window</span>.<span class="hljs-property">setInterval</span>) &#123;<br>   <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;function setInterval() &#123; [native code] &#125;&#x27;</span>;<br>  &#125;<br>  <span class="hljs-keyword">return</span> temp_toString.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">arguments</span>);<br> &#125;<br><br> <span class="hljs-comment">//============ eval 相关hook ============</span><br> <span class="hljs-variable language_">window</span>.<span class="hljs-property">eval</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-comment">// 重写全局 eval 函数</span><br>  <span class="hljs-keyword">const</span> stackTrace = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>().<span class="hljs-property">stack</span>; <span class="hljs-comment">// 获取调用栈</span><br>  <span class="hljs-keyword">const</span> callLocation = stackTrace; <span class="hljs-comment">// 保存调用位置</span><br>  <span class="hljs-title function_">log</span>(callLocation); <span class="hljs-comment">// 输出调用信息</span><br>  <span class="hljs-keyword">if</span> (<span class="hljs-variable constant_">DEBUG</span>.<span class="hljs-property">deb</span> == <span class="hljs-number">0</span>) &#123; <span class="hljs-comment">// 根据配置决定是否断点</span><br>   <span class="hljs-keyword">debugger</span>;<br>  &#125;<br>  <span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;=============== eval end ===============&quot;</span>);<br><br>  <span class="hljs-comment">// 处理传入的字符串参数，移除 debugger 语句</span><br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>] == <span class="hljs-string">&quot;string&quot;</span>) &#123;<br>   <span class="hljs-keyword">var</span> temp_length = <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>].<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/debugger/g</span>);<br>   <span class="hljs-keyword">if</span> (temp_length != <span class="hljs-literal">null</span>) &#123;<br>    temp_length = temp_length.<span class="hljs-property">length</span>;<br>    <span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/debugger/</span>;<br>    <span class="hljs-keyword">while</span> (temp_length) &#123;<br>     <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>] = <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>].<span class="hljs-title function_">replace</span>(reg, <span class="hljs-string">&quot;&quot;</span>);<br>     temp_length--;<br>    &#125;<br>   &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">temp_eval</span>(...<span class="hljs-variable language_">arguments</span>); <span class="hljs-comment">// 使用原始 eval 执行处理后的代码</span><br> &#125;<br><br> <span class="hljs-comment">//============ Function 相关hook ============</span><br> <span class="hljs-keyword">var</span> _debugger = <span class="hljs-title class_">Function</span>; <span class="hljs-comment">// 保存原始 Function 构造函数</span><br> <span class="hljs-title class_">Function</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-comment">// 重写 Function 构造函数</span><br>  <span class="hljs-keyword">const</span> stackTrace = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>().<span class="hljs-property">stack</span>; <span class="hljs-comment">// 获取调用栈</span><br>  <span class="hljs-keyword">const</span> callLocation = stackTrace; <span class="hljs-comment">// 保存调用位置</span><br>  <span class="hljs-title function_">log</span>(callLocation); <span class="hljs-comment">// 输出调用信息</span><br>  <span class="hljs-keyword">if</span> (<span class="hljs-variable constant_">DEBUG</span>.<span class="hljs-property">deb</span> == <span class="hljs-number">0</span>) &#123; <span class="hljs-comment">// 根据配置决定是否断点</span><br>   <span class="hljs-keyword">debugger</span>;<br>  &#125;<br>  <span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;=============== Function end ===============&quot;</span>);<br><br>  <span class="hljs-comment">// 处理所有参数中的 debugger 语句</span><br>  <span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/debugger/</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>; i++) &#123;<br>   <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">arguments</span>[i] == <span class="hljs-string">&quot;string&quot;</span>) &#123;<br>    <span class="hljs-keyword">var</span> temp_length = <span class="hljs-variable language_">arguments</span>[i].<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/debugger/g</span>);<br>    <span class="hljs-keyword">if</span> (temp_length != <span class="hljs-literal">null</span>) &#123;<br>     temp_length = temp_length.<span class="hljs-property">length</span>;<br>     <span class="hljs-keyword">while</span> (temp_length) &#123;<br>      <span class="hljs-variable language_">arguments</span>[i] = <span class="hljs-variable language_">arguments</span>[i].<span class="hljs-title function_">replace</span>(reg, <span class="hljs-string">&quot;&quot;</span>);<br>      temp_length--;<br>     &#125;<br>    &#125;<br>   &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">_debugger</span>(...<span class="hljs-variable language_">arguments</span>); <span class="hljs-comment">// 使用原始 Function 构造函数创建函数</span><br> &#125;<br><br> <span class="hljs-comment">// 保持原型链的完整性</span><br> <span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = _debugger.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>;<br><br> <span class="hljs-comment">// 重写 Function 构造函数的 constructor</span><br> <span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">const</span> stackTrace = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>().<span class="hljs-property">stack</span>; <span class="hljs-comment">// 获取调用栈</span><br>  <span class="hljs-keyword">const</span> callLocation = stackTrace; <span class="hljs-comment">// 保存调用位置</span><br>  <span class="hljs-title function_">log</span>(callLocation); <span class="hljs-comment">// 输出调用信息</span><br>  <span class="hljs-keyword">if</span> (<span class="hljs-variable constant_">DEBUG</span>.<span class="hljs-property">deb</span> == <span class="hljs-number">0</span>) &#123; <span class="hljs-comment">// 根据配置决定是否断点</span><br>   <span class="hljs-keyword">debugger</span>;<br>  &#125;<br>  <span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;=============== Function constructor end ===============&quot;</span>);<br><br>  <span class="hljs-comment">// 处理所有参数中的 debugger 语句</span><br>  <span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/debugger/</span>;<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>; i++) &#123;<br>   <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">arguments</span>[i] == <span class="hljs-string">&quot;string&quot;</span>) &#123;<br>    <span class="hljs-keyword">var</span> temp_length = <span class="hljs-variable language_">arguments</span>[i].<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/debugger/g</span>);<br>    <span class="hljs-keyword">if</span> (temp_length != <span class="hljs-literal">null</span>) &#123;<br>     temp_length = temp_length.<span class="hljs-property">length</span>;<br>     <span class="hljs-keyword">while</span> (temp_length) &#123;<br>      <span class="hljs-variable language_">arguments</span>[i] = <span class="hljs-variable language_">arguments</span>[i].<span class="hljs-title function_">replace</span>(reg, <span class="hljs-string">&quot;&quot;</span>);<br>      temp_length--;<br>     &#125;<br>    &#125;<br>   &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">_debugger</span>(...<span class="hljs-variable language_">arguments</span>); <span class="hljs-comment">// 使用原始 Function 构造函数</span><br> &#125;<br><br> <span class="hljs-comment">// 确保构造函数的原型链正确</span><br> <span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>;<br>&#125;)();<br></code></pre></td></tr></table></figure><h1 id="反调试——格式化正则检测绕过"><a href="#反调试——格式化正则检测绕过" class="headerlink" title="反调试——格式化正则检测绕过"></a>反调试——格式化正则检测绕过</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title class_">RegExp</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">my_test</span> = <span class="hljs-title class_">RegExp</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">test</span><br><br><span class="hljs-keyword">let</span> my_regex = <span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-variable language_">arguments</span></span>) &#123;<br>    <span class="hljs-keyword">debugger</span> ;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">arguments</span>)<br>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">source</span> == <span class="hljs-string">`test`</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">my_test</span>(<span class="hljs-variable language_">arguments</span>)<br>&#125;<br><br><span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-title class_">RegExp</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>, <span class="hljs-string">&#x27;test&#x27;</span>, &#123;<br>    <span class="hljs-attr">value</span>: my_regex<br>&#125;)<br></code></pre></td></tr></table></figure><h1 id="反调试——格式化检测String-search绕过"><a href="#反调试——格式化检测String-search绕过" class="headerlink" title="反调试——格式化检测String.search绕过"></a>反调试——格式化检测String.search绕过</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> my_search = <span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-variable language_">arguments</span></span>) &#123;<br>    <span class="hljs-keyword">debugger</span> ;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">arguments</span>)<br>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">arguments</span> == <span class="hljs-string">&#x27;(((.+)+)+)+$&#x27;</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">my_search</span>(<span class="hljs-variable language_">arguments</span>)<br>&#125;;<br><br><span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-title class_">String</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>, <span class="hljs-string">&#x27;search&#x27;</span>, &#123;<br>    <span class="hljs-attr">value</span>: my_search<br>&#125;);<br></code></pre></td></tr></table></figure><h1 id="hook-Cookie脚本"><a href="#hook-Cookie脚本" class="headerlink" title="hook Cookie脚本"></a>hook Cookie脚本</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs js"><br>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-string">&#x27;use strict&#x27;</span>;<br>    <span class="hljs-keyword">var</span> cookie_cache = <span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span>;<br>    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-variable language_">document</span>, <span class="hljs-string">&#x27;cookie&#x27;</span>, &#123;<br>        <span class="hljs-attr">get</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-comment">// console.log(cookie_cache);</span><br>            <span class="hljs-keyword">return</span> cookie_cache;<br>        &#125;,<br>        <span class="hljs-attr">set</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>) &#123;<br>            <span class="hljs-keyword">if</span> (val.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&#x27;xx&#x27;</span>) != -<span class="hljs-number">1</span>)&#123;<br>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;cookie&#x27;</span>,val)<br>                <span class="hljs-keyword">debugger</span>;<br>            &#125;<br>            <span class="hljs-keyword">var</span> cookie = val.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;;&quot;</span>)[<span class="hljs-number">0</span>];<br>            <span class="hljs-keyword">var</span> ncookie = cookie.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;=&quot;</span>);<br>            <span class="hljs-keyword">var</span> flag = <span class="hljs-literal">false</span>;<br>            <span class="hljs-keyword">var</span> cache = cookie_cache.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;;&quot;</span>);<br>            cache = cache.<span class="hljs-title function_">map</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">a</span>)&#123;<br>                <span class="hljs-keyword">if</span> (a.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;=&quot;</span>)[<span class="hljs-number">0</span>] === ncookie[<span class="hljs-number">0</span>])&#123;<br>                    flag = <span class="hljs-literal">true</span>;<br>                    <span class="hljs-keyword">return</span> cookie;<br>                &#125;<br>                <span class="hljs-keyword">return</span> a;<br>            &#125;)<br>            cookie_cache = cache.<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;;&quot;</span>);<br>            <span class="hljs-keyword">if</span> (!flag)&#123;<br>                cookie_cache += cookie + <span class="hljs-string">&quot;;&quot;</span>;<br>            &#125;<br>        &#125;,<br>    &#125;);<br><br>&#125;)();<br><br></code></pre></td></tr></table></figure><h1 id="headers-hook"><a href="#headers-hook" class="headerlink" title="headers hook"></a>headers hook</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> header_old = <span class="hljs-variable language_">window</span>.<span class="hljs-property">XMLHttpRequest</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">setRequestHeader</span>;<br><span class="hljs-variable language_">window</span>.<span class="hljs-property">XMLHttpRequest</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">setRequestHeader</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">key, value</span>) &#123;<br>  <span class="hljs-keyword">if</span> (key==<span class="hljs-string">&#x27;token&#x27;</span>)&#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(key, value)<br>    <span class="hljs-keyword">debugger</span>;<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> header_old.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">arguments</span>);<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;反调试脚本——无限Debugger绕过&quot;&gt;&lt;a href=&quot;#反调试脚本——无限Debugger绕过&quot; class=&quot;headerlink&quot; title=&quot;反调试脚本——无限Debugger绕过&quot;&gt;&lt;/a&gt;反调试脚本——无限Debugger绕过&lt;/h1&gt;&lt;p&gt;代表</summary>
      
    
    
    
    <category term="杂记" scheme="https://hybpjx.cn/categories/%E6%9D%82%E8%AE%B0/"/>
    
    
    <category term="JavaScript" scheme="https://hybpjx.cn/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>Unidbg打DirectoryFileIO补丁</title>
    <link href="https://hybpjx.cn/2025/10/10/Unidbg%E6%89%93DirectoryFileIO%E8%A1%A5%E4%B8%81/"/>
    <id>https://hybpjx.cn/2025/10/10/Unidbg%E6%89%93DirectoryFileIO%E8%A1%A5%E4%B8%81/</id>
    <published>2025-10-10T10:18:01.000Z</published>
    <updated>2026-01-22T07:56:30.467Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="哦~这个密码无效。请检查后再试一次。" data-whm="哎呀，这些解密的内容可能已被更改，但你仍然可以查看。">  <script id="hbeData" type="hbeData" data-hmacdigest="4b717c55a8f14b66610b34032798c876c973c65b9b011729ba87f979f9a3eaaf">ebe2c567d855d28a8c084b1127675fe291f9f5d0bf258899b195dd47074eb5015557ca4ce53483d01d02873c80e582d6825a5d4f431d272590df2a2f8448f1f5e1b3c43fa8290a839e6a577018503812af5edf2353e703631bf3ddb528b3ac15eb286317e6ebe7db466472e839abf241e9afa7321fa21cb1a0ce4e2dc80e1400fe5536cd5420b44a3ce4fb81bc55d2114eff184df19e1fb88695c62c263427c2dfccc8c20de191a73239cdc08206a5a333e111a24878c3af4a20cc3d9a467ce0aaf0fb1083ae607acc8d4b7f36564bdd310564e62a1683580b4b55e93e6840ac4d9dde849ff355da8a64bebc54456823e4fd6747c818b504da94969cebc5c4f91db2c60a1420350e54f0f0d7f669c809693b8f85df8f6b4f6c2922481f8ef67002059eb20c991997623aa22d1b6999cf63385e9d60426b3634171e870ae0d98d270658ba302b87c4515800ff6b4859e86ef8e8ffe32c6fa608e5d3315ea6a219552fb4f7059a902cfe64d1cef83ef2a9f40e8150e82fcdb718f1f0f2ae641f48152c000a46992822836f9e26cc9404c20f612e23547da718dd08e3237830b7b6d2745ae89b6a6a55ac4398a902aed96d08f47fbc1244093e7bc40a89459c1ec6a4535d3b5f74bfbf191330ba16bc2f578d3c2fc398449fc2847e50891a782503773e5845fb5a43502c9b804eaa4314ca75ad148547a347868bf61554e8a7cd73803ad692e1e207a69715bfc83b783b0c8cfe1a9e93dad72bacf30b992f4f7fcf9e7c48fda1ae4f395fb866b9e328f1c00f2aa50caef1a0f77c059a2b1f3088e34de48fdf6699dbcc78834d2ba58d873195aaef9b20bc1ac9f941fc6a3e19ac61e75e894516e742a56d3fc40fc589db3a8d2d5c151772a934a336c8d3e41e911d718a84ccb7e3b1b3391a7bd321ecfed05ccfa9124e4e5294c2eb35ef5e3460efadf4f23a4c183dcb6236cb82423a83c3a2bb30b8b83448c3777e5d043e8cf4bad4d64741dda973d6b5d26726f2b9d94b75b1e7dbb040c1107ff879fea87cb88fdb95ce3599fe2527b9325c750b3a2db5ea5874493ba4612853867ebea27fb1159164e39b578aa04a06cd911ad72408d319330bb2c4dda15d191c12482b2bd1a3968802ddb981458d0d95205b45a24a2039834ee29ccb0958b93ea9d7fbee3cfe09ff43434f6dcdf1bdc909a7a6cc035df5964dc29c4e274eeb00d9cc51cf073c50cd1139c5773f50ccbdc1541300054b5bf841943cd4b5243cb9ea0a5f7c28e5d5eadbe7b0fcd9856c4b04f61ccc878c75bea610bc8b0818116a99b212eb6e45cb4856bef418254ff5fc55ef2c0d8ff26ee7a7e5b9ed92da317fac100493d5fb19d2f0c138b7933c4a277f2afff0a56ce0d6a16b8b44628085009402f661bc200abc5d74178409efcca79db29adc614892bfda524bc0d5819db5e0d43d958d22b321ec1b23494bf5c5cd779d500c47618d86e4a657f32b8478ed167a7e62c9d5d9f7ce76017dbd02d044cce78ab0a4395a9c45675d5c5741363c2043fdeda5fabbe43a6851f439ee6380109be71a4838462c9087b689bd7ce1bddd6b2d8e860ed8a03050d59df7d614daed45177622a3dacd1aebccc750e3b6700483fde11f893941e82a414ee30ac7b2832f14044c163c3b7dd35152c5a77f5bde81e7a85e914e5a9c8372686d423ecda8061b9dfa4f9d595a6dec09b08212432f40d659bba8f16ab3cf2467dd6d17eb00282965c94e80d81be9a61a4429b7008eec0cb279e3b1fe68928a432f663ce1a557f9cec6dc9339a7926e03088f87df4806be88963dd7a7ac0055d140497e8b925e6e8c637a79348df6e13803710c2f385f8e2753f99f04e9d89bb4fd4db97069c318a38c40ab2b67de9e1b7056853652dfa9192408329cd45e4c76fd3de4adbe4cf85cc24dfc3f1d92ba32e547e3982a2f8cf4ea60e64495eb57c895b0a61bea775ab62a6d754be86fc1e19261169120658889f28563c223a3dbe462ebacbaaac0e428ca680238a43b1b0c67cd70abf4d82f71f209c7fb2c78fe7f2b808031ded7e5d4966425012633ab9f602432455f04fa7f9d5a4cf4ed9f92d2320f8b0ae82a715a50cbb37fd7ebb853f828ab2618fb7e20526618101640323fe3616550aa05d89c037d12a39a29d2c9aa2f1d085c39ad8dc0fc0d845e744665def156ed512c48b7c1c08f7ff9a1d8650e94010503af99fb9b71b658f22aa39541213482cfd1a73c1238d458451119cfc596169f00a30c52faa6ee87fe0bb73ba16570d427de81843b0c07c21e4b530eddfbb6415ba0a8c4ca141c4e05a70aaddd27b8016df4ff03a5ca1da62b530807a9fddfa7453b1647ff82664337552f61d78c441c3c626ac30f4933b3759d22a2f9dea020e215760824cd46a97fd1ea5ecc3cd04eede29dafb00b938b3aed308b152667dfeec0368ba10cf75e555d437270d821a2df04d3890b40ab0c9afee594b20fcd2ad25973eb62aa47b8c63ebd9501934422185e79dacb4a031c9222f773ce5b9976c81524f541286976b2c6696b0cc96ed1cedeaa102cbbf7d7844ab9630a6b195e3ab42798ddbf272f394aba71b17dbd59bccc4efcf390d25282f05b3ab022a44dc90a48bbd8d694df10ea4b10c7deaf692734472b793c12c14288b8461020a9dfb3c33cc8e7acf45b02113bbf49c29187afcc8a0e57b334e314e5f3e1a254d3955f41d7703d156f9a427b2b6b47e5a8830f801ce6c3e391ab2bb14c9aa03f17ea39bd0950cfda9582129ac24e6bab7957289d93565f157870cdf1195541ed8cea91735de411a26d9c4c82be838fb47116b51ba967592a4fcf42313c7b8c5de9ed81c39e724e57cd79b367bc1ac86b77a725d8939a40a1de31f554990371399a5a6d1dbe33924aa41de9466539b97c433e91adfae76a3ae88b09a0c90cae745b62e92b8a1e869cfe122c5ef75cba837c9efda39f39c48cd75ab77fd1a940d989f41ac40455f3c79d35bbfba41237ee1bc990784da30ccb27c312c59cfca22c8447f766a60d17ebcccffe7ea03fcea4302d3f1c40892c192ef2437af45597962d2a540314a8bc7027e51d19a37ae537795669afe7fa78b90cb5ab9a440cf7768f686ac40d4fffb02434e49e80911646e9abb0c5973545c14f9747f60631d12db938a21db8c4dd9b66fa54282465acb0d77dd312aaee1057e0446d93daab29bb25c48613bd834774b3639ad7c71c4959e167a00fd601468153239f0b355c4dbd2efa69bcbdcbcbff65b1e086729e211ece219fbc1bc9307e777afe5ae5a84a58f54c54d2a0ac109232953030c1cd5d1eff49ad8e667669fab2913c2e49022bc78f4f31b5915efb2b986df5115f5901c003b540474d554846d45df4a95b4f056b981ff9d662e30ccbce9a8f329b0108c5161530e5d44b2a150a657cd64bf389ad0ba374be78a1d57978f5a66e8f1fc42818b5c9b023523087fcb800d1ad810422503505074340f802a9ab54489955e291e4380143d964a693e3f0a1aecccda031e5021811c961a737a6b308d2d8a7370caa4810263f346a549d9230f2139a4a12d1aa5d37bbb1715e53f2b7344dd1eec891ea7ccd7db7c60533e8203fa81c2aae67acda1fbd4f4083648e0b48d7aeedc27b09388c996098aa917a887474167077aebbaf1e8a8fdb4f424144142cf71c195d23e14fcf0b14e6f96b09df65370b2ef0ec3df0662be54879dd548f788c53857f79f41a549f8a53c8a1fce7387973e88743f2aa0a970d75f28111813411a71a3e2841bc4efedd77fba4ad4b714cd93397b84e2dc131ea9aa2c4f98e0209067c3523cb7437fe5cf4df3bb00b9dfa541675774f290f53a85913a81204d07762306e14eecbf440b153adf2e98671c041654e4427ec723e958dad8801cbec4f2559f0fda375c176315c1924fc291b53de04349c44c78fc7cfcdaa73fa385483629870c369e0d5af2c56690dc296b1b1af7aab4b1720a33a8c9f53092e585e6fb1757c06b6150bd185776ad4e4e04a21559b1c144da03383534fea7ee5165dd13218ddaada64cdf50cdaa368e0a65b573f9f88e280f37c73684f593231abb3e35ccd379685ba66e256364c3a6630936f354505feaa4660da4ea2a547c215b7b4e8849fe7ace220b4ffc2ee9a29e46d8d3dabc85bf21700d4f78c4ba3cf85dfe8678b96c629bbdd64d7801212183240f8c9c872040b791f5ace69334a412a96263e7e9f47ff0288dee786ebe31f776063dcc60c5697e3e8509daf6a8df6c31b6c2e0486962609c7464de48ef1295e660880a6778fe5bd9c2c938258a384e1bf97f374e52d719a77c6b03bce8e42890fa677fc86bd02bc6d531a55efbd527e3087cee9aa3b4c93c0d2f2211c74159090231b8d75f84c49a99b6f44da2f8af96b891baceb8f0991390135e52da1b629ce7b61868f25f8e656c5a4b0f7c36246984009c42caa7f043036909483cd9dcb3100159b544b695fd3aebb350c3125c744eaed0ef0dde43a5349514e14bdb2a1fe136404eb10a4dd0135e20b826f1dbdea18758f5af59d381c72b0a56b692e2bdc0c4a75e2f4698a408a3337b372c44669f9a75fc4dee9c0f291557e91198e0407507577424ad8df0a642b1e43c838f4fb74c0fc17f110a6173cfedeb2e30e001804b1369f6c58e9b97f7d2e36bceb908089887ead9ecb4fc8139e0e573beb2438314368e69897d944d5490b49630ad2d37d5f6046715115300c764cf006573281037bc07158299b4af97e852fc1ede0a10e5b5b96e863b4353f93d17cb16581fb4e37f3139074e9f08b440ffda9d70f12e8c6bbf8fd63a6ff222ddcd825266a7e2bc01e79299251e86c1a81b063d8081e01d2ef532f2fc2e520c2c3d0c92692ce529928ec5c71a9c4a6e4c76ad8168ea9b1c77805344b53a084f7c3b7facd1071266449f24a7c95b9992022b9872b15ab98f26b445a367f1220feb0778513f4ad053b35f916115b1ac7af341e137c20ca7cec2d617e1595cf2826d5731c736ce6f04445c857839f597abb8cae5796ec65221d5ed41c444e5a9e417c2c3e3ff2af68ed70aa8dd85db6b06cce02930996e4a0fac273680f9abcfc19113d9b224324e17b4f7adf7845204abd1517488e7ad1ff2d5d067255755837fb90d125f9181245b9f8b97b5345f583d13db8b8c7e9c0e6e59d1ee4129735f17a2435d481e47fc24bf067facad3a1e7f5c90787fea61e3888fa21c64bfa88876fb3ca85d046cf4e6a35130d1c8d56ed46a99c6c88c7ef981b81707ef0a8a201dae14770a87fe17c345e3bd1b205ed010c3f775bd76c4a682c1eb3744f565e5e8d292ef1a59644c372dd29186b85de67b30f8e59d6cdeedc9973af635102acb240167ac22cff8d8323cefd92b1d8adac917bd522e3aa2df0b37f90d30a092d3d8766bed22b840de92e89655ec46768d3e35cf99caacfa722c1be5ab589f9506f89f931efd9e865580d0267af2737c94b688ce649d928829fa3c5f51dab550db13b10de8e7e2b82582ebc5d1cd99d3fdbab12c2092c26f1aee3debb2ef24108e940d1fa4bf516be049b820f78ecb0ee6e12c91e3638bacd2f3931c764b414595216347225e1a0bc99a7601304c896addb7ed194f8494e4328f7fe9098c4788da702ce08a71b90563a887a41352d348b18149f8791b7a22b3c488c0246f3c5d4885ae1120179a5caf8df46985f10b59c34aa2c13d4682b4c265b990c9be9cf47549335371b101bd91eea935422fce34c6d83eab7d58cc67e98b6d4fe9c109d592078d4ea1a37b9c74e5cda050ef3680ede373455a2f6f834f8fd691122849ca58798503a05f2487748f3a0928c90f86fcd620f880c931baf0407717bfa8b9fb7cfc616d427a92792e7b0216facebfea3da769c584cbb207355444d344e3c7a6cf591293eedb26b20b0a0bae75226b9a6028b9034fb455bd7217d0711348887cf91a76350b63159d5387eeaba346ae3e0f17f53cf9c634105fdc462f6443fa5d67b92bbcbec55ad151f4a9c962c40e1190e60de55e956b40d9fc678737a758924a41015599e3508f574cc638e16ec0e5f14020b7941edee1a3fa29d1dac8443a274d8104a4012f7e83182e40622d4b1954be6a227505cf53cba6c5aa9b38281ea0e9496ae06c8c279e0ce409670b5dd7c6f5bfab91b2a709bf2da032651d9235357cb6a2be6c6d74a58950acda060b6fefd8075757ce6c3462edc8a3d563b3d973779006f346f81989927627bd5179485ea840c323a6126ac5ce2755e013f0f22f9ae97a523cbcff9d0ce1f53002ef1beb4ec2a611972eb8480efc1c973da773a6273fe1c3cb00b41781644e3a98944351b50d0b12555113340201fa9d08533ccbcd035b4b152d22ba8069c3d08efbc34a724ea7445f58ff1479f82ba9f93d57499304b65f2c127ba8756b6fb3f8c6b4cabb1b5f606b87a754f5a3116b53144a414d279e4bd466ca000b590880504d2600f7c3155bc60137d2c04be93667dfe2a0ab3a1e416f0c44f0cd4a572e105bc4da9e992a70dd171647c3a6a303d800c604b2ac16a77d1393bb1cc819cd051ac3ca28decb0221cfa73b20bd27f9538a134aaec7ceba374314d048b8318531f451b134192ef35264a5d98e2a789ca3e57b878b558f81e4eb87a883c37d14ef989eae169bb1e83bce734ef73dae22467b1d7d6e4b17e8aaa94984b28091d0523f58a96ba60c00c84621c2769a2f7326de173d1fb978f628894ee07865b8ad0664e23ca0281136b1f7f22e454b07d67a7e0de366187c0c039696b29a278c4b07ec442dd9b2e18524b0e3f7a1209cf5a16e0c2eaff14d92b74d052055f9f9dea1f9466bd14cf902fee1b93b44990891d31e34b5dd788cff43867275ace563391d2107bd73774f9c210d972bced99fb384c3201f8dd2408c56b607311edc86ef98d341dfbe1eaa1320abdc4e5704669183ea7d187dba031f87bbf11aabd9d64fd1f45232a7baeebbb48c74da3411b7508e589a614c2cdd487ea4b2bbdd30274fbb8cd62ef517c8ab9dc63e6465107acd7f96abc8bdea0815a6ed0be3c863fb1bea80ea54d5ff4f592aa0276d8a91da4f780d3993511affafd3cbb56ceb0bea405c552ba6a8034d203c6a2549fe65406cbf39f57c5e16a91c7cdb08a84fdb8bf31449add981c8f7eade7708b15d84f0b1f7e0f473d399f123a7ff3c8f30f288d4be627fc0377fc25dc37a52b317923172d5472fe9b6f581b0e2c1a5b8a1e6342aa92b1198b70e4e431814d0373306a79cd7beb3e779ac82d1b3705539339acb42f53285c7951b88476547af79ca5a2e1e54e679ae853f03a3c73e30e0816f32b90b5a1614b63336b987e72479b12be2ef729e1d24ff5b3fe49117bacf1954a39fb84608e29f77ef1483917f3487b0f477c8851662a5b9fc99d37bf06e3a2c24d5476b7708d4d8a758f87d4e9b35b0d158e23bd353ae247ff401159a9d2de577597cd02c1184f36cfcfeb4ba8edc524878d2683cd2a308f28f82035a2cc9d9aae84a34ab5a78637de4433dd7164c70de2cba93c78b719b7f37174f5d55ee752e7e354e1bacb59687e32c200c953f81c414db4c506ea975b1be4fa8c67ffea327e36ec4fcf68f076d34f15eaa8b917a72eedc9c27b39d933f68e9cf03c029b6e3b08506e0f79f8d4857ab64cb8adafce615e0e1a88c4a28e1a0e37a0cf8b3e1728b537f845c236227d4fd2d52a71600421cdf6489720a217f8e4e696cc7f506039dab6546864d216719d82de6ecd325e3623021decb5f51327adf5794537595bde45aa89215b18b3e3a33d1780e52164744ee4ca901023b4c652090fe2181ffdcee0b3b6b726f02077aac4cc8cac98c94e99876ee797b1615b979f13f5371854f9617ed7521aa6bccd6739c776626eaff37a265a03bdadd5097c02b65785df8f626169e7a6a9db5087ec7006f1d67d21d54ae7597e810f731f59f652b5d64c7e9b5875dee8e6b558e5f9aadecfaf6864c221dfa3d682cef0fb3f9d8950de144c3cd1c92c7c4903934f162c491dd37f6447cb3c74a944b15741224405f0bb987eb7c772117a5b4e7bc64af341772813eb202d1efd1be8e5b6d5f3a2f54dfed210dccba76668cc951ebe0cb7da10484dddb618331cafc45a2d120fc79d34405958c4562328955d4e0c219c22097f027a19675e14a97d17165d5031132863e908239afa0e3353f065396296cb38246e33b73e3bf8cd3241fabfa2275a3708041632548b202a80d781155ec8a9f2225590fef83135068a9b7ebdcda34734a12c8da7bcee25feddde0d42a0723c30b85bb7766cfe4731a73a4617f338c2a9e1bbf274e71269e266ce3b4a0726e28aebba74239436c1b15b5335456918c690f7fd30164557ca2de2198777cacbbde0f6b151416a040cc5a8773f91a7d3c4cc3d3054b0ee17932010acb5936e5128c7d7de3153ab0fcb6b5fe154304cd2d175d7c88b5ef9a688e6336b3864dbe2510a1edf653b4db2ae60dd6f1a4165895974547c150f7a6f920015461825f20514eec3b929bd618f1109ef6a300280792a467a5d7e0be98c35464293e516657aa94e6a9749021ed7f4ea9d0ffc4f32f8ffbd1a90e42f8b12ca33950adba6c824bc90f23239661436213da6541439497537951125aa8ac2e5e76d9ce745402b16833bceb7cdffb7000ede1050c12d430f70d1b3d8fac3f88c7f8f81474594b0b19c3e3384cf643a0bc1d30e908afccd3c1bd586010aa334b29840b35fe0cdd03e40fa89153acbca933fbcb0bfbd0607c35af71a3363c126e6312e860c365464d217855f540a4e698c941f965dddff2d3df57441b98065e483e26d2aec27c37598435dc00697af7dcda45699ac01eed065e9b89670a650f6cb2dcf94f9f2f31cca56c285dd7cd18bcc81e4abdde0c2f0b043a8da2ca66c7702e9e56a0253a1a0522805dd76392fa6043b33bf57c12ab1fd4a9e74a93cde1c8f1d5838dd7e3468d6bc8242cc836d40076b7c66126bf364529e2d611296d8c5bdca652dc5bf5c09bea3c66464a926c61bbf9b7c0b0f9e4f33d5ae4e6f579758975c63407a1df78321ba749bd0aef621512016af48fb0462a70526a775a7367ce63ea6d17af76a50c001952a27eebbaffb1626c9c0ea746844e2ea9b23a0d8db519874b0f845dafda3b69044de91151d350951b7841c20720831672d37c44e12a6ec56fc983f2a64a7871262728369eae24333aa1e875494429b9d750b468714d7a7e822a4e647d7671d9a1cc058b20dcc9e0daec53662782e1be09b6109b4d020f9f96d83ef3d3e5770252c480c0459b15c2a4203a47ed157937b27388794bc368d9357a527f7dbc1eb306d65208c8983d68709b38bc9c1fc0785166aa47f0770b3e0e7f4b22159aec9daa7e477e676de8b38964538e8de9362dd6b976973bdc14e481de94b8b89c999bd182a12e88615ee681775910016dc99d96274f2a697ad263f1baf780b0b6d782d3d4f93d987ef6f9f5b994fac353f643a87e9b364e8ec6bec5ae1ee1e788057ac72f3159bab1e3b56a492d4ec8a0abf9f3c018afba799f74b8a5c9e77f18305056d4c5a656b56d0737a936252546866239837e876495f17e7db3a914efe35c66c67e1be2bff24635a1d3e84b3c76e6e1f9f51c5ccee1d5dfad8cb2c13e464ee5d2ace999502316f842d2f2cf46deea7907eba8e5204539e340304fc392aec1af8239ed07822d28793afcb92e418f914a0c141f0df9ae54afa9be1229dbd0f0713f9e9e39029d1fd7aa6839b1aa5204f3e505d1d3de7b6467c636504a010303e642adb66a42cb7bfd072e26aa4383383970d69eece83e05fd95d67c611f80c6fc5b3b29012564e971dcee82f2e84eb88e29f21deafbd501894624b0eb2ecf1d3abb6a0239592e0c84eed9df5b83a1944cfcc3b505fdb735932b7e3ba3e5bab1906798ca8bf3685a61ae354ed0b009e4589f3c9821528267d18647b255e62660368d9ea1a75239112a0dbe6db8cc1c8924ee20be93b3e81764349bc4159e8f9fe73ee7e6da7e4f907c2e0bdc20187fe1e0ef8975a0a734e61667ba698076361ce54414897b943661a5a6991ea126a6aefab0dd7523c4a806181d70c0f5f23c902bd78ee93074e1f961df51fb18da2719206442577a62dc53f30faa3b06afd8348ee53676416bc15aa61c56a568cacbfeaf2d8bbb5231d294e8ff12340cc71aebb319a5962f9d0d9cfa52eb02e0ea11827649916d57401cc9ee5f604d3ff2aef4c3eb6ff105f27ed9c646658572cd64942b4ab0fa4d352d295c24f46780bd9c3fb28bbda5124b782a1155b388fba85bd8e0b8009b2bd44f43260aa7330b32e2b15a32bd09d7972ff897dffc68c1cb73f1d631a2f36c9cb5d08389d063b74a20dc6c9ca13387f30e7ec1ab5803d278efd18e6758ce0e0d8c5ee7f75d0bf65110466c13eb2326432bc385e519f4cee5d8b0cff9c973d7c37540eb747107da7da0cad36a38d300c70b706073906fdf77bb523004b35daf35c958b82e5e36f4661b44db6902145d469a5b6c5789cfe4b14423525c572b27c02c0577eafff17d7217bc692ab349d7f3828b5d5d480b54b468d26cfce384d078c276396fe23a8aa02fda7915f47165edda511d6600ccef2c741d86bcb4c710bbbf4a9cb2dd5dbd4109c005d274321aad35ff85a52b5188660c4d82974bc0af0f621ac992db8f7c28d1a3ea93a9fb728911aa8aaa033a174d51302dd57dccb116ecff3edf3cdcc0bcc0e96bbc33f2c5bb91a0c6c0d2f9064dc69ceed44c40a3ae307f619f7955d68815662530c10c15132927bd477212049641c2e460628f83a7ae0fb93475261f0bb3081cca13997e73ed910fc8c4c9ce92331e69f77445ef8653803e7f81dbbe5ab9575c085ed1c82340b0c248804493c7a93b8ae8e6ed34114369664bd45d3c1014d10aa8c5d8ae5248b07ee5b4aabd8dfd73740e594c53813807c076cedcb40e7532dce0706662e800d3880765faa9fde22a90130d8c8177858361b6b67f8cbc9ff6e30c1a825994c0c5f75e291ebf7f4fb8f9303a0b574c87f35fe5d72e7527db77ee1f26cb5812698d1b12778cdd79611fdfba34793d238c0030a03be1e7212baea4941ffb9da554b29c556ad9797c575f6e09e61437aeba9e5e74b0de94521fa5f0e8390c99cacf904b47fa97021281ebfb8e10e18ac986bb24f2626a3d010a4a61f1ad7368a2312495b2640b506007d83bd930436be25535597a423adb998a28ca4e56ef3eb5638170b07831fd7078dd4a4a7dfc95117d80a71510cca0ce52200297dd1072efb56b4c23abb4d1b6e7b7bc06e54604d9708fdf8ffa5894764a080ec23377bcc4d26a0982a8d777ef913c2d5451af730e1113ebb707af46d9378dfed38c5f3db579f4b14dca849a700adfd364d0a299e99745bc1f102ad42f68dfe2783e3ad2189b05d1f53daac0b84a3f3f995ad7f17f09a8935891ce28981d299c080c1dafc98af057d9b4212cfb53a5265a41f1bcd9e1c49066dce72b0f1993c7f7d1705c452bccfa6beace0de1de3de17afc8ef66eaa382bf334e81e55994cb026d52ac79513b5649def751b60078130a240537c484735ae9809b16c4b8196c4dfe33dc5250e80190bfa43507eecbfc1942919e8d9936e3a37f58253922298ee8cdd21f3532fd56e3ee72c461c9f2076aa7071924812798aa36ceb237076cdca71204eb0e28345b9075f3957cd90b9c595302b43d78ada8a5e2f65ee5ad8983fe4becd28ce68a5b654d6e889ac69c62dbed69d9746b23992d3224277d3e8887e87c1eab5aad85b6f2f2b7d60ad4f046af61820ae83f03b587bdc53c765f194ab84e9518efc4d970ebd5c500b7654512914f5c9de1deafde4042b3734725497e349a4bfc70da466cee705757c1d95eb2b5c746143efbbd751509ce6f118db96f75fa20b4cec546bcb98e3143d7d8904760bb9b23f89f45c05aa668449be7488c92142a85513cc56d30ed1849a5d2a77fecc63513d7fd9cd9732550c919cad9889b5fea13f9124f32e763588b234f40b654675e8a483c25d1b943b04cf67f558dca015bba648defcb96598dde3ed92a8571a7f4166bea815d112b5e682f7e6290e4f607ab49263bdb4108831e18be08fb8feb545318ed8d9b438166e90b384844365f0fc005cbf60e3647b30a87f1e1efcaa70a06bbbfb89b34952d7c6c27886a6c810eff1e7d6a3615e5e3792ad326989a3aeedc7678738a276a71a9e796ad8140cb676ad1a76471a464e0ba63a58c467bbcbcdf82139081ef4bf48f1605b093a61ccc972224c74291a4e1ae6057a160724d1a50ee974d2b0a69b2123b72d6a68608f4b7b8a715e7997e9583b47047e3115660960cfedeb1c7491ff737758867d9316a7e592045aa47c91c6166829f08b9c0e44f4cfc967b3cf0014c4f062fbd1a829f60847fe39f7a1dd7c46a256ccca225aa5efbc39030cff5a48c2d5b241d7478e806acde5698db33860720c56039f656926340025927c96b4392d39bb14a0ef34633d1ae78087eeb74304986285a5d44ac33e9d4e205c81eea48d91b3cc50a1ae357cac2b3ebec355f58a88c1a55413599a1fe6326b97912f11dab7c60f0207868fff2c5b81e5808f191888b0299d5eaa6a8f32e3f1a877678f48d109f0b0d5a392f11cb65d707f8cb3138b0a0f30cd6e2a21a4a883fcf9d55ee63ec64b33d513302d5d641a8d6ba9dfef097e11e8be14bb1e245f2ae7e64a018c1aa21b16fd50b52a62fb0b4643a66582896a2caebc0edc6dd05ba984a6d1aea0c769bff951e33d5b7ea1c9e58a797e4adc4f3e0851499ab23294b25a1337ca87d942cdb788038b3378dbccbed3b254dcdb8d33eec695ff9f36194bcbb90189d76a500f404ab79b91cb21d410ea296ca10bc14dc0eb1e108b6e36b6d63fe87e6235ee1ebf2310afaaf83237badae89db7f4917d5441ac9124d7b6d36ce53dab472672425564118f2fc44059704db04da5b65de5e80ffc79e9e8fdcb3d340c4be94e049d55b1e02561b4cb92869f70a1c8c1c80125a93e56131324ffaf948e0cacad4cca2c7497ef19768741ac1e04396e82126636dc4641df220d81a52c201b9c4a358433fb64a788e0541661896b1a1216725b5dcd8562470f490e8d246952ac5d4d315b3505b74c97250c73f1141cd49f503b5864ec6fae3d00bae40fa0510ab229a4fc8203f0863f2c5adc4317be7cb4dca038db1bce2336e0165bec8cd7801c38de4d25090000856271789b9afa433c7ad65194abc7dd0a834b144d95a97202edcf3b5de0ecde80a16f066f1c79c8640ce572ecd998f5bbb303ddb782846a352ddfa6126790321aaf12f6693660ff8fd225961a04f9b8c439babb9e50a0759f2081e48ff34e3de7c7f5e459fa07d8aeb8dff4da8307a1269ac4cfeccfc70d911d2092f8f02837db5cefe19fc93e1e972e4d460e0071c2464709237ae2df725284a1deca587fc74d5efb30db934a0f27f29e3468f224182ec545b823680dcb4e9399fbd3dd4fe2b477e63525097292a8dfff0631913e2c5e609a38e1ceaff425737afdfe67b73a39f9f5c3e4341e1d4206f497a536b8b6a08a82057ac7edcc833f4ed7f70af279d096e0e1c7f26df2377985763385c1017aa94ae1caa14065b4720f452696507184ed78deeb4a3d3e077b4c9be3dc6957b6a1709075f893e998a56f1953686e543288a9dcd1536ad2d90b75e0c9926326cf648d15180e5e4409d119e3d64dc3957c5f858ec53484098029a50b378bdc969a7f6e0e173e1ac8f480230e88a24c13084d6486cc26fb2b278b7c219d480ee21af0cf364c7849330522550a75ce4f9f6e1578834e715f3479fb21d081d88137527ff178eb0f1065855a0e3b525c4b020293f430b48a93f1e85726401b4ac257e001c7a7f36bc818ef124dfcc4113ea9599836790cc576dd41c9505209e11fcac5defc246ed6e8b1338dac50f114ae1c8be15d6d093f8c1bec8b104c771fddea5485107ed9c26ed4be67809cc814bde56083b0fd44e70f26510b0d29e944dd0e2c7ba1e0ef2040b319cb33032609d3dd87d51628a13435e4f52344ac915606bedef394f32875463fb2e22277b9e3f345e54b03b7b8ef29fb1c7b755b1f7f1db5ede6d772762f386f653d89b933fa160a62f6ece1aa76b5b399faac42219264df1b6a946a9fc989ffeb611487ad01e7de467093201f77e9171ed313aef946fc33616a9cb452a9a7e88f7bd9da6f324abd5dae5479a2e357cac28d94886d8e579a92290f65ec2e3cd91be998605282f1945e9b99a10833be810898e5175a48329994b628b58cbb329adf696773cde0c20f23a8622f6cd157ca0af233e535279f967db800ab4fe9d7e939cb5097db7d38e19e366d203921cdce3d9232e44a9a2962551e33b59d587c272686287a022f577c19b7a70291a57f462a9782435fd49c28afe7e70f3c75037553b48b89f2f3df5e7dca59c346b0d1813090268e7046afcec2b33ce94697be7a29d2b94c80d67e90bcd374794eb1a7d0419d03f7ce5d0d557e159817e15d04192d4b24ffb4dcbf4ca3fab80e3a2d2721fa9b6da3d3f0c2b9acbd6c083c7e2369a66307d114bb111f0f8d401614955defef31d5a519991637d2af5678e08b633ae935e4b2ee19b46cb4d2686c5bc2183ef640a7592831cd84f999707d7ef2ef9472ac3934597823d0ed7b02ef7d1387dac3dab9b674b9aaaa47d17a4ddf1cff6083b745cb1804e2944dc272a0ea7810f6157a97037764b97b7e59d425d082d0d14c408d578cde9f8063e5ecb84a3541925c603fefe044457f6127b6b6f774bce2e8f4249c321863052e6409ecd2bc9e58b2814d4741fa1745077750ae84265cfd07b0937bf0b278af9858f0ed3dd6f195808683c22af48147bc888163aed8922f52c7008de04509bc161ce82a2a42324fa29d86cf9a9afccf902d4230c04aebc668fbcaa81d082d68de0d2ef2ec8313180c81d5378cffef38e8c5d8f773fb801efb06e938497a9b2664475e9e56e75d136975ca831ef5328eac5e0338293b53d2f987be54301308583d6643eb3198314959e377126f5ddf6fc952ffcaced47625631582c2836f4e4d494a7904bc7a1a17083511d66a2a6c7db9d14fa8967a2012f30ee8df236df0c7426dead133ab41e45639622a7a7e1ea96936eb0e64470a558dca812f1fc55859b6f3929fdb73d950b30e1297858e01307b08635f8c913a47a7cc75ffb27b32778065646c862e96a5024dceb53388b1a9619131a9ff60cb918c5a2584febd6fda9fdc41c51593228666bd5b373a8c4d7af29e50c3a98e5499c7f9e9c417b814b6ccf3b83b0ba4a7c9da6fbe12c66f0901eb048cb97876a43b08de55eed357a7e58c82c49a9469adbda2053fafee5a50ab76b328be58ddae4ab09d3b5a4f4720e584e513349f8af20ad71e62167e9704c5fc14cda0edaa41d17122979a3d10530bcc40ea6d21a1ad1776fa5bd39d5223d76ff6b49e19db40d7836a8051244e54c89d391c57d124341dbcc53c2e0bc83b1c0b55052d93d1c87d643291c76fe17fefc900652e961e4083c849d59e3194e7e49e06b29b4c57f7d4721f29213bcf6cfef0188e5c5435473662599de2f28966ac87fafbad5e1962e24ad9e040bd3e100bab8bd22268a09e08f5f3972eb5f0171ecad10d255d23f9a4091e3ac58ddec0cabc131ed02619acd50a7e9040571465e348b764bd106c7258dda58156de246a7bc3c7722ffad4e18c7ff86eb1bc2300bab15edf763bf39be09aec1a6ba77ae07f8748558aecfbacb31228f7eb1db147bd556eacc4f116af89d4bcd761536d98e05fd04c08e3b1f72432f5ad99d7edad766835c6eb759beb400e6040af372a3d0bee61fa99ac68a754417d4325eb73f867f7473afdd870f5fc008e84bb6fd20f4f32d5154ceb471852a31e5b981f0bf16c119122630c2c791600a234e9cb94812dd80a8d86ec9f7fb4139569bdff1c86aca3db676147ce41be3c998fd5f11fe7ed38f93e53faaa9d29562d6c7289f70d0e0e190ec99cd6232382232e537e85dfed7bf140cc67c78929eb8a92ac49aeb69113a3f111a750887ec826b16f9ee653a9913b978f98d1b268e894608e4286510edc11d472c456eb0a26cdab6ebb53af75202fd486080c9b4ec39fb0d58cf8edddf19e11c7f1c0e56d5375311c2ea8fc1157652425d430a1aa4386099f7bc5b353d4b18028a0e0cf5da96740e6495f6c52b61df94548763027da235569dafaecf16e87ae00b0e28023a80d1cc8b15adb26f3967dded5ef5377a2910ccb2364091cb06df61aa2d9ea5295c30c7360f2175e871c164f31cd08032092e18369370a5697e54d1766b64b39e9b1ef19ecbe5a25310ae941e67e2007e06a943e6f85e4fea122b0ca7a970beb6e2191b52ddf46188d8c68c71837ae60b5359f0e7c1cfbf2db95793054ef460cc93d22ab7eaa51b1ff8ae9868ce64abb029e300dba371becc517fdadb4fe0a646ac68cf9c1c27d8f9369e82c7c8c241f38edeef69c116e64a802540e20cd39f288732755c1aa924858fe168cced0a37c02c603ca52fd6f0cb00141976fad5a05f4b0f684556ec32a96d4d941f344bc837ee6a1481e3d1183105a8fc6246a0680e16c714e20d1e8ec8e011a7cc749046b55bd8b3370fc21332bdc5b20dc85233ee68e1ec162ef16f533e4e0b8163ef5c262ae0ce3c3baca8060c70217992a19aa5bab5891e38e110252a0cec75bb1ba44c2894edb36e4719d56e39985898f754b925d8049e937ed508f023cf96a67177bca569b28dba0ee58c11c1e67382b8dbfd2bd23d52ef79c293ecf6081048aeef9368e11df6142e10cf868cd2dd43bb349ba1c2dcb2ec64c67bca81b0cfb25cf0756bbbc1b1e82f205316356e88571612eaeb91f5668ce13d90568801d72c870410d920920191739e1beab5765065be088743d32e8acfa95c5d21bab647a6684f1d8ae5715522f4b15a2143caf0ab68e514dadb6fc4b135eb89433bce3d5272131460644bada251328343ebe8b5e1510b25a279373656195ccf5f9abe533bd2d12fbb313e21f39aa1ff7fd703563b610a66b495a09b11b59efefb0c4b2508f702ec222849dc88899be43512ff875a3916019dc8b59e24c1e7d531573f15177a0836eeb418acfba6d1496ebc32e55f14eb6312b24e7baaf00640bbac268b22177833f3801d6093aced1439652364a7b75879e2ad891f1b70737f28cb55cf18f4021ba442e06ee6a41d4092644c8893efd9b713da24279304b4e054bf28f4ca9de5741870724bde45f34926f9aa16b1af30b9812b0c99a2f89992e1394ffb80c7ced8e1d764b42b466b22b1494b80a9f81596f1174de46dc174130c2abb0065f4863d2c10f249443c11802459b510871bd7821e656a7d1b9d0a3f4fb4ac2b04095c821df9c5eafd9593b0643357af4452209e6f815f7c288403e2392e26472db69bbce412662ff514ba273b3d14d31225a829c73917a518cf3478e179cfb854345a6c0a7cbdd960f829ff58cfdeee9854ba60c4976efff902886872853ec8ab5396fcd89557004a147abeeba558af83104a8878a6963ca60590797ae8d2c451da3236b4c6821df0f2be0265ec5abde4cfeb1f6512a87517bb2a94bcf1ce29799a4ed08725715a8228fe0d61112153c55e585617198e34edb1e3c6a7bd4720473a549e5732ee46f560b034f049eed639522cade7c9ff8d746c83d737742d11d83db3167996f9e5cb91f43fe6376a051968c5678052c19e6edb5b97a8c2843b92b6bd6c90c12d4eb5ee5e539f884f70eb8938126eb0950b73e7e8f6f4f0bc992b46c14b323096a315c6483da06b289c890b61bd758cc7672f0432da1e403482dd1422f92f47a878b744ae4c5cf1cde5a3e399e33badfa7816eb1e49617a8b6a7dcfbd521b0d4f11f249f9a533a2d7e1eb1d43c6a51f8c85ccd651182fb977a48e5e7405f956ef5183f58a372fc6335f6383004c3008adea0a4f8c650e8b4bd1a78712f95c1fba9071f0ddbec010c3a71a892a5d0e4aff27c84cc403d5f8a19355232022a9572d2e82f8796d1e6d4d008d154338420d0c71809ee6462892b5e8b3465e8a8674fc0e4e7185436cb9a8a373eb8db055c16ee0e50579172bc5682e603ca1273f6ea77754c8f844cb100ea12423054f1218ae8f38da43107529d97e29d5f8f01f896d6fdeb6c2215bae1c4da7305650cb4d6b9458e4a3306ba9fef7ec0c53fb208e2203bfba79420f04950fb91f0f29daf7b86ad4e4d1fde5553e22288a1ae83baf873cbc83a2b682d0d105677bdc21515826eba211507e81a294ab33d3cece017f85fc326dd5147f40e3605e52995f3bd6ca17fc40921e48759f07f8440d52391f2cca2a2bf8a84474f1f37cdacf155829f2ee6cc967fd062c07c25672fc92bcb64cc709ae6c86df3e59b980fb7ae59f1bffe4662b79666a447f6ccbc6bccf4d92de9239165b726963faf1b7a5e2c83ccc4063d8af5a2ebc0a32801f4d76079c714102eb654aebf0cab7ef2ef5e2f41e2795e73b0ca8b67b8ab9382c2b0ae90d3d06032ff9bb622ca77e0c0aea7f6b741b2f9a7aa9e781d31f7c81526b01f8e9bed021f756c34ea05f3d6302da24c94cb3f2d304e46660e9e1d84977093848f7c4637990c2fa30d49bdfbd7decc645cbf306523852d8a164f821899dccf7f3f6c88ffc0692cb5848ad3ea4fc18cab5922c415b1ef36a54314ca9216623953de236d8c2bad55714be91c0340d2dbf996dd27e9c9601d00773ec4c9f0da4d28c03dd7523711ca6f8d97391e33d6baca94d9e3ac10faa51fc52c535d793cbbde1d28184a29ead35b54fa05ab33496fb19a3338a1bb1fa7e28a8d22b9534dcd1029f0cdfd5f2231fe80d360fe8c727e951cc753b21c5256982a9a463c0b8f02ddb403e1cae41611237729710048825dcabaa21129822e38b528345c374fdb98928fcdd224e6e4fa7768aa9f4cbb50e1feff7b9a2a84db239f87a1af881bcb4f599e96392279ad4f8d983202edcf2b41edfd3366710770aaa8ba5d2e8f0d264973ad663e42e8e553eae4b3a45ff04d60f7f1793451ef60f9967372bfb96d821a587bb21c2f3311a2ad210352a7da633f53f0bea23bd26bbaea9578f392f477dcb3ad72a2893deb339a739fd8d9ba7c8ceae612d0ae808712bd3cbd3a9f67473bb88607d683054ac143c6ab350ee9d62198360c8b092af5e7a5c7507c5b0340d42d849fd65052b598991fcc930fd708f69e07152cbb48a74627e074bd0f3260e005fa5dca591cc9854ea32977a29f65186584410b9af2e486f7c76f66c92200e355db658b93069147f0aa822a934964f82474e26371dfce49c2a14ae6aebe7cb734a57902179ba93a2dab76e992db919b48a710d61476132e5d59883d47fcf1daea97248987f496bd9daec88589f2e42606f5fff733129a522e77704fc8d6a77d414529ec23004c2a8dfb4a9939faf8e9c234dff31f07f7d831656cdf14a5126e05fb781e87b3dc5d49b5cdd32c99841604b7d22fb2f4922a35f5388e165944db9eeafb1c16f361f4a884a34763416425db7d5999cd5105295ac688a1bb12b19d577c30493e38b81637cb3c0dd37c89839c83579d10a0f5eb1789629b87fecc78c6aef3a3e3293686579480281c5a6989ce78b19ce080648b6eecb03e0bccfb9239b827645011f69eaa96186eafff04195a3489195a27a7dbab6aa03c903abf2c284a950872328dbdd44c692dcb88d4cf8cacf7a0a14d4e2c92e54d8117fab53611e609ff1d05efe73d5945499d6fd3ec45637131377bff253d56fe96a94861cef66b151a95a74bcb249116f4f9a24617aec5cecd8b5ed11e98113a98e7143fe0f2698a51921fa86635dd691e2a7b1306e6566787a6e31fbc5e1c1e2f186764b58c61506e8b2eba32aaedec490048f19e5a9a3615ceb6aa669f344c35d1a7d2ffe9d6dcadfcdc1563cf3ccce603fd8d16762494baa76a3d32eb02bfa5b05972f9eaa2de61daa029ada6dfbcea5468c3e4ce9689184643c83267a20474ac9bb8d1bbdb18547920445ecb5395be5e492010290430fa1c2eb09644f279c4cd328c3f96a7042b5bc60325754f4a486a3290a0c35871858aab3fc238a68f22f8f8c987f78f3c2b285f8dcfadb4c8e0c9ccb70234229c23142c4d5f973b3acce2d8a65621f6e9a0a8c311a7e4828d4362dabc7f8efc1eba39d3a09203fbc711bcb56b1be088db5d168d83c556bcefb73e536e10d94ee65fd3b39be26166eef606b515ca4e69b94e5bfb77e7f6f6789a3f14019e8cde83493dd015019f6c8a29da069b992d6cde6a85e3781b9f126fb4d9fab11f1a958bc515a11b0cd9098aec14909a8b4ef4b4d8bddb78400269d3d920760f3d64b1984a2679b12377dff800004c16734674d8ed8e06f4a1e4fc35448be40a3dd4311d3ddb817fc37d57e49eb84ebe49796b5e32814b675349e49bd1b97d918aabaa9a493225f2561635339ae6173fce4bad303d171452f6718e67baa8e1353583f989bad1796ce2a89247036e64f1cb6aeca6ee2d5e47f42c804011e19af6827272bd6f4664c21a1842ee2e0999eefde1cd2e164d3ca4649e1c202c0670cfb0c4e3a00621b3dd18a67ed9a92888a899a86b31aa6342347cea627b9613bbdbcf34f7c125c76e6b231491007c95d2915584da540bc9ec7924f2c4ef86ce92936564cb42b10199a161e084ebbc3a85d5f6fcfc51a24b9439cc10f014893fcbb1680bb9ba98ee57d559823becc08f29a616a1930f2b10ac7c9d5590e21851dcdf236fc77d9e6e01bed4c011de80b42c14acb6bb570f1bfe3dbc4640cb9993c7f3fc8cb13ef62a5de742a86795ee4f6552fb0f37a02c28c95f539b7bd343810ca182fb4149c23f936fcba7b170665e56a4216f55323cf04a98f77278a7b8ddf27bb169c532ceb5321df2f57353fa5830748282e5c030ffcf53f7d40c9b949fe41d98b83b35070b0867adf96786591afd3603da09f3ecd9a81671abbc5144e9cf1e7a49bfaf975b4d3a0efd2d47aefb401fd9d752aa13ec0d088654d18353e1ac02c4a03b46325956e8c102b43ba796b6e1b1514571ce24fb9b7c647aedbfe288d358a47a5460a4790517326083451b01b312ab52a21d68e7742dbd5e0890d8bdcfdf039d5bb7b3d39c642b59431955fb04d0f9ffd7a0d45d215ed624ef0d53e2380c36d289589c37c8807e885acf58e4f8dba789095856361b540b1437af27db773809be8384964202687dec79a5468b018c1a32a2e51fd8700c215ce0668b034ad01dfe4e8c50cf02dfc6b4ae77f2efed8ff6f11beb016fbf5b31c862263e77b708ddbeb319a7dc63e482d6cf08e0f0c18883ae3b21d4d2562e1e9d37a9653aab1b300b3c0d1b422ee4772cfc6cf914276ce870ed4a15ef9d145794d91271fa04bcb42c5f07559667f69dad831debd4e68081fd824233cc8dba56e1bfcba5fc28b805bccff3f4112c5e27d1ecdd7999009ff5bf02f94ed1fe850a2ca64eb88a5761bdb3dae9efbc8a54764b0ba53c86b05bb5cb5d6f78a7fb10c90de0da4db8516ffaa1cfb87939a3496782fe0fd73198e990bd2e1655aaea71a77320108af6d128eb38afca280112cf103642ff7c1a0734999cb3453559f8120f54f040155c1cf1baff4f2e8e612b35da3a99a027bf0d8e4f8e768516948f6339f59bc2859a9deebbd23cdb6f2193a08de3a6886875962ee6a94c086f768a94c210338f3c42601feb3ea3c8b17ef8c70a5c123b6add7c51137f3f8c509ef404e3d56cd6cd53d0a77a0fc05b8bf704a5aaae20685eea8db42e7c7b34b2dc77d069e067e5110215ef2b3654185938afaed2baa34221e5e19d74127ac061f2de16d0b0fc938fb7e63399de955b8c0feb7cf771cc11d40799fba622a9ca29961e4d1ca8b3768ef069ef410a8394e87bcdaae9f527fe6074fe34a29b064a7e3b586ee06cd624217c0b70a2dd9cdce340498eee3bfc626e59425a868e46287ed6ec237f668a981049b8577f9f1a8eba13443e0f79c8397a4fea5afab5a8d4b95868056ba909bc797a2197d180ade654c5c650ec15160c22add3fb68119b3c13017c934e22f3b3868213451ec68302eaf1baf1f7da16543131293147ab3c89e2f5edd46d3af4d0aca38bd6475798ffd7b5913c2b74928f3863412c559ab8e0a5193c565471756e7eab7e7894cdaa7bc0698b5cb885e9ffe83ff3b665e57690f427d69afaeaab098e5a95631dfc0013c236772161fcb794b15141a5756bfb7291adb016b172980cc0142a863c2c7784cd580ecaaef24c0ad556303b7e84cb88bc006c73de5a1533ba6cb23ee7ba9b2957d3847c5f2970f1419883c376d52b3d47e5fc82c53fc203b5f119ed70596ab758ced88c778b8aef517ea6994c8ed58fe050cfe1eb90e4f5926964c26994c7ef9552e635a97bf412f28d420a5ee4122d34d29924f097f0636cd241b1c7d3232f89f0ee619c740ac7fb402d79e6e55cbc6d05a50c5817e9b067d0e6472b11e5acd895549657f6cc858d61c64bcc84eb77808492ce0ae4fe3ce6c7fb951aefef1a0e9a492f893919a79b882a3da087ed7e43f5d4a0f175abdc640cc9241bf57c0862431ce519958bfddd21ac15db03d2a2252f60b0022242cd53e02ce20ad9619fe5dba7378919c1fa0abe3926a6af18fb54cbcda784a5ec289e8ea331c62eb964f7483b50ee7098e70cf5b88e0661c8696f59078bc047df0bce9dd1c905227e18eff669cf81c050270ed9253445f57b5d9cb75c4d3041b4d805430b774d29a3e2258dca87a0341acc03625384be8b0c4abb244ad19fa10e39674ef2d63cf11f01da2844d7e2c03830de8f07d158473ca41b736e192d6b8fa22fd813c415824e26289e9a99f09502a1e8eba8d79928b54ca3aeacacb6cb866b516f935e785a7a48331ab3d44dfdfdaff19366240677b1f9b7d5b1aa024e0b0a202209be92dde8ce67d3a9b02cd6131746d0a4f376051383aa5270d4fe93122d75bf7d7eff8200516423d1547844e297e21bc74b47fe8fe4a7ab71715dce6c8f74cb78839a493af30a21614ea52d358b0922b5091c4b7d28b4e9a7374c10188341943af2cc7e4fb07988886806abd3eb437c4973bf79e27d2b7208607c8d1884964e6c0410ba73492c57444a526ec1ccb410ef1a6cea3569d3bf2e330b6af6c03a90449a0770dbb42bd71e9cc4eb97bca499c3b58e25aab8b12e7e7a3397cf90256cce4e0d2c139708eae30540400b5d7ec03fde4bf7886f730071199a124a52476079c584417e761ae15341e857943cd6afbb772ef6ebf3f8eb17595bd8cac77611189f9e15fde53b98c66eb7f5cd7f9b95680dc4d26be9fdf30faedd362351012c6a01705c0a77a061b6e1f0f988339d5fe422f78084cf90cf110edb4a7da76334f06062843938363d3a2190453a07df00ce8a26e7370472e41ccc02373b6b2fa583aa9f90bb139574413051ebf1c55ab57d1378ea15cfc9863982b2e07e4f1a7ef4003227e0ea387dfe0f2382ba0eb322cb05b57d6995d6553af761e4c8a991f718583c1564374f8faa73bfebb301b7e6edb59ca23871b08039b5a93157568f75f325cc480b85cb550cf08678a4ec38d4f83477589c0e7dbc923b5edf466a627adaff926d6adfd21d686b62736a5aaffcb8644119bfa6a7d51407d3c4f5749008874ad3a1060be4b08632e677b8507941c043c7acf5d63da1ab3c5307f5099b35bc9badead13e1e41f3801bc4b1cbfd7345bc4011b212f010becdc5f90c8cda85ab145149fd63fc0690ea0b0c71e2d90e6d80ae94506cea90e95960ceece9b8c0128d29e3bca0ed4bf9b7540f8f17ec5aadc0edb9e444ea5beeea802431d624f904567756c22cfbcb1d07364cb30f41c9f0b00e2beda58d1bdcad32587dba6f014cd6d0866d9591a9e1456328fd923d63a26c700349c1e8c7dff117fc9265a9f1364c1cb215ba52c87c215eb1b6de27efdf064bc425040971755f246da9f36906dc71b39fac6e715d8aaa062efccbdfd34d151227cc5bc59bd2c9755e68fdfe5893d6d543c0c15c4db5422f1506639c248548848dc05f692cb3ef95a5c9d53dc20b830b3962c806415e1fd5b63619f37a4aa949f8e28195177e9506682cf2a02ed02c4a9cc1192a325b2b195443a5860c56db208b274353002a10962f452ff6f0ef67fc304bc37ad45af403fc76082f0d0b094588f50315141d6b6640640e1e7d1c28a637b922df65e1ba0997fbfce0cc763dc34057c8f504ad928785541342932942edd5b63a0898b9e27e4cb764a6f8601d913596fd1336ee58902a8598ad57839e464718585223b2dc1604a86744aa774d8fd5f542aab60c691e57a3fc804d424a87c80e04b600bcf158ce46c281defb84f2e2b0d8eb5ee7f8d684b73165b461cbc59ff8a466dcb0b1c658c1cb0814afac7db837cb6effbd20b183ff96caf5a71ed374f60f5bec63fdc0050ef20f9bb6d423efb020a92a7f5aa51a0d9d253f5376eba177567731fad8e591d1ed9539de7d2500bb07dbed66a860e63b3970da90c70c146bb076eb5e861615d99ca9bb46ba4cf4dbae8de0c549e455d8cc46af5ca2004d667ab8bdf07255d8bb0bc44f7d5eabefc452812e2b4601d0c4e0af4c28287aae40af9aafbfc9ae1a76c4dcfd81a0a879ee59a6b6b26371ed3bf77a3d978039bacc1210455aa7a1d43680ffa1a25fe104ba62cb35a4018bac83d2b922406f6eaef616230229a899d0999445cde52a7502d8421f67ba91e4d391660c213079df680c8cfa9ec9a281c39a23d2928d7a8a569b6621f34a95edcc41d682dbe8be0826ce647f904d6955a02fdf523e143b8a2b07538baf80ffe650efd9def74bcc34059b764af03ec2a26bd8eb51c9be7b97f3a19aebe68a62b0d00853b7a386803622da835f07fb9660f968411746bc2a99f82376f37c443636d6d9993757c06ffbcd56a9a1552a3ef1410a1103e69f897b8565dbb5d92459b5fdfbe08b8708e417ff76faf866e02eecdb207280b589b009bb48bfa574ef876e7b8618a347a0115be1f29c030eab5d3d1f8b7c2ddc0a1d978ad17118dd9c0cc8fbc1d8edafcefb90200177de4f7f854696f7a9f1ef3a4644a1393e1309a790538a8e412e12d0502ff35683ecc8b4d8aa6825b71ae137fe7c0aca1ee82c26c45bec75842181dcc07ca1c5818a3806af3129a37b64229383ea29331379bd647715578b4eb1553979fbccbc93c1388516ae2b4504254ba155c8c5f680cc7a17952f24994d8da7d549a2c15f2989263607ad33e671db32a5bac9057519195f525385eee704cc1707ea667a3ff71ef1400abd3a6452c2c76dc6049f09f114b75ca25a11d87825a46ab9558998ef5f82f4e6b32260bdb1fc221578140b5776e21d83c09094cfcb3f034e643711aee48d5ae0968cfe597a23aa19bacea538ef5905154bd0341989637c100913b7a6084b82795ceeffdf272f0f93964cb21d0e73af76cd0814b44e10ca0c75444732ff7e57c697c92f05093b48142bdb32ea6603e79ff32dece1b2936cb5c6c2ed9769e1d5682f5f8bf217cee1739bc9bde9164efefa4202f6eeefb05cc088ffec338ab0b61aae805fb400f797e8357cd832c5cd8c5b3f98df5b082448d2c0157a784868005574b61d7a7036e9df84921ad7fd0f294de881672646e226252754c129ee4e7b19369389eb937bf77dcf814a6989836356c60ee489e60df3a565615c4c25b7b033fe6cc6c4de5be9bc456f20fefb4d00e06ff410d5eb07574213ca79c36c924c613fb1c8189437ee797539cf958ca86eba008ffd73cd2afcc164b807f11c06c7d09b27958d97b5ff0eb88966e3222c088cd2b7a6135b87185317299b9808a9ab3b029d119456a7c295ea45edaa041976448f5cbd085243749743d87f21c40e0428aa3786038eeb0a3dd86abd18ff343903631f10fcfaaff601268ef64ebbbf82088756c5e1718c12770f11f856c66fff25480371235f58c199ce68e8e2462313dadeab94bfe7428ca119d2befbc93a2f4d4459a0f155c4771ac0a561f6638f1736d594b89a1e4c352c5769c0824d127f9026b8f5a372e6858b80cb74b0fd272a9d442549b6cf4806a8a50e5817d25c5aa8f40e5ae7c7c6d94c1e5da4c3b388e300ae897e3237b5608b592a6b98fe64a912fd8f10d765729c4545ee9d614c67e94506515cec9d61bdf4c516df989513c83a6239103d2bfb54e5a50a8bc681748788b11551c38d569f77f16e8aa24ae8bf3804146f6f9b7c078a3723ac00a7b6ac42422f133e5dd8be5ab7512633d0c090f460e0b71f8db1cbceb8b9952c391c002d8890fce758425a2ccbb96fcb714245b7ab20e4238b9dd9f342ab80711db1bb618a09ece74ed4ff4aa14d271e0571aae11b0417d82ceeb82a2cf4acc432aa3388a594fe354815f5c33d950525535a95eb5e6df5e8ca81d4fa7140cf76acbbdf086c4676c16ba8f70c93b77772906965603916c8c4d307e9d93b1e983f86a70831d235434aee88c3196c42aab80b3ee90593241997c2650ddce76846ce7456c43d592caf37f5e7da6600d984fcc0f7f4c7b2444ba1a685f91d3381fea02782a460b3888d2ab499ad1091ae98b6cbb235f33a80d4adf62e7ee903813c0558b4b027def8661b440b4de18876890d00f9640d5de28e8e6636315d03d99f79fcf84f795ac83817233c9c656e68a1bbd96e8a615601d25da2be6ce5505bd2cd15a8a7943dc5d718c9c8a0ac878ec3b680bc90f9ee79516170045d863ba59d0079155e235cb37bd2532009cc389e64b74ea686d3eee75ff8dd77f038ccc329f1e8947656ce7f4061b78b3b964cd5312b5565dc8503d1d4ea89a1c212dbaf16e67505e56ff6cb1ab6704c0d0114fdb361ab52af7377b7e3eabb64647279b3d0694c040dd9713c865d0b9a0274a2fded953f2d3beee49a062854efc2594ab3d2e12d5672f4e9b218fa0b278b6a6efd7573127d5c0d52c8b88d53da9781ef0ee59a5e29e1788054653d170f6d4d58c29774a0ec8ea4be1fa5cde0cd6f222822d30312de93953915dc0097964e68f74cbbc805ab5f4825867377ff43c92a02578b835630a25c3dce8cbff885ba1ff1b922b9ee82f4e688b0fd1a28a159c18d47902e21c9ce6ad42e9bd0e7ad6ad93849f43b5d55ee89307a929286328921ac4248af95626df75ae4df549dbe457bf189819e1038bd67c0487f16a1a4c75cbb3b2cc6823115b74c71e5f0b9cdf0ad5cb89b67cc6401d4b6220b89a6306cad085646f5a7895e82571e93974c8cbe3a3a8364acd4369cff5be89592f81c85ce524a2427d69ed25f7644f84e60c680248e47853fbaf819277a9581efc4c61b497edd46ae8420ce35f1ef9242fbe4342c55f72baede623ab6bbb9a64b19727b97b11c55f635e9d2bdd48e327c49e531f3143beeaac5de7c96cdd8db3a1a5a30b6dd513a8f0002924ec772e364dc7069b505aafd5234c114843b7940605b5ef09c40e1a756cdc8a61cc810b82b9426fd9b4cf37a8b3bbed3457cf68869e551485b886f8dabe27be08f38e0c38eda84697fc70fbdb28a1e98a92424e4d12c24d37099c2c601a069733d455b80eae727eb998d8f0edff3bee90bdaa301a47b02983566075d8239f4361429d9c9f4932d117c3c68d7280e26dbb31ed254ac244839c8bcf47d9ad9eacfad23c1e8d9c9f58a42a82277edeb2dc200680f2b888e7b6aefe7b640a873249ea4dd132b26665dbc86f51e76d8b20a29a7cbc79561f84dc8dd794882793ee34b6d5ada1e97cb7ec8e9bad6239c986e2821761a61702500e2ca5585d9c47729e1b6b277a0caa207a8c515876b470362d89ab41a2103830734a32abd6142c0c4c43db5b3e6d80b8c3e7a988a1c2654b6fe9b306696ab9c54cfb37eff2c79d0ea749d7c7cc082e9532a5c47b805d660e45344a4319babb73dbe742dd4d7cdde80467074e2c79a4248f0bb55aabab26557f94843af5e209898b04ad3d64c9f7d9e00f0b7b289775ee968358c335d1ca7a6f0d0e9f4dc10093692e05c38cb04aabdd72ae9b815fe8f474bb7ee888fcca49268178188a08531f8b6cce750d7fd03efddc8dc10c706c48a5d9ef109e338ccd5722ac002d71e5a9e6c178cab349fa5c85c28b2ecd05e1c0cd62c559befd13e3e9c6e18c5e7d2154ad45a4e3058e1b8579261330a4ad684c099712e14d64e8ee7244e431928ba171e59707a59774074c2161ff19fbdcadd603a5eba13a8797a0e24b14d82ecb05beed073a0004f571daf490ba8be89aa1582feb32c91dcf069221d5fca8fa770e3bccc76e49940bd9fa42380c6bbd86cf3cac80ea04744dc5470271aee2b497f43b5b059a7cb5b2300f5206e9b207c2f3c2d88d2fecb6f238bb389ad452084d7b6a0dd1c1bcd0080db7d0736f6528e6b7fc95d791fb6d931459bc6d3e227ea71618e9c09b1f0cf34ad46c8c7902ab506ad702d35386032f0b75a95e3c6453f4b127612b20f5ab42f1114a4cd0744ac15b3c6ffa768b46974db7f2dc7313899f5e73d6bcb40ca26d708d2033170bf18ea519060b24506a4a8324912bd74e6752444ca119b444e6a00d16ea168090e7755b193ae03e211439aa9503cc93ebbacb5f06906dd842e722324814ddd1f8dade77f71fed07682357e311d055bf0d2e901fb1abcdcc476d91719acbcce08d6d4804429feb85f6304a9755e0a86bbc527bea357d3c2de9c8f467a4573948cdb3910b9f829dedca2a1f3a9bdcbbaf34823f925231cfbb32e631840e761aa0e7f67d914fddb57ea4c6ce9f485d1bf4a5d09b461424045614ce207aecc6a89d6ee9fc18ad470990a6fcef5283c928835079fef982d67074580080fd863902b10bbe18454f85d08cbf7488fc5418b03c5a73cd9e499d1dbfed392c5f16a305ed295bc8e24f2184d9ed97a2b42d5028506f889c1e6c0b868202b7590a771056e765b98b2ab2333dca959e4246da7d09783e1339fcb56ea0011b294309906c23144eb96f9d12b9f2e68a6081d0022873613e8309b6e76bd78fec6dcd9e9f2c21b8d31412ec9af03205d3c45c4906e30c5346e23f813a05ed560e585f27e90e1a46226a8c06a5a8e001ec638886f3fec6499016db0e6bfd29fb1ad8ade23e0791a46975da90946cbbc9ab0a1cbdac8d7a725f0b3101ec9730e032d210e194398ae7f93ec50108c3e5f610e938317cc28b401a7c0dfef38a9a3f40efe383d1e1e667b3a22b9446419a7934d077a659ed3044559599c833c352e8d3e327b57ada5dbdb188e8cbbe8028736c6a45f719fb2d0038d30412ae34ac44d9f4d6045325a626a082e22187f4e418cd84f9094e680b8487cb4d530b9ec8a4e0ac3883a4f6c49309161df140d9b052248c2c0a47bf810d5a22bf1c7cf9170bc378a2bb4d97ab99fdd9861b8ded1dbc57b3ff77fd35b73a0463d07991566135e45e26d3e54222b3cc095718c9c0d3efc930f56b81ec4963dba3db34d0253b2139c762dccb53e2bb07c61265010ae6f4ee4111653121b34339a6e2c651ca676d91fd63466ebaf594416b6670cce01e77a1b2b9645753836b38f242ea53f1cfbbe7e0d06489a4edf4f9322e7900405fdcf1987d590866d9f60ab26d40f86b187ac8c24981f3c47a9513e54ba273122c6a0406b235684e8805879b17a4995c66889e59072da07dc54cf4fd007f66b4df34a68527f42bb5b3ac44d857a1f6d0907d4b8d6994580198e699213c6cba3fda6f999273ed6bc7ef0212bfb811e48d6257c205495e1516474b7fe48935b1bfc81513f5b537f0910e83648e66b84eb69cadb38dc0781d3ef82a0a664bf70e5e08a7c12f0fa0ae50b89fa6d9a8d32d1d33e0cbb6ae71199c9ce60c39931cd9af685afc741a6f091b1459e644ab7d7b411c67649d2e8a8215220752283d3d4437acb119bd431f7c693b645ed3e47a4124810f7b1c2964cb8f672f575989f99f19969c58613aff7ae3830d920d215169e2e42beff51fe648ecff9706d0249baff60d84bd451efc8a2ca43716e91c6890a3350dcd55d946d458d6f16aaea8af839d647ab22bda81f356489d604fa875a7202e2dbd820426f892d7e1fb5b74dcedf8d0e86f81bb77198bba3d01c5f6883a346178982789f7ffa948755959b45c39718c20fd7767a51f36696f617ae3cb6fc7a94ce9a9bdc26fc40d16986615b70ff1a39d8ef01d4b3338f17fbbcdb91886b3af479e2ffa14e8df8c8a9966be4507eb6a4da2ba5ca8d78bb54b2b3d3a6c1deb563525204b05315893ba93a4990dcb6a347c41554f6f89b79e70d7eae23335be28348094c6438cac715e276038b48c75a3d01ad931eae6b7d528846116ef24b08aa55a346c523c1cbcb1d49e53f7cd05bae1a63d9c186c84a9c129128dfe786ccd42dac826a2ef2f81bd78dfe62b28f77316655f15ebd43ab34063b3beb7ca6ec00e62794936158cf8d908315917a17be507a2282ed21b1ade7d15993373f861e55cd9af1d11a728e2e87533da79a0b565436fa59a2fc6163ee465df2f86b0ec698c857fe7e883810b986ff15bd82129043677dcc6f734d75ac44c6734a10c9beec05eaf680969aa0c0253f9f78051e12d881441409417441ad8fe20d4226c83edd28fb7103cfb6e8dd77c75ac4b76792675a80cc725e522d4e385aab0d2fc77d3cfee7bce0105694c7564475cb9a59e5babf7e42536e3bc3e823474e4a53cf6ea3424717925c4e8d6475c42bc52fd3bc13c3b45623ef0e25cd9c5c2fa4efb2c550e5ed5a3323e2cb98c16494947eb4f1c327a87af87b58da6ee3332bcab0f67f48752c175692d52b8a23e6ce2d87acc1632230bdf8cd0422cf0934b35fc8161a81dfff51f5eb05c09e1b22db1b15ff1e9ce48c4a506d86f130c0a41b08806e30255f0575584e8bb0805d1bd4c7825821c5b6a85fe73c683d4721be4cddbba2e49e981f8adbc9eacff8aff48734de83a04d6ff81518e7e05a31a0f409cc0796ac1b9dce6fce3b51781a21d8f1c63cac6d81b60df864bd15eec0701c5a589de66eb336274f51680827c9d8ad818f65ec0826f3971d2c7ae6556e56b6802f2ff96ab1d3901a7b0ee246d36d8b1d0b245cc2f08c376f0dc98a3114bc4dfd32a98586cba9ceb99029f6b7710d91d53491fac92180faa297842c95fae5c2751efd447ce24e9004e8688448c74cf7216d847c9ac2681ef5f7f768daaff303ecd882af799c7527c8d9325950b195e2b65f2b98a83bdfa5b9ee99e3ce6f208112e351abbd4b86544f48b0d457885fe3ab8d61e67cb34e60900cb6610fe6f674cbfba4a1c767a08f36297bda3daeb38b703cdb9b62ca0ee3835297db82e83af21a663c3a20c8cf188ebb7602863bfbdf4cff209a3577bcc891d64ee9e2597a4cd144278b371c3c55962389a5c1edcab34bbc61e6fd6da64a95b7b3ec6427f030416d534e049e95b4919b6954f5630cd3ed5accd3c18695cc05c5adb32d8afcd03fd1e18b6a46e59b76d08e1720075079df7c6851d30576f67075c25f237302c2b77878d882a6a2ba5ebe059c6ed7bdba3e5308ba00b0322060c185413b09affcdd2126d32439b7bca2df9e8aeb96c17767aeb7ea02e737b32a1ad991107dd09d4fba859e1a39928470199b67df672126fcdac7d9d673bb23dc622698dd11430a5d0cf5f4156bb1cebf4364df362cc65b8f7f6635da54e2b880afd42f62fb8fd3b5118320a38fd5895bce0a6cde276d36a508d3067926b260c25d0cd1a9b2d85d725a16dcb57b06cf88bfb3ccb88637e908ac4402b4fa4b9235d562c066dada31d12b0c52f34f5ddd629841221d435fecf93c8e6e98200167ba642914c08e353e713feac0125ee7ffce28c83ec04f6d4134499a36ff574843feaace24d16759921b740a30ca970e7e82e14802d24bf90d0e73ed3505b514de97bde4ff8480f9b60f1148f47d3dff2c2c50dc70a1a74d6661f922e6e3d191f0ae9ba09ff32e37f7e3e5862b4b81422b0cc075adeefa5c63161c102dbc815fbdd31953a6b729beef0fa390a2fc6b38a55b8866749e07c74706b8c43042b827c4df19020b45b7112dbadbfa71c3621eb5741df5438a25b3251729a45b029b8c31032a619bff77c287771621498c31265e08df7785c564fb3102c12e63770f68e8a785226bee87269bbaf3b45e01af4ca52c4e3fb483abe57106cf6eb27c28e48048674f9f3b8fed68bad63f502d45af93e4153f13708436c878ec472d69df18b523ab77d5e2210b8080d940ab03625c348e3b27507823447e7e181cf56d189139c726c6d34c44fa651802cc3c8adce1e0f9feb49be0968dddee4ad14f524955e87a9ae58674fe6728c4577aec6e92e9fcebc3d366428fe06c24ada29f7cddd98b749dba7899f8a49ae98ac48e762c0713f7fa87c53f57190e3581db0199dc1507fcc3770d00a3cb0e42b0025eee048a51dea7cd1bdbb1f97e1a7ba48ca7ae5e19347742170c9913bb6f503848cbbebca47cbf17e8c812029f71af8b13b727653718dfafb2cd779b853ec87d83525d4f00692cc571e317876a52fed68aa8d17935ec3430811ac563d423f5f8de6d40d24567a68533c981531b2ab4927f48c349d9d774289d89dbe94319bb6cba2c51d68887c11ebb6fdb05b478b9c3bee0465cd35ae148e494274b3997fb66f39eb38b3c640ed642d58ea5caf6a117d69da5f55c41d3af4ece95ecdb9eb1fb5fa5f0c3be2c7f8c31754337d165155f48bf90a2bbbe3bfe60f223df66154023b2d0eb3db9b57e3cbf7b82bd1209c311b17d294381ffd27d40d1bd22aa00d73e15bd05dff00aa37c1dd2b2a3d33da96598a1c85207dc70a5f62d3c8b44d903a7ef8cb5639caa1952a2b1f5552224a0c1b4e2319f663e5a778666c067c745c2dbaf1276fd2c09af001c9de939ecfbf115647a2c6928778eb362f9ef697cfb1bf688bc670ae48da733221fe418cd72e1287853dd5d59434e150cbe1b0243a79b974079d1055a7142150a90cb9949c020c3521db384c4e1ebd780b7a40adfddac5a8ba6116f5649e49be9d9ceaaf0e8ded9792da24d160a892e3c9e1154a82927c5e6972aa21b0040b554c7ec44ee48a0c804b5544c6a70429b1fd358289c83d5a844a1fb0394167a851894f853171957cbd5c479faf58ec17fb8550af1c1a8523643ae37ab3bfd0d970973d543a030e14268ca2cc2319067a174b76ddab4cff048ab982429e7200e77d95e1f9f9bde14daaadb7e39c2edbd111578c8b2fa3ee60d78ebccf35327d917a3c4c8310df59496cc385be7820e82ae2a24ef04cca91882d352c5558cf88051072e1d13593ec7b7bf14d305613a1fb1a481ec2c5e09aae76fa4d2b64e5d904988087bbb1f2cb979da45e331ae9c05d04d3fbb70382269a5296c24950a6f0d4e4558a5621f904f2fb4e217f83f065bcf8212a8ca04a69236bb1c9d5e00862707d3ebf203fe47e1de9a7e70d0700f836b6706b121141eaa4b8a8ba9bfe58b1a1c362f16bab59cc650d8f520cd67a11e721055c2ba13bb8ace9953f60376a77cc607691cd2c466f57751ffd2efd79e076e95ae9292832d2fce663d7ea82afae403661d32b6ba1228d1c4c7d62aa0648b7f3d9ed162ba5988046a4349eba53dd1421f09b2a057bc8b6296fb725014d2b7327ee077588dd0eb1709a3c98f070987d778b1efcdb0d4636e7327fd5e1635d261967e9d58ecb55523486c47098f22c573f26baca5eddaa68800c617e37dbb49b49ce9e0d203be9333549c6db1d94105d9e6de99d894261a31e3cb2205aac117b12043509b54d91b6f94547782a1c9eaf9bff6cf9f18a78cdb2e9b5cbb3569fd4758d76e4dbdbb0debe8202ab8cf38dc4ee5ff94b5586615c5d96dbb28ea62260601640f3ee4ce2bfc8a533ac88a1e57864c15a838496a7ca4b5d1e7c4d6383715e347325371050f3dcda667283ce6cd38de9d4c59f7930a23c6fbdfb599d014011eef5bd0ee16fd9376518668dae2e32cb42006903706fa3ef3d642d52d858f552276e30184a0e9605ffce505cbb515965985fd6a636cb4585451b01865d358bafa791d118b0e82ada9bdbd1bf02b81e8c7d789d2cd1e0472a5d537539bf12af3f1176dca5ab3c55c521fa7b83d865165dcf7566990204b66cf15c18306c981972e5eb84dc3607884d9c8374a12170fc3908aeaf9a4a89238525f386d0a707860028e0c018e56a710e703cb8eccb87ac5e195aa2a6d114c47e5a24bd73f65a536690eaff31316d1d20bbe91256f0034586989438966458eeeb8553b4f0da39b0f185047d5df16e6eea7db4d5338a0d4ace0dcd51d156bc7bccea337287cc4f438e522bd4723539b64fcb0a24e057ca4d98643bd616dadf134569a1478075c07d5fd542b0eeaab196e83ee00c2cf770bf101f063f4bf36c29d3bdec145708049364a9deb99ee11a4d3957150bd61203de02292dd171e3c8ca956159c28229c04c6baa3913adbe5b22c126d4e900327770ba6486c8fc94fbe7b89c5e26d6368f412ba951bd34465c98a78a6f1cfa20fc15e62d0a0f74c9489fb96cff01c56d6f188c029304fb6332be203460b92000a35eed88abe0a6735c9f9066d25aa6a36d6879f2aa005fcd4b046f3728f7dc3157acf6fb54484c2d9df18bdea90e13313209983de0b8d0766972fa80c82ec83230a8ec081d3938db6f826fe29bd72bb19b54fbf6d6c1af1329ba0e7f5d99529f984d0361a0d6b36a83d067e327ef5e802604f7556ad5eff2205dcb302c7ae9b3025428faae23ca5e6fb70ca74c4119c26b64847b480160e317212d98a7ffaeb6a81a091b2a56fd9e21ab018d7ed9510da6807eaa0fb0adad7bbc1117800a04e6585038a2bcb2b96c2bc9e845f8f408c754442ef51dde71511b2b9894a0ec95927efd91e11703eddd97f5cb5aff6258f78de725669dd4383da6b5dfd46900e3d40f2ca7a43a393eb152e018c3029511b942b152df5f5d675ef4290df9b9c180d11d75d53c214aa7405ed76c7753f1c7a05bcad21e53b67acbf153090e7a73c621ff7f2d798b860e255a2094a3a93b5af148ec14be057fef6988e98c58bec4e81653a1e3fc5658ed738ae9a672795c062971b6ddfa3773e20fe55bbb0581cd3d1643ef4e279c1881281853ed3810c8fa81b86f8f9b5cd3b68183f207ecc88f68cfcdfa39b710ff98b03e98b93e6c576d45b2f0fc3deb1416e27eac61f20f4967fd5b410bf808288240dc744ecba98580f47612c7be9cb6511c4daa1a2d680522a4409193b1afa4c084c510111350322155026aea0a84fad7ce67a3defcc5c4e6171251265f3902a7124440a675bf20c9fbd7b56b1e36aa08da9c4d93681712ea328f5fbe2eb7313a945ed9bac9ae0b47b59b8b1cf30eeb948855492e3d1a57e564ab486aa466f39e39d8880da045545761844bf56dccb171b16cc9bfb7fd22272b50df9904a02d790a9761ee4dba1bb173b725b03b0c7a60b6bf42c8fdc9d2aeca6c12b92e2b81f0da5aeaebf83d5cead366a35f0551939390e36dc4446288205daa0c1eb90a65ebfd3ed6b9775ffeaa518d3ebdfca67796cba91d24415d8cc649151fb695f84fd699d194c37a9616c99f683da68519a70f8112ca21873a516e54fb2754761632fd0e88b510814bb9eebb884eab3e5d35cdebe558fc54c8d1a2403df1d14bfa734caf0e369d23877a5b5c1ddea3ca0eec18ec388fd572ba458a2f4e4ce43d864d81cce1cdc3f6ffdaaf1ffc566b395466b010fceae05ed6d411d50f2561155fb3ebb05472f51df80809cbb8494e928abfb5fcbd0dc7b4f36680b6d75046aed3a37a2676356966916c4a04b4026b05767c738d843f9839a1663c50f76fa8856300e4e5380729c1431358406f78cb31d17945030f3ab94709cb8f6769467e4cfa21f3f96f553f97eb1ac52a2a5be4b5be404fec60b2d3669a3f21249ee7780a0e827ee2acf954480957543b7e59151f65bfd387d1b63d65bc6839207b14d61bb5b25a8c5390c0b9f2a9de1b6561c8ed407423da6a26e31db20bb61ba923585d9941b0ca2f5b33efe5aaa7d576e8d867ebed048d1d82f907671f7cc565f8de96b0e2706197c05eccc5c043a8bbc8e95ebbd3de508fce5c70aebbbb3be8ad01830b186713501544babf5edc1879736cb51bef9d17f9f863901a8765580545f9c3214185a07e93bf9c1cacbb2c050f57fedb6ba531b57b8c087e97b6fd8152c995717a9eaf434d90dc6c6a2034d49178e7d4f464c4a83c0a03c7adcbd5ab8b64266e6f702c92a264d28b01f1bb6bc0a4ce45d63b123b6c68f352bb26d9791575a3e0188c4cee49846cf06c1d029ca3d5b59a3bb53e176e35713871da8783025bae6e10fe8ccaae7a00e68d167e6ac0d9541959b25dd0edfd32e95e9c325b2f1a074bcf344402d7c5948e7a5ed148b040b7dcce8dd5aff2324be5d0d98d996b6639825ebdc29e15471409736e148354bfcf93f1af50fb8464fcf860858cc975de18fafe290f9572c0b7fbeb93fd000fe5f559ff71cd1b0eb7b7236b6042bbb8edd0253901027b43abaf7ca85c</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">这篇文章已被作者加密，请输入密码</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">这里有一些加密内容，需要密码才能继续阅读。</summary>
    
    
    
    <category term="杂记" scheme="https://hybpjx.cn/categories/%E6%9D%82%E8%AE%B0/"/>
    
    
    <category term="Android" scheme="https://hybpjx.cn/tags/Android/"/>
    
    <category term="Unidbg" scheme="https://hybpjx.cn/tags/Unidbg/"/>
    
  </entry>
  
  <entry>
    <title>python-UV包管理工具安装</title>
    <link href="https://hybpjx.cn/2025/10/09/python-UV%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85/"/>
    <id>https://hybpjx.cn/2025/10/09/python-UV%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85/</id>
    <published>2025-10-09T07:11:54.000Z</published>
    <updated>2025-10-24T07:29:53.748Z</updated>
    
    <content type="html"><![CDATA[<h1 id="安裝-uv"><a href="#安裝-uv" class="headerlink" title="安裝 uv"></a>安裝 uv</h1><p>uv 本身並不需要 Python，所以不建議用 pip 或是 pipx 安裝，這樣都會跟特定的 Python 環境綁在一起，Windows 上就直接透過 PowerSehll 安裝即可：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">powershell -ExecutionPolicy ByPass -c <span class="hljs-string">&quot;irm https://astral.sh/uv/install.ps1 | </span><br></code></pre></td></tr></table></figure><h1 id="scoop-安裝："><a href="#scoop-安裝：" class="headerlink" title="scoop 安裝："></a>scoop 安裝：</h1><blockquote><p>scoop install uv<br>本文都以 Windows 平台在 PowerShell 下操作示範</p></blockquote><h1 id="配置路径"><a href="#配置路径" class="headerlink" title="配置路径"></a>配置路径</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">set</span> Path=D:\MyConfiguration\zichen2.liang\.local\<span class="hljs-built_in">bin</span>;%Path%   (cmd)<br>$env:Path = <span class="hljs-string">&quot;D:\MyConfiguration\zichen2.liang\.local\bin;$env:Path&quot;</span>   (powershell)<br></code></pre></td></tr></table></figure><h1 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 查看所有安装及可安装的版本</span><br>uv python list <br><br><span class="hljs-comment"># 最新版安装</span><br>uv python install<br><br><span class="hljs-comment"># 指定版本安装</span><br>uv python install 3.10<br><br><span class="hljs-comment"># 安装多个版本</span><br>uv python install 3.10 3.11<br><br><span class="hljs-comment"># 显示安装的路径</span><br>uv python <span class="hljs-built_in">dir</span><br><br><span class="hljs-comment"># 卸载安装</span><br>uv python uninstall 3.10<br><br><span class="hljs-comment"># 卸载多个版本</span><br>uv python uninstall 3.10 3.11<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;安裝-uv&quot;&gt;&lt;a href=&quot;#安裝-uv&quot; class=&quot;headerlink&quot; title=&quot;安裝 uv&quot;&gt;&lt;/a&gt;安裝 uv&lt;/h1&gt;&lt;p&gt;uv 本身並不需要 Python，所以不建議用 pip 或是 pipx 安裝，這樣都會跟特定的 Python 環境綁</summary>
      
    
    
    
    <category term="快速安装" scheme="https://hybpjx.cn/categories/%E5%BF%AB%E9%80%9F%E5%AE%89%E8%A3%85/"/>
    
    
    <category term="python" scheme="https://hybpjx.cn/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>JSVMP插桩快捷指令</title>
    <link href="https://hybpjx.cn/2025/09/30/JSVMP%E6%8F%92%E6%A1%A9%E5%BF%AB%E6%8D%B7%E6%8C%87%E4%BB%A4/"/>
    <id>https://hybpjx.cn/2025/09/30/JSVMP%E6%8F%92%E6%A1%A9%E5%BF%AB%E6%8D%B7%E6%8C%87%E4%BB%A4/</id>
    <published>2025-09-30T14:19:19.000Z</published>
    <updated>2025-10-09T07:12:25.062Z</updated>
    
    <content type="html"><![CDATA[<p>要对JSVMP进行插桩。<br>以下是总结的一些快速复制</p><h1 id="对象序列化（判断window）"><a href="#对象序列化（判断window）" class="headerlink" title="对象序列化（判断window）"></a>对象序列化（判断window）</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">jj,<br><span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(jc,<br><span class="hljs-keyword">function</span>(<span class="hljs-params">k, v</span>) &#123;<br>    <span class="hljs-keyword">if</span> (v === <span class="hljs-variable language_">window</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;window&#x27;</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> v<br>&#125;)<br></code></pre></td></tr></table></figure><h1 id="对象序列化（判断长度以及window）"><a href="#对象序列化（判断长度以及window）" class="headerlink" title="对象序列化（判断长度以及window）"></a>对象序列化（判断长度以及window）</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(jc, <span class="hljs-function">(<span class="hljs-params">key, value</span>) =&gt;</span> value === <span class="hljs-variable language_">window</span> ? <span class="hljs-string">&#x27;window&#x27;</span>: (value &amp;&amp; <span class="hljs-keyword">typeof</span> value.<span class="hljs-property">length</span> === <span class="hljs-string">&#x27;number&#x27;</span> &amp;&amp; value.<span class="hljs-property">length</span> &gt; <span class="hljs-number">100</span> ? <span class="hljs-string">`<span class="hljs-subst">$&#123;key&#125;</span>.value &gt; 1000`</span>: value))<br></code></pre></td></tr></table></figure><h1 id="hook-时间保持一致"><a href="#hook-时间保持一致" class="headerlink" title="hook 时间保持一致"></a>hook 时间保持一致</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title class_">Date</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">getTime</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1759243630429</span><br>&#125;;<br><span class="hljs-title class_">Math</span>.<span class="hljs-property">random</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0.466434605063042</span><br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;要对JSVMP进行插桩。&lt;br&gt;以下是总结的一些快速复制&lt;/p&gt;
&lt;h1 id=&quot;对象序列化（判断window）&quot;&gt;&lt;a href=&quot;#对象序列化（判断window）&quot; class=&quot;headerlink&quot; title=&quot;对象序列化（判断window）&quot;&gt;&lt;/a&gt;对象序列化</summary>
      
    
    
    
    
    <category term="JavaScript" scheme="https://hybpjx.cn/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>frida常用大全</title>
    <link href="https://hybpjx.cn/2025/09/28/frida%E5%B8%B8%E7%94%A8%E5%A4%A7%E5%85%A8/"/>
    <id>https://hybpjx.cn/2025/09/28/frida%E5%B8%B8%E7%94%A8%E5%A4%A7%E5%85%A8/</id>
    <published>2025-09-28T10:14:21.000Z</published>
    <updated>2026-01-13T04:26:02.513Z</updated>
    
    <content type="html"><![CDATA[<h1 id="hook-检测函数"><a href="#hook-检测函数" class="headerlink" title="hook 检测函数"></a>hook 检测函数</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">hook_dlopen</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">attach</span>(<span class="hljs-title class_">Module</span>.<span class="hljs-title function_">findExportByName</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;android_dlopen_ext&quot;</span>),<br>        &#123;<br>            <span class="hljs-attr">onEnter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">args</span>) &#123;<br>                <span class="hljs-keyword">var</span> pathptr = args[<span class="hljs-number">0</span>];<br>                <span class="hljs-keyword">if</span> (pathptr !== <span class="hljs-literal">undefined</span> &amp;&amp; pathptr != <span class="hljs-literal">null</span>) &#123;<br>                    <span class="hljs-keyword">var</span> path = <span class="hljs-title function_">ptr</span>(pathptr).<span class="hljs-title function_">readCString</span>();<br>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;load &quot;</span> + path);<br>                &#125;<br>            &#125;<br>        &#125;<br>    );<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>查看所有android_dlopen_ext打开的动态库</p></blockquote><h1 id="修改寄存器"><a href="#修改寄存器" class="headerlink" title="修改寄存器"></a>修改寄存器</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> soAddr = <span class="hljs-title class_">Module</span>.<span class="hljs-title function_">findBaseAddress</span>(<span class="hljs-string">&quot;lib.so&quot;</span>);<br><span class="hljs-keyword">var</span> funcAddr = soAddr.<span class="hljs-title function_">add</span>(<span class="hljs-number">0x121974</span>) <br><br><span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">attach</span>(funcAddr,&#123;<br>    <span class="hljs-attr">onEnter</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">args</span>)&#123;<br><br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;onEnter arg[]: &#x27;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">x0</span>)  <span class="hljs-comment">// 32位是r寄存器 this.context.r0</span><br><br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;onEnter arg[]: &#x27;</span>,<span class="hljs-title function_">hexdump</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>.<span class="hljs-property">x0</span>)) <span class="hljs-comment">// 内存才可以 hexdump</span><br><br>        <span class="hljs-comment">// console.log(&#x27;onEnter arg[]: &#x27;,args[0])</span><br>        <span class="hljs-comment">// this.arg0 = args[0]</span><br>    &#125;,<br>    <span class="hljs-attr">onLeave</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">retval</span>)&#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;onLeave arg[]: &#x27;</span>)<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;onLeave result: &#x27;</span>,retval)<br>    &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><h1 id="Hook-webview-页面"><a href="#Hook-webview-页面" class="headerlink" title="Hook webview 页面"></a>Hook webview 页面</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//frida -U &quot;&lt;ProcessName&gt;&quot; -l Android_WebView_inspector.js</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Android_WebView_inspector</span>(<span class="hljs-params"></span>) &#123;<br><br>    <span class="hljs-comment">//实例化一个对象</span><br>    <span class="hljs-keyword">var</span> <span class="hljs-title class_">WebView</span> = <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;android.webkit.WebView&#x27;</span>);<br>    <span class="hljs-comment">//重写WebView类的重载方法，因为setWebContentsDebuggingEnabled不是静态方法，所以需要一个对象来调用这个方法</span><br>    <span class="hljs-title class_">WebView</span>.<span class="hljs-property">$init</span>.<span class="hljs-title function_">overload</span>(<span class="hljs-string">&#x27;android.content.Context&#x27;</span>).<span class="hljs-property">implementation</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">a</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;WebView.$init is called!1&quot;</span>);<br>        <span class="hljs-keyword">var</span> retval = <span class="hljs-variable language_">this</span>.$init(a);<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setWebContentsDebuggingEnabled</span>(<span class="hljs-literal">true</span>);<br>        <span class="hljs-keyword">return</span> retval;<br>    &#125;<br>    <span class="hljs-title class_">WebView</span>.<span class="hljs-property">$init</span>.<span class="hljs-title function_">overload</span>(<span class="hljs-string">&#x27;android.content.Context&#x27;</span>, <span class="hljs-string">&#x27;android.util.AttributeSet&#x27;</span>).<span class="hljs-property">implementation</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;WebView.$init is called!2&quot;</span>);<br>        <span class="hljs-keyword">var</span> retval = <span class="hljs-variable language_">this</span>.$init(a, b);<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setWebContentsDebuggingEnabled</span>(<span class="hljs-literal">true</span>);<br>        <span class="hljs-keyword">return</span> retval;<br>    &#125;<br>    <span class="hljs-title class_">WebView</span>.<span class="hljs-property">$init</span>.<span class="hljs-title function_">overload</span>(<span class="hljs-string">&#x27;android.content.Context&#x27;</span>, <span class="hljs-string">&#x27;android.util.AttributeSet&#x27;</span>, <span class="hljs-string">&#x27;int&#x27;</span>).<span class="hljs-property">implementation</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">a, b, c</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;WebView.$init is called!3&quot;</span>);<br>        <span class="hljs-keyword">var</span> retval = <span class="hljs-variable language_">this</span>.$init(a, b, c);<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setWebContentsDebuggingEnabled</span>(<span class="hljs-literal">true</span>);<br>        <span class="hljs-keyword">return</span> retval;<br>    &#125;<br>    <span class="hljs-comment">//始终设置为true,打开调试</span><br>    <span class="hljs-title class_">WebView</span>.<span class="hljs-property">setWebContentsDebuggingEnabled</span>.<span class="hljs-property">implementation</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setWebContentsDebuggingEnabled</span>(<span class="hljs-literal">true</span>);<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;setWebContentsDebuggingEnabled is called!&quot;</span>);<br><br>    &#125;<br>&#125;<br><br><br><span class="hljs-comment">// replace_str_maps();</span><br><br><br><span class="hljs-comment">// setTimeout(Android_WebView_inspector, 3000);</span><br><br><span class="hljs-comment">// console.log(&quot;脚本加载成功&quot;);</span><br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;脚本加载成功&quot;</span>);<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">perform</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">var</span> <span class="hljs-title class_">WebView</span> = <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;android.webkit.WebView&#x27;</span>);<br>        <span class="hljs-title class_">WebView</span>.<span class="hljs-property">$init</span>.<span class="hljs-title function_">overload</span>(<span class="hljs-string">&#x27;android.content.Context&#x27;</span>).<span class="hljs-property">implementation</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">a</span>) &#123;<br>            <span class="hljs-keyword">var</span> result = <span class="hljs-variable language_">this</span>.$init(a);<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setWebContentsDebuggingEnabled</span>(<span class="hljs-literal">true</span>);<br>            <span class="hljs-keyword">return</span> result;<br>        &#125;<br>        <span class="hljs-title class_">WebView</span>.<span class="hljs-property">$init</span>.<span class="hljs-title function_">overload</span>(<span class="hljs-string">&#x27;android.content.Context&#x27;</span>, <span class="hljs-string">&#x27;android.util.AttributeSet&#x27;</span>).<span class="hljs-property">implementation</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) &#123;<br>            <span class="hljs-keyword">var</span> result = <span class="hljs-variable language_">this</span>.$init(a, b);<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setWebContentsDebuggingEnabled</span>(<span class="hljs-literal">true</span>);<br>            <span class="hljs-keyword">return</span> result;<br>        &#125;<br>        <span class="hljs-title class_">WebView</span>.<span class="hljs-property">$init</span>.<span class="hljs-title function_">overload</span>(<span class="hljs-string">&#x27;android.content.Context&#x27;</span>, <span class="hljs-string">&#x27;android.util.AttributeSet&#x27;</span>, <span class="hljs-string">&#x27;int&#x27;</span>).<span class="hljs-property">implementation</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">a, b, c</span>) &#123;<br>            <span class="hljs-keyword">var</span> result = <span class="hljs-variable language_">this</span>.$init(a, b, c);<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setWebContentsDebuggingEnabled</span>(<span class="hljs-literal">true</span>);<br>            <span class="hljs-keyword">return</span> result;<br>        &#125;<br>        <span class="hljs-title class_">WebView</span>.<span class="hljs-property">$init</span>.<span class="hljs-title function_">overload</span>(<span class="hljs-string">&#x27;android.content.Context&#x27;</span>, <span class="hljs-string">&#x27;android.util.AttributeSet&#x27;</span>, <span class="hljs-string">&#x27;int&#x27;</span>, <span class="hljs-string">&#x27;int&#x27;</span>).<span class="hljs-property">implementation</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">a, b, c, d</span>) &#123;<br>            <span class="hljs-keyword">var</span> result = <span class="hljs-variable language_">this</span>.$init(a, b, c, d);<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setWebContentsDebuggingEnabled</span>(<span class="hljs-literal">true</span>);<br>            <span class="hljs-keyword">return</span> result;<br>        &#125;<br>        <span class="hljs-title class_">WebView</span>.<span class="hljs-property">$init</span>.<span class="hljs-title function_">overload</span>(<span class="hljs-string">&#x27;android.content.Context&#x27;</span>, <span class="hljs-string">&#x27;android.util.AttributeSet&#x27;</span>, <span class="hljs-string">&#x27;int&#x27;</span>, <span class="hljs-string">&#x27;boolean&#x27;</span>).<span class="hljs-property">implementation</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">a, b, c, d</span>) &#123;<br>            <span class="hljs-keyword">var</span> result = <span class="hljs-variable language_">this</span>.$init(a, b, c, d);<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setWebContentsDebuggingEnabled</span>(<span class="hljs-literal">true</span>);<br>            <span class="hljs-keyword">return</span> result;<br>        &#125;<br>        <span class="hljs-title class_">WebView</span>.<span class="hljs-property">$init</span>.<span class="hljs-title function_">overload</span>(<span class="hljs-string">&#x27;android.content.Context&#x27;</span>, <span class="hljs-string">&#x27;android.util.AttributeSet&#x27;</span>, <span class="hljs-string">&#x27;int&#x27;</span>, <span class="hljs-string">&#x27;java.util.Map&#x27;</span>, <span class="hljs-string">&#x27;boolean&#x27;</span>).<span class="hljs-property">implementation</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">a, b, c, d, e</span>) &#123;<br>            <span class="hljs-keyword">var</span> result = <span class="hljs-variable language_">this</span>.$init(a, b, c, d, e);<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setWebContentsDebuggingEnabled</span>(<span class="hljs-literal">true</span>);<br>            <span class="hljs-keyword">return</span> result;<br>        &#125;<br>        <span class="hljs-title class_">WebView</span>.<span class="hljs-property">$init</span>.<span class="hljs-title function_">overload</span>(<span class="hljs-string">&#x27;android.content.Context&#x27;</span>, <span class="hljs-string">&#x27;android.util.AttributeSet&#x27;</span>, <span class="hljs-string">&#x27;int&#x27;</span>, <span class="hljs-string">&#x27;int&#x27;</span>, <span class="hljs-string">&#x27;java.util.Map&#x27;</span>, <span class="hljs-string">&#x27;boolean&#x27;</span>).<span class="hljs-property">implementation</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">a, b, c, d, e, f</span>) &#123;<br>            <span class="hljs-keyword">var</span> result = <span class="hljs-variable language_">this</span>.$init(a, b, c, d, e, f);<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setWebContentsDebuggingEnabled</span>(<span class="hljs-literal">true</span>);<br>            <span class="hljs-keyword">return</span> result;<br>        &#125;<br>    &#125;);<br>&#125;<br><span class="hljs-title function_">setImmediate</span>(main);<br><br><br><span class="hljs-comment">// setTimeout(main, 2000);</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">main2</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">perform</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br><br>        <span class="hljs-comment">// Hook WebView 的 loadUrl 方法 (经测试全部用的是这个)</span><br>        <span class="hljs-comment">// var WebView = Java.use(&#x27;android.webkit.WebView&#x27;);</span><br>        <span class="hljs-comment">// WebView.loadUrl.overload(&#x27;java.lang.String&#x27;).implementation = function(url) &#123;</span><br>        <span class="hljs-comment">//     console.log(&quot;WebView loading URL: &quot; + url);</span><br>        <span class="hljs-comment">//     // 打印栈追踪 (调用链)</span><br>        <span class="hljs-comment">//     var stackTrace = Java.use(&#x27;android.util.Log&#x27;).getStackTraceString(Java.use(&#x27;java.lang.Exception&#x27;).$new());</span><br>        <span class="hljs-comment">//     console.log(&quot;调用链: &quot; + stackTrace);</span><br>        <span class="hljs-comment">//     // 继续执行原来的 loadUrl 方法</span><br>        <span class="hljs-comment">//     return this.loadUrl(url);</span><br>        <span class="hljs-comment">// &#125;;</span><br><br>        <span class="hljs-comment">// Hook WebView 的 loadUrl 方法 (经测试全部用的是这个)</span><br>        <span class="hljs-keyword">var</span> <span class="hljs-title class_">WebView</span> = <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;android.webkit.WebView&#x27;</span>);<br>        <span class="hljs-title class_">WebView</span>.<span class="hljs-property">setWebContentsDebuggingEnabled</span>.<span class="hljs-title function_">overload</span>(<span class="hljs-string">&quot;boolean&quot;</span>).<span class="hljs-property">implementation</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">s</span>) &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;强制开启webview调试&quot;</span>);<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setWebContentsDebuggingEnabled</span>(<span class="hljs-literal">true</span>)<br>        &#125;<br>        <span class="hljs-title class_">WebView</span>.<span class="hljs-property">loadUrl</span>.<span class="hljs-title function_">overload</span>(<span class="hljs-string">&#x27;java.lang.String&#x27;</span>).<span class="hljs-property">implementation</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">url</span>) &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;WebView loading URL: &quot;</span> + url);<br>            <span class="hljs-keyword">if</span> (url.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">&quot;javascript:&quot;</span>) &amp;&amp; url.<span class="hljs-title function_">includes</span>(<span class="hljs-string">&quot;window.requestConfig&quot;</span>)) &#123;<br>                <span class="hljs-comment">// 提取Base64字符串</span><br>                <span class="hljs-keyword">var</span> base64EncodedString = url.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/&quot;([^&quot;]+)&quot;/</span>)[<span class="hljs-number">1</span>]; <span class="hljs-comment">// 匹配出Base64字符串</span><br>                <span class="hljs-comment">// 解码Base64</span><br>                <span class="hljs-keyword">var</span> decodedBase64 = <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;android.util.Base64&#x27;</span>).<span class="hljs-title function_">decode</span>(base64EncodedString, <span class="hljs-number">0</span>);<br>                <span class="hljs-keyword">var</span> decodedString = <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;java.lang.String&#x27;</span>).$new(decodedBase64, <span class="hljs-string">&quot;UTF-8&quot;</span>);<br>                <span class="hljs-comment">// 使用Java的replace方法进行转义字符替换</span><br>                decodedString = decodedString.<span class="hljs-title function_">replace</span>(<span class="hljs-title class_">Java</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;java.lang.String&#x27;</span>).$new(<span class="hljs-string">&quot;\\u0026&quot;</span>), <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;java.lang.String&#x27;</span>).$new(<span class="hljs-string">&quot;&amp;&quot;</span>));<br>                decodedString = decodedString.<span class="hljs-title function_">replace</span>(<span class="hljs-title class_">Java</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;java.lang.String&#x27;</span>).$new(<span class="hljs-string">&quot;\\u003d&quot;</span>), <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;java.lang.String&#x27;</span>).$new(<span class="hljs-string">&quot;=&quot;</span>));<br>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;解码 Base64: &quot;</span> + decodedString)<br>            &#125;<br>            <span class="hljs-comment">// 打印栈追踪 (调用链)</span><br>            <span class="hljs-keyword">var</span> stackTrace = <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;android.util.Log&#x27;</span>).<span class="hljs-title function_">getStackTraceString</span>(<span class="hljs-title class_">Java</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;java.lang.Exception&#x27;</span>).$new());<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;调用链: &quot;</span> + stackTrace);<br>            <span class="hljs-comment">// 继续执行原来的 loadUrl 方法</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadUrl</span>(url);<br>        &#125;;<br><br>        <span class="hljs-comment">// 解码Unicode字符串的函数</span><br>        <span class="hljs-keyword">function</span> <span class="hljs-title function_">decodeUnicode</span>(<span class="hljs-params">str</span>) &#123;<br>            <span class="hljs-keyword">return</span> str.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\\u[\dA-Fa-f]&#123;4&#125;/g</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">match</span>) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(<span class="hljs-built_in">parseInt</span>(match.<span class="hljs-title function_">replace</span>(<span class="hljs-string">&quot;\\u&quot;</span>, <span class="hljs-string">&quot;&quot;</span>), <span class="hljs-number">16</span>));<br>            &#125;);<br>        &#125;<br><br><br>        <span class="hljs-comment">// Hook WebViewClient 的 onPageFinished 方法</span><br>        <span class="hljs-keyword">var</span> <span class="hljs-title class_">WebViewClient</span> = <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;android.webkit.WebViewClient&#x27;</span>);<br>        <span class="hljs-title class_">WebViewClient</span>.<span class="hljs-property">onPageFinished</span>.<span class="hljs-title function_">overload</span>(<span class="hljs-string">&#x27;android.webkit.WebView&#x27;</span>, <span class="hljs-string">&#x27;java.lang.String&#x27;</span>).<span class="hljs-property">implementation</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">view, url</span>) &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;WebView finished loading URL: &quot;</span> + url);<br>            <span class="hljs-comment">// 可以在这里处理更多逻辑，如获取网页内容</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onPageFinished</span>(view, url);<br>        &#125;;<br><br>        <span class="hljs-comment">// Hook WebView 的 WebResourceRequest</span><br>        <span class="hljs-keyword">var</span> <span class="hljs-title class_">WebResourceRequest</span> = <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;android.webkit.WebResourceRequest&#x27;</span>);<br>        <span class="hljs-keyword">var</span> <span class="hljs-title class_">WebViewClient2</span> = <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;android.webkit.WebViewClient&#x27;</span>);<br><br>        <span class="hljs-title class_">WebViewClient2</span>.<span class="hljs-property">shouldInterceptRequest</span>.<span class="hljs-title function_">overload</span>(<span class="hljs-string">&#x27;android.webkit.WebView&#x27;</span>, <span class="hljs-string">&#x27;android.webkit.WebResourceRequest&#x27;</span>).<span class="hljs-property">implementation</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">view, request</span>) &#123;<br>            <span class="hljs-keyword">var</span> requestUrl = request.<span class="hljs-title function_">getUrl</span>().<span class="hljs-title function_">toString</span>();<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Intercepting WebResourceRequest: &quot;</span> + requestUrl);<br><br>            <span class="hljs-comment">// 在这里可以执行任何自定义逻辑，如修改请求</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">shouldInterceptRequest</span>(view, request);<br>        &#125;;<br>    &#125;);<br>&#125;<br><br><br><span class="hljs-comment">// setTimeout(main2, 3000);</span><br></code></pre></td></tr></table></figure><h1 id="hook-So层的-newStringUTF8"><a href="#hook-So层的-newStringUTF8" class="headerlink" title="hook So层的 newStringUTF8"></a>hook So层的 newStringUTF8</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js"><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">hook_NewStringUTF</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> artModule = <span class="hljs-title class_">Process</span>.<span class="hljs-title function_">findModuleByName</span>(<span class="hljs-string">&quot;libart.so&quot;</span>);<br>    <span class="hljs-keyword">var</span> symbols = artModule.<span class="hljs-title function_">enumerateSymbols</span>();<br>    <span class="hljs-keyword">var</span> newStringUTF = <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; symbols.<span class="hljs-property">length</span>; i++) &#123;<br>        <span class="hljs-keyword">let</span> symbol = symbols[i];<br>        <span class="hljs-keyword">if</span> (symbol.<span class="hljs-property">name</span>.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;NewStringUTF&quot;</span>) !== -<span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(symbol.<span class="hljs-property">name</span>);<br>            newStringUTF = symbol.<span class="hljs-property">address</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (newStringUTF) &#123;<br>        <span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">attach</span>(newStringUTF, &#123;<br>            <span class="hljs-attr">onEnter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">args</span>) &#123;<br>                <span class="hljs-keyword">let</span> string = args[<span class="hljs-number">1</span>].<span class="hljs-title function_">readCString</span>()<br>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;[字符串]:&quot;</span>, string);<br>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;[调用栈]:&quot;</span>,<span class="hljs-title class_">Thread</span>.<span class="hljs-title function_">backtrace</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">context</span>, <span class="hljs-title class_">Backtracer</span>.<span class="hljs-property">FUZZY</span>).<span class="hljs-title function_">map</span>(<span class="hljs-title class_">DebugSymbol</span>.<span class="hljs-property">fromAddress</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">&#x27;\n&#x27;</span>) + <span class="hljs-string">&#x27;\n&#x27;</span>);<br>            &#125;, <span class="hljs-attr">onLeave</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">retval</span>) &#123;<br>            &#125;<br>        &#125;)<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;没有这个函数&quot;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="hook具体函数地址"><a href="#hook具体函数地址" class="headerlink" title="hook具体函数地址"></a>hook具体函数地址</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">hook_dlsym</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-comment">// 获取dlsym函数的地址</span><br>    <span class="hljs-keyword">let</span> dlsymAddr = <span class="hljs-title class_">Module</span>.<span class="hljs-title function_">findExportByName</span>(<span class="hljs-string">&quot;libdl.so&quot;</span>,<span class="hljs-string">&quot;dlsym&quot;</span>);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dlsymAddr);<br>    <span class="hljs-comment">// hook dlsym</span><br>    <span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">attach</span>(dlsymAddr,&#123;<br>        <span class="hljs-attr">onEnter</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">args</span>)&#123;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">args1</span> = args[<span class="hljs-number">1</span>];<br>        &#125;,<br>        <span class="hljs-attr">onLeave</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">retval</span>)&#123;<br>            <span class="hljs-keyword">let</span> md= <span class="hljs-title class_">Process</span>.<span class="hljs-title function_">findModuleByAddress</span>(retval);<br>            <span class="hljs-keyword">if</span>(md==<span class="hljs-literal">null</span>)<span class="hljs-keyword">return</span>;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;函数：&quot;</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">args1</span>.<span class="hljs-title function_">readCString</span>(),<span class="hljs-string">&quot;模块：&quot;</span>+md.<span class="hljs-property">name</span>,<span class="hljs-string">&quot;地址：&quot;</span>+retval,<span class="hljs-string">&quot;偏移：&quot;</span>+retval.<span class="hljs-title function_">sub</span>(md.<span class="hljs-property">base</span>));<br>        &#125;<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="HashMap或转Json"><a href="#HashMap或转Json" class="headerlink" title="HashMap或转Json"></a>HashMap或转Json</h1><p>方法一：直接打印：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> <span class="hljs-title class_">HashMap</span> = <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;java.util.HashMap&#x27;</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;map：&quot;</span> + <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">cast</span>(map, <span class="hljs-title class_">HashMap</span>).<span class="hljs-title function_">toString</span>());<br> <br><span class="hljs-comment">// 输出展示：map -&gt; &#123;onlyCanExchange=0, pageSize=5, pageNum=1&#125;</span><br></code></pre></td></tr></table></figure><p>方法二：借助Gson转Json打印（推荐）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> <span class="hljs-title class_">Gson</span> = <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;com.google.gson.Gson&#x27;</span>).$new();<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;map -&gt; &quot;</span> + <span class="hljs-title class_">Gson</span>.<span class="hljs-title function_">toJsonTree</span>(map).<span class="hljs-title function_">getAsJsonObject</span>());<br> <br><span class="hljs-comment">// 输出展示：map -&gt; &#123;&quot;onlyCanExchange&quot;:0,&quot;pageSize&quot;:&quot;5&quot;,&quot;pageNum&quot;:&quot;1&quot;&#125;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;hook-检测函数&quot;&gt;&lt;a href=&quot;#hook-检测函数&quot; class=&quot;headerlink&quot; title=&quot;hook 检测函数&quot;&gt;&lt;/a&gt;hook 检测函数&lt;/h1&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td c</summary>
      
    
    
    
    <category term="安卓逆向基础" scheme="https://hybpjx.cn/categories/%E5%AE%89%E5%8D%93%E9%80%86%E5%90%91%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="frida" scheme="https://hybpjx.cn/tags/frida/"/>
    
  </entry>
  
  <entry>
    <title>Mac安装Mongodb</title>
    <link href="https://hybpjx.cn/2025/09/19/Mac%E5%AE%89%E8%A3%85Mongodb/"/>
    <id>https://hybpjx.cn/2025/09/19/Mac%E5%AE%89%E8%A3%85Mongodb/</id>
    <published>2025-09-19T08:24:55.000Z</published>
    <updated>2025-10-09T07:12:30.957Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Homebrew-安装"><a href="#Homebrew-安装" class="headerlink" title="Homebrew 安装"></a>Homebrew 安装</h1><ol><li>更新 brew</li></ol><blockquote><p>brew update</p></blockquote><ol start="2"><li>添加 MongoDB 官方 tap</li></ol><blockquote><p>brew tap mongodb&#x2F;brew</p></blockquote><ol start="3"><li>安装最新稳定版</li></ol><blockquote><p>brew install <a href="mailto:&#x6d;&#x6f;&#110;&#103;&#x6f;&#100;&#98;&#x2d;&#x63;&#x6f;&#x6d;&#x6d;&#x75;&#110;&#x69;&#x74;&#x79;&#64;&#x37;&#46;&#48;">mongodb-community@7.0</a><br>（这里我写的是 7.0，如果你需要特定版本可以改，比如 6.0。）</p></blockquote><ol start="4"><li>启动 MongoDB 服务</li></ol><blockquote><p>brew services start <a href="mailto:&#x6d;&#x6f;&#110;&#x67;&#x6f;&#100;&#98;&#45;&#99;&#111;&#x6d;&#109;&#117;&#110;&#x69;&#x74;&#x79;&#x40;&#55;&#46;&#48;">mongodb-community@7.0</a><br>brew services start mongodb&#x2F;brew&#x2F;<a href="mailto:&#x6d;&#x6f;&#x6e;&#x67;&#111;&#x64;&#98;&#x2d;&#99;&#x6f;&#109;&#109;&#x75;&#x6e;&#105;&#x74;&#121;&#64;&#x37;&#46;&#x30;">mongodb-community@7.0</a></p></blockquote><ol start="5"><li>确认 MongoDB 是否启动成功</li></ol><blockquote><p>ps aux | grep -v grep | grep mongod</p></blockquote><ol start="6"><li>连接 MongoDB</li></ol><blockquote><p>mongosh</p></blockquote><p>默认会连到本地 mongodb:&#x2F;&#x2F;localhost:27017</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Homebrew-安装&quot;&gt;&lt;a href=&quot;#Homebrew-安装&quot; class=&quot;headerlink&quot; title=&quot;Homebrew 安装&quot;&gt;&lt;/a&gt;Homebrew 安装&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;更新 brew&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquo</summary>
      
    
    
    
    <category term="快速安装" scheme="https://hybpjx.cn/categories/%E5%BF%AB%E9%80%9F%E5%AE%89%E8%A3%85/"/>
    
    
    <category term="MongoDB" scheme="https://hybpjx.cn/tags/MongoDB/"/>
    
  </entry>
  
  <entry>
    <title>Wails+svelte开发入门</title>
    <link href="https://hybpjx.cn/2025/09/07/Wails-svelte%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/"/>
    <id>https://hybpjx.cn/2025/09/07/Wails-svelte%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8/</id>
    <published>2025-09-07T09:30:25.000Z</published>
    <updated>2025-10-09T07:46:48.127Z</updated>
    
    <content type="html"><![CDATA[<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><blockquote><p>go install github.com&#x2F;wailsapp&#x2F;wails&#x2F;v2&#x2F;cmd&#x2F;wails@latest</p></blockquote><h1 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h1><blockquote><p>wails init -n “my-svelte-app” -t “svelte”</p></blockquote><ul><li><p><code>-n</code>：指定项目名称，这里是<code>my-svelte-app</code>。</p></li><li><p><code>-t</code>：指定前端模板，这里我们使用 <code>svelte</code>。</p></li></ul><h2 id="运行项目"><a href="#运行项目" class="headerlink" title="运行项目"></a>运行项目</h2><p>项目创建完成后，进入项目目录并运行：</p><p>Bash</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">cd</span> my-svelte-<span class="hljs-keyword">app</span><br>wails dev<br></code></pre></td></tr></table></figure><h1 id="Svelte-核心概念"><a href="#Svelte-核心概念" class="headerlink" title="Svelte 核心概念"></a>Svelte 核心概念</h1><p>您好！很高兴能带您快速入门并精通 Svelte。这是一个非常棒的选择，因为它以其简洁和高效而闻名。</p><p>Svelte 的核心理念与您可能听说过的其他框架（如 React 或 Vue）截然不同。与其在浏览器运行时执行大量工作，Svelte 更像一个<strong>编译器</strong>。它在您构建项目时，将您的代码转换成体积小、运行速度快的原生 JavaScript。这意味着最终用户在访问您的应用时，无需加载庞大的框架代码，从而带来<strong>极佳的性能</strong>。</p><h2 id="Svelte-快速入门指南"><a href="#Svelte-快速入门指南" class="headerlink" title="Svelte 快速入门指南"></a>Svelte 快速入门指南</h2><p>要使用 Svelte 快速上手 Wails 项目，您可以按照以下步骤操作：</p><h3 id="1-创建-Wails-Svelte-项目"><a href="#1-创建-Wails-Svelte-项目" class="headerlink" title="1. 创建 Wails + Svelte 项目"></a>1. 创建 Wails + Svelte 项目</h3><p>在终端中，运行以下命令来创建一个新的项目：</p><p>Bash</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs excel">wails init -<span class="hljs-built_in">n</span> <span class="hljs-string">&quot;my-svelte-app&quot;</span> -<span class="hljs-built_in">t</span> <span class="hljs-string">&quot;svelte&quot;</span><br></code></pre></td></tr></table></figure><ul><li><code>-n</code>：指定项目名称，这里是 <code>my-svelte-app</code>。</li><li><code>-t</code>：指定前端模板，这里我们使用 <code>svelte</code>。</li></ul><h3 id="2-运行项目"><a href="#2-运行项目" class="headerlink" title="2. 运行项目"></a>2. 运行项目</h3><p>项目创建完成后，进入项目目录并运行：</p><p>Bash</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">cd</span> my-svelte-<span class="hljs-keyword">app</span><br>wails dev<br></code></pre></td></tr></table></figure><p><code>wails dev</code> 命令将启动 Wails 开发模式，同时运行您的 Go 后端和 Svelte 前端。Svelte 的 Vite 开发服务器会自动为您处理热重载。</p><hr><h2 id="Svelte-核心概念-1"><a href="#Svelte-核心概念-1" class="headerlink" title="Svelte 核心概念"></a>Svelte 核心概念</h2><p>要快速精通 Svelte，您只需掌握几个核心概念。它避免了许多其他框架中常见的样板代码。</p><h3 id="1-组件-Components"><a href="#1-组件-Components" class="headerlink" title="1. 组件 (Components)"></a>1. 组件 (Components)</h3><p>在 Svelte 中，每个 <code>.svelte</code> 文件都是一个组件。一个组件通常包含三部分：</p><ul><li><strong><code>&lt;script&gt;</code> 标签</strong>：用于存放组件的 JavaScript 逻辑。</li><li><strong>HTML 标签</strong>：用于定义组件的模板结构。</li><li><strong><code>&lt;style&gt;</code> 标签</strong>：用于编写组件的 CSS 样式。值得注意的是，<strong>样式默认是作用域化的</strong>，这意味着它们只会影响当前组件，而不会污染全局样式。</li></ul><h3 id="2-响应式-Reactivity"><a href="#2-响应式-Reactivity" class="headerlink" title="2. 响应式 (Reactivity)"></a>2. 响应式 (Reactivity)</h3><p>Svelte 的响应式非常简单。当您想让一个变量成为响应式状态时，只需正常声明它即可。当您改变这个变量时，所有使用它的地方都会自动更新。</p><p>Svelte</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs svelte">&lt;script&gt;<br>let count = 0; // 声明一个响应式变量<br>function increment() &#123;<br>    count++; // 直接修改变量，UI 会自动更新<br>&#125;<br>&lt;/script&gt;<br><br>&lt;button on:click=&#123;increment&#125;&gt;点击了 &#123;count&#125; 次&lt;/button&gt;<br></code></pre></td></tr></table></figure><h3 id="3-响应式声明"><a href="#3-响应式声明" class="headerlink" title="3. 响应式声明 ($:)"></a>3. 响应式声明 (<code>$:</code>)</h3><p>如果您需要从一个或多个响应式变量中派生新值，可以使用 Svelte 独有的 <code>$:</code> 语法。</p><p>Svelte</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs svelte">&lt;script&gt;<br>let count = 0;<br>// total 是一个派生值，当 count 改变时会自动重新计算<br>$: total = count * 2;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h3 id="4-属性-props"><a href="#4-属性-props" class="headerlink" title="4. 属性 (props)"></a>4. 属性 (<code>props</code>)</h3><p>要将数据从父组件传递给子组件，可以使用 <code>export let</code> 语法。</p><p>Svelte</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs svelte">&lt;!-- ChildComponent.svelte --&gt;<br>&lt;script&gt;<br>export let name; // 声明一个可接受的 prop<br>&lt;/script&gt;<br><br>&lt;h1&gt;你好, &#123;name&#125;!&lt;/h1&gt;<br></code></pre></td></tr></table></figure><p>Svelte</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs svelte">&lt;!-- App.svelte (父组件) --&gt;<br>&lt;script&gt;<br>import ChildComponent from &#x27;./ChildComponent.svelte&#x27;;<br>&lt;/script&gt;<br><br>&lt;ChildComponent name=&quot;Svelte&quot; /&gt;<br></code></pre></td></tr></table></figure><h3 id="5-逻辑块"><a href="#5-逻辑块" class="headerlink" title="5. 逻辑块"></a>5. 逻辑块</h3><p>Svelte 提供简洁的语法来处理条件渲染和列表渲染：</p><ul><li><strong>条件渲染</strong>：使用 <code>&#123;#if...&#125;</code></li><li><strong>列表渲染</strong>：使用 <code>&#123;#each...&#125;</code></li></ul><p>Svelte</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs svelte">&#123;#if user&#125;<br>    &lt;div&gt;欢迎, &#123;user.name&#125;!&lt;/div&gt;<br>&#123;:else&#125;<br>    &lt;div&gt;请登录&lt;/div&gt;<br>&#123;/if&#125;<br><br>&#123;#each items as item&#125;<br>    &lt;div&gt;&#123;item.name&#125;&lt;/div&gt;<br>&#123;/each&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安装&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;go install github.com&amp;#x2F;wailsapp&amp;#x2F;wails&amp;#x2F;v2&amp;#x</summary>
      
    
    
    
    <category term="一日一库" scheme="https://hybpjx.cn/categories/%E4%B8%80%E6%97%A5%E4%B8%80%E5%BA%93/"/>
    
    
    <category term="JavaScript" scheme="https://hybpjx.cn/tags/JavaScript/"/>
    
    <category term="Golang" scheme="https://hybpjx.cn/tags/Golang/"/>
    
    <category term="Svelte" scheme="https://hybpjx.cn/tags/Svelte/"/>
    
  </entry>
  
  <entry>
    <title>vaptcha手势验证码分析流程</title>
    <link href="https://hybpjx.cn/2025/08/29/%E6%89%8B%E5%8A%BF%E9%AA%8C%E8%AF%81%E7%A0%81%E5%88%86%E6%9E%90%E6%B5%81%E7%A8%8B/"/>
    <id>https://hybpjx.cn/2025/08/29/%E6%89%8B%E5%8A%BF%E9%AA%8C%E8%AF%81%E7%A0%81%E5%88%86%E6%9E%90%E6%B5%81%E7%A8%8B/</id>
    <published>2025-08-29T01:16:28.000Z</published>
    <updated>2025-10-09T07:11:22.333Z</updated>
    
    <content type="html"><![CDATA[<h1 id="抓包"><a href="#抓包" class="headerlink" title="抓包"></a>抓包</h1><p>先config 获取信息 再get拿到验证码和order</p><p><img src="https://s2.loli.net/2025/08/25/lRa5dCrwXDiKTqf.png"></p><p>如下图 配置如下</p><p>vi： 固定</p><p>k：返回值</p><p>en： 加密值</p><p><img src="https://s2.loli.net/2025/08/25/trCgI8WO56mpweR.png"></p><h1 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h1><h2 id="get请求"><a href="#get请求" class="headerlink" title="get请求"></a>get请求</h2><p>n 生成出如下</p><p><img src="https://s2.loli.net/2025/08/25/kZyih3G2oaIRN1K.png"></p><p>第一个en 随便扣扣 就扣出来了。</p><p><img src="https://s2.loli.net/2025/08/25/yWGmVfgKibajRlA.png"></p><p>然后把比较重要的component拿出来</p><p><img src="https://s2.loli.net/2025/08/25/sJ4SVXiojG7RCdZ.png"></p><p>然后抠出来 请求就可以了。中间会遇到很多坑。</p><p>其中指纹需要复制。</p><h2 id="底图还原"><a href="#底图还原" class="headerlink" title="底图还原"></a>底图还原</h2><p>这里请求完之后会获取到图片信息和 图片的order</p><p>但是这个order不是直接还原的order。还需要去js中找到加密的地方。</p><p>（这里为了保持代码一致。我扣下来一版 来找对应位置。所以有些值和网页会有所对应不上）</p><p>还原位置如下：</p><p>搜索关键词：imageOnload 或者 Decrypt</p><p><img src="https://s2.loli.net/2025/08/28/hcDXq6gmKMyJ2Ai.png"></p><p>这里就直接硬扣就完事了。</p><p>Decrypt的算法逻辑如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">_0xb05afc</span>(<span class="hljs-params">_0x2b9119, _0x1f3614</span>) &#123;<br>    <span class="hljs-keyword">var</span> _0x431184 = <span class="hljs-string">&quot;&quot;</span>;<br>    _0x431184 = (<span class="hljs-built_in">parseInt</span>(_0x2b9119) - _0x1f3614).<span class="hljs-title function_">toString</span>();<br>    <span class="hljs-keyword">if</span> (_0x431184.<span class="hljs-property">length</span> &lt; (<span class="hljs-number">983293</span> ^ <span class="hljs-number">983287</span>)) &#123;<br>        _0x431184 = <span class="hljs-string">&quot;0&quot;</span> + _0x431184;<br>    &#125;<br>    <span class="hljs-keyword">return</span> _0x431184;<br>&#125;<br></code></pre></td></tr></table></figure><p>稍微麻烦的也就是传参的这个</p><p><img src="https://s2.loli.net/2025/08/28/MXGf6zUZISOnqgk.png"></p><h2 id="算法还原"><a href="#算法还原" class="headerlink" title="算法还原"></a>算法还原</h2><p>拿到底图链接 即重新拼接成一个完整图片</p><p>算法如下；</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">def</span> <span class="hljs-title function_">process_image</span>(<span class="hljs-params">order: <span class="hljs-built_in">str</span>, image_url: <span class="hljs-built_in">str</span>, output_path: <span class="hljs-built_in">str</span> = <span class="hljs-string">&quot;image.png&quot;</span></span>):<br>    CANVAS_WIDTH, CANVAS_HEIGHT = <span class="hljs-number">290</span>, <span class="hljs-number">167</span><br>    SOURCE_WIDTH, SOURCE_HEIGHT = <span class="hljs-number">400</span>, <span class="hljs-number">230</span><br><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> (<span class="hljs-built_in">len</span>(order) == <span class="hljs-number">10</span> <span class="hljs-keyword">and</span> order.isdigit()):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;错误：排序字符串必须为10位数字&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    response = requests.get(image_url, timeout=<span class="hljs-number">10</span>)<br>    source_image = Image.<span class="hljs-built_in">open</span>(io.BytesIO(response.content))<br><br>    target_canvas = Image.new(<span class="hljs-string">&#x27;RGB&#x27;</span>, (CANVAS_WIDTH, CANVAS_HEIGHT), <span class="hljs-string">&#x27;white&#x27;</span>)<br><br>    canvas_block_w, canvas_block_h = CANVAS_WIDTH // <span class="hljs-number">5</span>, CANVAS_HEIGHT // <span class="hljs-number">2</span><br>    source_block_w, source_block_h = SOURCE_WIDTH // <span class="hljs-number">5</span>, SOURCE_HEIGHT // <span class="hljs-number">2</span><br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>        <span class="hljs-comment"># 计算源和目标位置</span><br>        source_x, source_y = (i % <span class="hljs-number">5</span>) * source_block_w, (i // <span class="hljs-number">5</span>) * source_block_h<br>        pos = <span class="hljs-built_in">int</span>(order[i])<br>        target_x, target_y = (pos % <span class="hljs-number">5</span>) * canvas_block_w, (pos // <span class="hljs-number">5</span>) * canvas_block_h<br><br>        <span class="hljs-comment"># 裁剪、缩放并粘贴</span><br>        block = source_image.crop((source_x, source_y, source_x + source_block_w, source_y + source_block_h))<br>        resized_block = block.resize((canvas_block_w, canvas_block_h), Image.Resampling.LANCZOS)<br>        target_canvas.paste(resized_block, (target_x, target_y))<br><br>    target_canvas.save(output_path, <span class="hljs-string">&#x27;PNG&#x27;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;图像已保存为 <span class="hljs-subst">&#123;output_path&#125;</span>&quot;</span>)<br></code></pre></td></tr></table></figure><h2 id="validate"><a href="#validate" class="headerlink" title="validate"></a>validate</h2><p>validate的请求中的en </p><p>定位点如下图所示</p><p><img src="https://s2.loli.net/2025/08/28/214CoGMDfOzyub6.png"></p><p>其实这里算法都和你简单随便扣扣就出来了。</p><p>传参这里看看。</p><p><img src="https://s2.loli.net/2025/08/29/xSoBO8wQjnJa1lH.png"></p><p>v： 轨迹</p><p>vi：固定值 和uk差不多</p><p>k：接口返回</p><p>dt： 滑动时间</p><p>ch：heigh 图片高度</p><p>cw：width 图片宽度</p><p><img src="https://s2.loli.net/2025/08/29/DuMCjlp7FWi8nZS.png"></p><p>补充说明：具体值demo如上</p><h1 id="难点与坑"><a href="#难点与坑" class="headerlink" title="难点与坑"></a>难点与坑</h1><p>这里讲完流程大概讲下难点</p><ol><li><p>en有个UA头 前后要保持一致 如下图<img src="https://s2.loli.net/2025/08/28/fe6JKqcagSGP58r.png" alt="image-20250828235814245"></p></li><li><p>GenerateFP。下图其实这里就是运用了 JavaScript 生成器 的特性。.sent 就是接受了上一步吐出来的值。</p><p><img src="https://s2.loli.net/2025/08/29/gSqoDkRuFaJwAxW.png"></p></li><li><p>这里有个异步方法 其实。只需要看他返回值 然后扣下来或者给AI就可以了。</p><p><img src="https://s2.loli.net/2025/08/29/rCMNwedOGS1IWsi.png"></p><p><img src="https://s2.loli.net/2025/08/29/yW5jtdHVxPYDKIG.png"></p><p>当然 这里还有个环境指纹 直接copy下来就好了。</p><p><img src="https://s2.loli.net/2025/08/29/RJe2kpswx6FInQq.png"></p></li><li><p>轨迹 </p><p>这里不应该是坑点。这里打个鼠标断点就能找到轨迹生成的地方。可以对着分析 但是没屌用。具体我也没研究明白。</p><p><img src="https://s2.loli.net/2025/08/29/UNylLinexzOZ6CS.png"></p></li></ol><h1 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h1><p>结果就是我也没搞出来。demo站倒是比较松。这个真应用起来好像是划得来不太准就会一直错。</p><p><img src="https://s2.loli.net/2025/08/29/tpiMF2Es3gRIHWS.png"></p><p>代码返回了 103 代表了canvas 指纹不对。</p><p><img src="https://s2.loli.net/2025/08/29/OQLEkjb78H4x3Ti.png"></p><p>代码返回了101 代表了 en生成的值和 knock的值不对。</p><p><img src="https://s2.loli.net/2025/08/29/GhQqWOCVcFsbrud.png"></p><p>代码返回了104 代表了 轨迹的值不对。最终也是卡死在了这一步。</p><p>至于识别的话。这里我使用了CSDN的某位大佬的方案。</p><p>使用cv2 手动的去滑。然后 line 的去模拟轨迹。但是实际下来好像是不太行。</p><p>这里我把代码也开源出来</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">record_trajectory</span>(<span class="hljs-params">img_path</span>):<br>    points = []<br>    img = cv2.imread(img_path)<br>    <span class="hljs-keyword">if</span> img <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;无法加载图片，请检查路径&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span><br><br>    cv2.namedWindow(<span class="hljs-string">&#x27;Image Trajectory Recorder&#x27;</span>)<br>    cv2.setMouseCallback(<span class="hljs-string">&#x27;Image Trajectory Recorder&#x27;</span>,<br>                         <span class="hljs-keyword">lambda</span> event, x, y, flags, param:<br>                         (points.append(&#123;<span class="hljs-string">&#x27;x&#x27;</span>: x, <span class="hljs-string">&#x27;y&#x27;</span>: y, <span class="hljs-string">&#x27;time&#x27;</span>: <span class="hljs-built_in">int</span>(time.time() * <span class="hljs-number">1000</span>)&#125;))<br>                         <span class="hljs-keyword">if</span> event == cv2.EVENT_LBUTTONDOWN <span class="hljs-keyword">or</span> (<br>                                     event == cv2.EVENT_MOUSEMOVE <span class="hljs-keyword">and</span> flags == cv2.EVENT_FLAG_LBUTTON) <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>)<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;在图片上按住鼠标左键并移动来绘制轨迹，按&#x27;s&#x27;保存并返回，按&#x27;q&#x27;退出&quot;</span>)<br><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        clone = img.copy()<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(points) &gt; <span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(points) - <span class="hljs-number">1</span>):<br>                cv2.line(clone,<br>                         (points[i][<span class="hljs-string">&#x27;x&#x27;</span>], points[i][<span class="hljs-string">&#x27;y&#x27;</span>]),<br>                         (points[i + <span class="hljs-number">1</span>][<span class="hljs-string">&#x27;x&#x27;</span>], points[i + <span class="hljs-number">1</span>][<span class="hljs-string">&#x27;y&#x27;</span>]),<br>                         (<span class="hljs-number">0</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0</span>), <span class="hljs-number">2</span>)<br>        cv2.imshow(<span class="hljs-string">&#x27;Image Trajectory Recorder&#x27;</span>, clone)<br><br>        key = cv2.waitKey(<span class="hljs-number">1</span>) &amp; <span class="hljs-number">0xFF</span><br><br>        <span class="hljs-comment"># 按&#x27;s&#x27;保存并返回</span><br>        <span class="hljs-keyword">if</span> key == <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;s&#x27;</span>):<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> points:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;没有记录到轨迹点&quot;</span>)<br>                <span class="hljs-keyword">break</span><br><br>            <span class="hljs-comment"># 计算相对时间并添加偏移量</span><br>            start_time = points[<span class="hljs-number">0</span>][<span class="hljs-string">&#x27;time&#x27;</span>]<br>            <span class="hljs-keyword">for</span> point <span class="hljs-keyword">in</span> points:<br>                point[<span class="hljs-string">&#x27;time&#x27;</span>] = point[<span class="hljs-string">&#x27;time&#x27;</span>] - start_time<br>                point[<span class="hljs-string">&#x27;x&#x27;</span>] += <span class="hljs-number">30</span><br>                point[<span class="hljs-string">&#x27;y&#x27;</span>] += <span class="hljs-number">35</span><br><br>            <span class="hljs-comment"># 返回JSON字符串</span><br>            trajectory_data = json.dumps(points, indent=<span class="hljs-number">2</span>)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;轨迹已记录，共 <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(points)&#125;</span> 个点。&quot;</span>)<br><br>            cv2.destroyAllWindows()<br>            <span class="hljs-keyword">return</span> trajectory_data<br><br>        <span class="hljs-comment"># 按&#x27;q&#x27;退出</span><br>        <span class="hljs-keyword">elif</span> key == <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;q&#x27;</span>):<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;已退出，未保存轨迹&quot;</span>)<br>            <span class="hljs-keyword">break</span><br><br>    cv2.destroyAllWindows()<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;抓包&quot;&gt;&lt;a href=&quot;#抓包&quot; class=&quot;headerlink&quot; title=&quot;抓包&quot;&gt;&lt;/a&gt;抓包&lt;/h1&gt;&lt;p&gt;先config 获取信息 再get拿到验证码和order&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://s2.loli.net/2025</summary>
      
    
    
    
    <category term="JS逆向" scheme="https://hybpjx.cn/categories/JS%E9%80%86%E5%90%91/"/>
    
    
    <category term="逆向" scheme="https://hybpjx.cn/tags/%E9%80%86%E5%90%91/"/>
    
  </entry>
  
  <entry>
    <title>补环境复制原型属性脚本</title>
    <link href="https://hybpjx.cn/2025/08/26/%E8%A1%A5%E7%8E%AF%E5%A2%83%E5%A4%8D%E5%88%B6%E5%8E%9F%E5%9E%8B%E5%B1%9E%E6%80%A7%E8%84%9A%E6%9C%AC/"/>
    <id>https://hybpjx.cn/2025/08/26/%E8%A1%A5%E7%8E%AF%E5%A2%83%E5%A4%8D%E5%88%B6%E5%8E%9F%E5%9E%8B%E5%B1%9E%E6%80%A7%E8%84%9A%E6%9C%AC/</id>
    <published>2025-08-26T11:48:06.000Z</published>
    <updated>2026-01-22T04:07:27.941Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">copyObject</span>=(<span class="hljs-params">obj, maxDepth = <span class="hljs-number">3</span></span>) =&gt;&#123;<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">extract</span>(<span class="hljs-params">o, depth = <span class="hljs-number">0</span></span>) &#123;<br>    <span class="hljs-keyword">if</span> (depth &gt; maxDepth) <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;[Max Depth]&#x27;</span>;<br>    <span class="hljs-keyword">const</span> result = &#123;&#125;;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> o) &#123;<br>      <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-keyword">const</span> value = o[key];<br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">&#x27;function&#x27;</span>) <span class="hljs-keyword">continue</span>;<br>        <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">null</span> || value === <span class="hljs-literal">undefined</span> || <span class="hljs-keyword">typeof</span> value !== <span class="hljs-string">&#x27;object&#x27;</span>) &#123;<br>          result[key] = value;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(value)) &#123;<br>          result[key] = value;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value);<br>            result[key] = value;<br>          &#125; <span class="hljs-keyword">catch</span> &#123;<br>            result[key] = <span class="hljs-title function_">extract</span>(value, depth + <span class="hljs-number">1</span>);<br>          &#125;<br>        &#125;<br>      &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>        result[key] = <span class="hljs-string">`[Error: <span class="hljs-subst">$&#123;e.message&#125;</span>]`</span>;<br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> result;<br>  &#125;<br><br>  <span class="hljs-keyword">const</span> data = <span class="hljs-title function_">extract</span>(obj);<br>  <span class="hljs-title function_">copy</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>));<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Copied to clipboard!&#x27;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="补环境框架"><a href="#补环境框架" class="headerlink" title="补环境框架"></a>补环境框架</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> envPatcher = &#123;<br>  <span class="hljs-attr">config</span>: &#123;<br>    <span class="hljs-attr">debug</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">log</span>: <span class="hljs-variable language_">console</span>.<span class="hljs-property">log</span>,<br>    <span class="hljs-attr">throwErrors</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 是否抛出代理中捕获的错误</span><br>  &#125;,<br><br>  <span class="hljs-comment">// 代理创建器</span><br>  <span class="hljs-attr">createProxy</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">name, target</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(target, &#123;<br>      <span class="hljs-title function_">get</span>(<span class="hljs-params">obj, prop</span>) &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>          <span class="hljs-keyword">const</span> value = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(obj, prop);<br>          <span class="hljs-keyword">if</span> (envPatcher.<span class="hljs-property">config</span>.<span class="hljs-property">debug</span>) &#123;<br><br>            <span class="hljs-keyword">const</span> excludeProps = [<span class="hljs-string">&quot;Array&quot;</span>, <span class="hljs-string">&quot;String&quot;</span>, <span class="hljs-string">&quot;Date&quot;</span>, <span class="hljs-string">&quot;Object&quot;</span>, <span class="hljs-string">&quot;Symbol&quot;</span>, <span class="hljs-string">&quot;constructor&quot;</span>];<br>            <span class="hljs-keyword">if</span> (!excludeProps.<span class="hljs-title function_">includes</span>(<span class="hljs-title class_">String</span>(prop))) &#123;<br>              envPatcher.<span class="hljs-property">config</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[GET] <span class="hljs-subst">$&#123;name&#125;</span>.<span class="hljs-subst">$&#123;<span class="hljs-built_in">String</span>(prop)&#125;</span> -&gt; <span class="hljs-subst">$&#123;<span class="hljs-keyword">typeof</span> value&#125;</span>`</span>);<br>            &#125;<br><br><br><br>          &#125;<br>          <span class="hljs-comment">// 如果获取的值是函数，也为其创建代理</span><br>          <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">&quot;function&quot;</span> &amp;&amp; !value.<span class="hljs-property">_isProxied</span>) &#123;<br>            <span class="hljs-keyword">const</span> proxiedFunc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(value, &#123;<br>              <span class="hljs-attr">apply</span>: <span class="hljs-function">(<span class="hljs-params">target, thisArg, args</span>) =&gt;</span> &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                  <span class="hljs-keyword">if</span> (envPatcher.<span class="hljs-property">config</span>.<span class="hljs-property">debug</span>) &#123;<br>                    envPatcher.<span class="hljs-property">config</span>.<span class="hljs-title function_">log</span>(<br>                      <span class="hljs-string">`[CALL] <span class="hljs-subst">$&#123;name&#125;</span>.<span class="hljs-subst">$&#123;<span class="hljs-built_in">String</span>(prop)&#125;</span>(<span class="hljs-subst">$&#123;args</span></span><br><span class="hljs-subst"><span class="hljs-string">                        .map((a) =&gt; <span class="hljs-keyword">typeof</span> a)</span></span><br><span class="hljs-subst"><span class="hljs-string">                        .join(<span class="hljs-string">&quot;, &quot;</span>)&#125;</span>)`</span><br>                    );<br>                  &#125;<br>                  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">apply</span>(target, thisArg, args);<br>                &#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>                  <span class="hljs-keyword">if</span> (envPatcher.<span class="hljs-property">config</span>.<span class="hljs-property">debug</span>) &#123;<br>                    envPatcher.<span class="hljs-property">config</span>.<span class="hljs-title function_">log</span>(<br>                      <span class="hljs-string">`[ERROR] Failed to call <span class="hljs-subst">$&#123;name&#125;</span>.<span class="hljs-subst">$&#123;<span class="hljs-built_in">String</span>(prop)&#125;</span>: <span class="hljs-subst">$&#123;error.message</span></span><br><span class="hljs-subst"><span class="hljs-string">                      &#125;</span>`</span><br>                    );<br>                  &#125;<br>                  <span class="hljs-comment">// 在错误处添加debugger语句，方便查看堆栈</span><br>                  <span class="hljs-keyword">debugger</span>;<br>                  <span class="hljs-keyword">if</span> (envPatcher.<span class="hljs-property">config</span>.<span class="hljs-property">throwErrors</span>) &#123;<br>                    <span class="hljs-keyword">throw</span> error; <span class="hljs-comment">// 根据配置决定是否重新抛出错误</span><br>                  &#125; <span class="hljs-keyword">else</span> &#123;<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// 如果不抛出错误，则返回undefined</span><br>                  &#125;<br>                &#125;<br>              &#125;,<br>            &#125;);<br>            <span class="hljs-comment">// 标记已代理，避免重复代理</span><br>            proxiedFunc.<span class="hljs-property">_isProxied</span> = <span class="hljs-literal">true</span>;<br>            <span class="hljs-keyword">return</span> proxiedFunc;<br>          &#125;<br>          <span class="hljs-keyword">return</span> value;<br>        &#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>          <span class="hljs-keyword">if</span> (envPatcher.<span class="hljs-property">config</span>.<span class="hljs-property">debug</span>) &#123;<br>            envPatcher.<span class="hljs-property">config</span>.<span class="hljs-title function_">log</span>(<br>              <span class="hljs-string">`[ERROR] Failed to get <span class="hljs-subst">$&#123;name&#125;</span>.<span class="hljs-subst">$&#123;<span class="hljs-built_in">String</span>(prop)&#125;</span>: <span class="hljs-subst">$&#123;error.message&#125;</span>`</span><br>            );<br>          &#125;<br>          <span class="hljs-comment">// 在错误处添加debugger语句，方便查看堆栈</span><br>          <span class="hljs-keyword">debugger</span>;<br>          <span class="hljs-keyword">if</span> (envPatcher.<span class="hljs-property">config</span>.<span class="hljs-property">throwErrors</span>) &#123;<br>            <span class="hljs-keyword">throw</span> error; <span class="hljs-comment">// 根据配置决定是否重新抛出错误</span><br>          &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// 如果不抛出错误，则返回undefined</span><br>          &#125;<br>        &#125;<br>      &#125;,<br><br>      <span class="hljs-title function_">set</span>(<span class="hljs-params">obj, prop, value</span>) &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>          <span class="hljs-keyword">if</span> (envPatcher.<span class="hljs-property">config</span>.<span class="hljs-property">debug</span>) &#123;<br>            envPatcher.<span class="hljs-property">config</span>.<span class="hljs-title function_">log</span>(<br>              <span class="hljs-string">`[SET] <span class="hljs-subst">$&#123;name&#125;</span>.<span class="hljs-subst">$&#123;<span class="hljs-built_in">String</span>(prop)&#125;</span> = <span class="hljs-subst">$&#123;value&#125;</span> (<span class="hljs-subst">$&#123;<span class="hljs-keyword">typeof</span> value&#125;</span>)`</span><br>            );<br>          &#125;<br>          <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(obj, prop, value);<br>        &#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>          <span class="hljs-keyword">if</span> (envPatcher.<span class="hljs-property">config</span>.<span class="hljs-property">debug</span>) &#123;<br>            envPatcher.<span class="hljs-property">config</span>.<span class="hljs-title function_">log</span>(<br>              <span class="hljs-string">`[ERROR] Failed to set <span class="hljs-subst">$&#123;name&#125;</span>.<span class="hljs-subst">$&#123;<span class="hljs-built_in">String</span>(prop)&#125;</span>: <span class="hljs-subst">$&#123;error.message&#125;</span>`</span><br>            );<br>          &#125;<br>          <span class="hljs-comment">// 在错误处添加debugger语句，方便查看堆栈</span><br>          <span class="hljs-keyword">debugger</span>;<br>          <span class="hljs-keyword">if</span> (envPatcher.<span class="hljs-property">config</span>.<span class="hljs-property">throwErrors</span>) &#123;<br>            <span class="hljs-keyword">throw</span> error; <span class="hljs-comment">// 根据配置决定是否重新抛出错误</span><br>          &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// 如果不抛出错误，则返回false</span><br>          &#125;<br>        &#125;<br>      &#125;,<br><br>      <span class="hljs-title function_">has</span>(<span class="hljs-params">obj, prop</span>) &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>          <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">has</span>(obj, prop);<br>          <span class="hljs-keyword">if</span> (envPatcher.<span class="hljs-property">config</span>.<span class="hljs-property">debug</span>) &#123;<br>            envPatcher.<span class="hljs-property">config</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[HAS] <span class="hljs-subst">$&#123;name&#125;</span>.<span class="hljs-subst">$&#123;<span class="hljs-built_in">String</span>(prop)&#125;</span> -&gt; <span class="hljs-subst">$&#123;result&#125;</span>`</span>);<br>          &#125;<br>          <span class="hljs-keyword">return</span> result;<br>        &#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>          <span class="hljs-keyword">if</span> (envPatcher.<span class="hljs-property">config</span>.<span class="hljs-property">debug</span>) &#123;<br>            envPatcher.<span class="hljs-property">config</span>.<span class="hljs-title function_">log</span>(<br>              <span class="hljs-string">`[ERROR] Failed to check has <span class="hljs-subst">$&#123;name&#125;</span>.<span class="hljs-subst">$&#123;<span class="hljs-built_in">String</span>(prop)&#125;</span>: <span class="hljs-subst">$&#123;error.message</span></span><br><span class="hljs-subst"><span class="hljs-string">              &#125;</span>`</span><br>            );<br>          &#125;<br>          <span class="hljs-comment">// 在错误处添加debugger语句，方便查看堆栈</span><br>          <span class="hljs-keyword">debugger</span>;<br>          <span class="hljs-keyword">if</span> (envPatcher.<span class="hljs-property">config</span>.<span class="hljs-property">throwErrors</span>) &#123;<br>            <span class="hljs-keyword">throw</span> error; <span class="hljs-comment">// 根据配置决定是否重新抛出错误</span><br>          &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> &#123;&#125;; <span class="hljs-comment">// 如果不抛出错误，则返回空对象</span><br>          &#125;<br>        &#125;<br>      &#125;,<br><br>      <span class="hljs-comment">// 处理构造函数调用</span><br>      <span class="hljs-title function_">construct</span>(<span class="hljs-params">target, args</span>) &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>          <span class="hljs-keyword">if</span> (envPatcher.<span class="hljs-property">config</span>.<span class="hljs-property">debug</span>) &#123;<br>            envPatcher.<span class="hljs-property">config</span>.<span class="hljs-title function_">log</span>(<br>              <span class="hljs-string">`[CONSTRUCT] new <span class="hljs-subst">$&#123;name&#125;</span>(<span class="hljs-subst">$&#123;args.map((a) =&gt; <span class="hljs-keyword">typeof</span> a).join(<span class="hljs-string">&quot;, &quot;</span>)&#125;</span>)`</span><br>            );<br>          &#125;<br>          <span class="hljs-keyword">const</span> instance = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">construct</span>(target, args);<br>          <span class="hljs-keyword">return</span> instance;<br>        &#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>          <span class="hljs-keyword">if</span> (envPatcher.<span class="hljs-property">config</span>.<span class="hljs-property">debug</span>) &#123;<br>            envPatcher.<span class="hljs-property">config</span>.<span class="hljs-title function_">log</span>(<br>              <span class="hljs-string">`[ERROR] Failed to construct <span class="hljs-subst">$&#123;name&#125;</span>: <span class="hljs-subst">$&#123;error.message&#125;</span>`</span><br>            );<br>          &#125;<br>          <span class="hljs-comment">// 在错误处添加debugger语句，方便查看堆栈</span><br>          <span class="hljs-keyword">debugger</span>;<br>          <span class="hljs-keyword">if</span> (envPatcher.<span class="hljs-property">config</span>.<span class="hljs-property">throwErrors</span>) &#123;<br>            <span class="hljs-keyword">throw</span> error; <span class="hljs-comment">// 根据配置决定是否重新抛出错误</span><br>          &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> &#123;&#125;; <span class="hljs-comment">// 如果不抛出错误，则返回空对象</span><br>          &#125;<br>        &#125;<br>      &#125;,<br>    &#125;);<br>  &#125;,<br><br>  <span class="hljs-comment">// 函数保护器</span><br>  <span class="hljs-attr">protectFunction</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">func, nativeCode</span>) &#123;<br>    <span class="hljs-keyword">const</span> symbol = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">&quot;native&quot;</span>);<br>    <span class="hljs-keyword">const</span> originalToString = <span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>;<br><br>    func[symbol] =<br>      nativeCode || <span class="hljs-string">`function <span class="hljs-subst">$&#123;func.name || <span class="hljs-string">&quot;anonymous&quot;</span>&#125;</span>() &#123; [native code] &#125;`</span>;<br><br>    <span class="hljs-keyword">if</span> (!func.<span class="hljs-property">toString</span>[symbol]) &#123;<br>      func.<span class="hljs-property">toString</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> func[symbol] || originalToString.<span class="hljs-title function_">call</span>(func);<br>      &#125;;<br>      func.<span class="hljs-property">toString</span>[symbol] = <span class="hljs-string">&quot;function toString() &#123; [native code] &#125;&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> func;<br>  &#125;,<br><br>  <span class="hljs-comment">// 设置属性</span><br>  <span class="hljs-attr">setProp</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">obj, prop, value, writable = <span class="hljs-literal">true</span></span>) &#123;<br>    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(obj, prop, &#123;<br>      <span class="hljs-attr">value</span>: value,<br>      <span class="hljs-attr">writable</span>: writable,<br>      <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>,<br>      <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,<br>    &#125;);<br>    <span class="hljs-keyword">return</span> obj;<br>  &#125;,<br><br>  <span class="hljs-comment">// 构造函数创建器，嵌套 protectFunction</span><br>  <span class="hljs-attr">createConstructor</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">name, implementation</span>) &#123;<br>    <span class="hljs-comment">// 定义构造函数</span><br>    <span class="hljs-keyword">const</span> <span class="hljs-title class_">Constructor</span> = implementation || <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123; &#125;;<br>    <span class="hljs-comment">// 使用 protectFunction 包装构造函数</span><br>    <span class="hljs-keyword">const</span> <span class="hljs-title class_">ProtectedConstructor</span> = envPatcher.<span class="hljs-title function_">protectFunction</span>(<br>      <span class="hljs-title class_">Constructor</span>,<br>      <span class="hljs-string">`function <span class="hljs-subst">$&#123;name&#125;</span>() &#123; [native code] &#125;`</span><br>    );<br>    <span class="hljs-comment">// 设置构造函数名称</span><br>    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-title class_">ProtectedConstructor</span>, <span class="hljs-string">&quot;name&quot;</span>, &#123;<br>      <span class="hljs-attr">value</span>: name,<br>      <span class="hljs-attr">writable</span>: <span class="hljs-literal">false</span>,<br>      <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>,<br>      <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,<br>    &#125;);<br>    <span class="hljs-comment">// 设置原型</span><br>    <span class="hljs-title class_">ProtectedConstructor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>, &#123;<br>      <span class="hljs-attr">constructor</span>: &#123;<br>        <span class="hljs-attr">value</span>: <span class="hljs-title class_">ProtectedConstructor</span>,<br>        <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>,<br>        <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">false</span>,<br>        <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,<br>      &#125;,<br>    &#125;);<br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">ProtectedConstructor</span>;<br>  &#125;,<br><br><br>  <span class="hljs-comment">// 设置继承关系</span><br>  <span class="hljs-attr">setInheritance</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">child, parent</span>) &#123;<br>    <span class="hljs-comment">// 设置构造函数继承</span><br>    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">setPrototypeOf</span>(child, parent);<br>    <span class="hljs-comment">// 设置原型继承</span><br>    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">setPrototypeOf</span>(child.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>, parent.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);<br>    <span class="hljs-keyword">return</span> child;<br>  &#125;,<br><br>  <span class="hljs-comment">// 批量设置属性</span><br>  <span class="hljs-attr">setProps</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">obj, props</span>) &#123;<br>    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(props).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> &#123;<br>      <span class="hljs-keyword">const</span> config = props[key];<br>      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> config === <span class="hljs-string">&#x27;object&#x27;</span> &amp;&amp; config.<span class="hljs-property">value</span> !== <span class="hljs-literal">undefined</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setProp</span>(obj, key, config.<span class="hljs-property">value</span>, config);<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setProp</span>(obj, key, config);<br>      &#125;<br>    &#125;);<br>    <span class="hljs-keyword">return</span> obj;<br>  &#125;,<br><br>&#125;;<br><br><br><span class="hljs-keyword">const</span> $toString = <span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span>;<br><span class="hljs-keyword">const</span> toStringSymbol = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">&#x27;toString&#x27;</span>);<br><br><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">toString</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>($toString, &#123;<br>  <span class="hljs-title function_">apply</span>(<span class="hljs-params">target, thisArg, args</span>) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">new</span>.<span class="hljs-property">target</span>) &#123;<br>      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">&quot;toString is not a constructor&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// 检查是否有自定义的 native code 标记</span><br>    <span class="hljs-keyword">if</span> (thisArg &amp;&amp; thisArg[toStringSymbol]) &#123;<br>      <span class="hljs-keyword">return</span> thisArg[toStringSymbol];<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">apply</span>(target, thisArg, args);<br>  &#125;<br>&#125;);<br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Window</span> = envPatcher.<span class="hljs-title function_">createConstructor</span>(<span class="hljs-string">&quot;Window&quot;</span>);<br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Navigator</span> = envPatcher.<span class="hljs-title function_">createConstructor</span>(<span class="hljs-string">&quot;Navigator&quot;</span>);<br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Location</span> = envPatcher.<span class="hljs-title function_">createConstructor</span>(<span class="hljs-string">&quot;Location&quot;</span>);<br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Document</span> = envPatcher.<span class="hljs-title function_">createConstructor</span>(<span class="hljs-string">&quot;Document&quot;</span>);<br><br><br><br><span class="hljs-keyword">const</span> navigatorObj = &#123;&#125;;<br><span class="hljs-title class_">Object</span>.<span class="hljs-title function_">setPrototypeOf</span>(navigatorObj, <span class="hljs-title class_">Navigator</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);<br><span class="hljs-keyword">const</span> locationObj = &#123;&#125;;<br><span class="hljs-title class_">Object</span>.<span class="hljs-title function_">setPrototypeOf</span>(locationObj, <span class="hljs-title class_">Location</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);<br><span class="hljs-keyword">const</span> documentObj = &#123;&#125;;<br><span class="hljs-title class_">Object</span>.<span class="hljs-title function_">setPrototypeOf</span>(documentObj, <span class="hljs-title class_">Document</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);<br><br><span class="hljs-title class_">Object</span>.<span class="hljs-title function_">setPrototypeOf</span>(globalThis, <span class="hljs-title class_">Window</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);<br>globalThis.<span class="hljs-property">window</span> = globalThis;<br>globalThis.<span class="hljs-property">self</span> = globalThis;<br>globalThis.<span class="hljs-property">top</span> = globalThis;<br>globalThis.<span class="hljs-property">parent</span> = globalThis;<br>globalThis.<span class="hljs-property">frames</span> = globalThis;<br><br><span class="hljs-comment">// 设置其他全局对象</span><br>globalThis.<span class="hljs-property">navigator</span> = navigatorObj;<br>globalThis.<span class="hljs-property">Navigator</span> = <span class="hljs-title class_">Navigator</span>;<br>globalThis.<span class="hljs-property">location</span> = locationObj;<br>globalThis.<span class="hljs-property">Location</span> = <span class="hljs-title class_">Location</span>;<br>globalThis.<span class="hljs-property">document</span> = documentObj;<br>globalThis.<span class="hljs-property">Document</span> = <span class="hljs-title class_">Document</span>;<br><br><br><br>globalThis.<span class="hljs-property">window</span> = envPatcher.<span class="hljs-title function_">createProxy</span>(<span class="hljs-string">&#x27;window&#x27;</span>, <span class="hljs-variable language_">window</span>)<br>globalThis.<span class="hljs-property">document</span> = envPatcher.<span class="hljs-title function_">createProxy</span>(<span class="hljs-string">&#x27;document&#x27;</span>, <span class="hljs-variable language_">document</span>)<br>globalThis.<span class="hljs-property">navigator</span> = envPatcher.<span class="hljs-title function_">createProxy</span>(<span class="hljs-string">&#x27;navigator&#x27;</span>, navigator)<br>globalThis.<span class="hljs-property">location</span> = envPatcher.<span class="hljs-title function_">createProxy</span>(<span class="hljs-string">&#x27;location&#x27;</span>, location);<br><br><br>;;;;;;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span </summary>
      
    
    
    
    <category term="杂记" scheme="https://hybpjx.cn/categories/%E6%9D%82%E8%AE%B0/"/>
    
    
    <category term="JavaScript" scheme="https://hybpjx.cn/tags/JavaScript/"/>
    
  </entry>
  
</feed>
